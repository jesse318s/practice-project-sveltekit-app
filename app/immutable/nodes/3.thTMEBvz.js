import{s as ke,a as ue,b as de,n as he,r as we,o as qe,d as Ee}from"../chunks/scheduler.C5a7OfxR.js";import{S as Ce,i as ye,e as C,t as V,s as N,c as y,a as P,b as R,d as T,f as B,k as ge,l as m,m as S,g as De,h as s,n as _e,j as W}from"../chunks/index.D0FX01Aq.js";import{i as Me}from"../chunks/store.CWnBpkn4.js";function Ie(o){let f,e,H,U,t,c,i,k,F,p,u,v,j,b,w,g,x,X,A,L,J,Z,E,z,$,O,r="Attack",l,n,_="Special Attack",q,D,M,d,I,G,ee,se,Y,ae,te,re,ie;return{c(){f=C("div"),e=C("div"),H=C("div"),U=V("Player HP: "),t=V(o[2]),c=N(),i=C("div"),k=V("Player MP: "),F=V(o[3]),p=N(),u=C("div"),v=V("Enemy HP: "),j=V(o[4]),b=N(),w=C("div"),g=C("img"),X=N(),A=C("div"),L=C("div"),Z=N(),E=C("img"),$=N(),O=C("button"),O.textContent=r,l=N(),n=C("button"),n.textContent=_,q=N(),D=C("div"),M=V(o[5]),d=N(),I=C("div"),G=V("Experience: "),ee=V(o[0]),se=N(),Y=C("div"),ae=V("Drachmas: "),te=V(o[1]),this.h()},l(h){f=y(h,"DIV",{class:!0});var a=P(f);e=y(a,"DIV",{class:!0});var K=P(e);H=y(K,"DIV",{});var le=P(H);U=R(le,"Player HP: "),t=R(le,o[2]),le.forEach(T),c=B(K),i=y(K,"DIV",{});var oe=P(i);k=R(oe,"Player MP: "),F=R(oe,o[3]),oe.forEach(T),p=B(K),u=y(K,"DIV",{});var ce=P(u);v=R(ce,"Enemy HP: "),j=R(ce,o[4]),ce.forEach(T),K.forEach(T),b=B(a),w=y(a,"DIV",{class:!0});var Q=P(w);g=y(Q,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),X=B(Q),A=y(Q,"DIV",{class:!0});var pe=P(A);L=y(pe,"DIV",{class:!0}),P(L).forEach(T),pe.forEach(T),Z=B(Q),E=y(Q,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),Q.forEach(T),$=B(a),O=y(a,"BUTTON",{"data-svelte-h":!0}),ge(O)!=="svelte-ig8gg4"&&(O.textContent=r),l=B(a),n=y(a,"BUTTON",{"data-svelte-h":!0}),ge(n)!=="svelte-11zl5of"&&(n.textContent=_),q=B(a),D=y(a,"DIV",{class:!0});var me=P(D);M=R(me,o[5]),me.forEach(T),d=B(a),I=y(a,"DIV",{class:!0});var ne=P(I);G=R(ne,"Experience: "),ee=R(ne,o[0]),ne.forEach(T),se=B(a),Y=y(a,"DIV",{class:!0});var fe=P(Y);ae=R(fe,"Drachmas: "),te=R(fe,o[1]),fe.forEach(T),a.forEach(T),this.h()},h(){m(e,"class","stats svelte-q0qwhu"),ue(g.src,x=o[9].img)||m(g,"src",x),m(g,"alt",o[9].name),m(g,"width","128px"),m(g,"height","128px"),m(g,"class","svelte-q0qwhu"),S(g,"attack",o[6]),S(g,"damage",o[8]),m(L,"class",J=de(o[7]?o[9].specialEffect:"")+" svelte-q0qwhu"),m(A,"class","special-effect-container svelte-q0qwhu"),m(E,"class","enemy-creature svelte-q0qwhu"),ue(E.src,z=o[10].img)||m(E,"src",z),m(E,"alt",o[10].name),m(E,"width","128px"),m(E,"height","128px"),S(E,"enemy-attack",o[8]),S(E,"enemy-damage",o[6]),m(w,"class","creatures svelte-q0qwhu"),m(D,"class","combat-alert svelte-q0qwhu"),m(I,"class","experience svelte-q0qwhu"),m(Y,"class","drachmas svelte-q0qwhu"),m(f,"class","game-container svelte-q0qwhu")},m(h,a){De(h,f,a),s(f,e),s(e,H),s(H,U),s(H,t),s(e,c),s(e,i),s(i,k),s(i,F),s(e,p),s(e,u),s(u,v),s(u,j),s(f,b),s(f,w),s(w,g),s(w,X),s(w,A),s(A,L),s(w,Z),s(w,E),s(f,$),s(f,O),s(f,l),s(f,n),s(f,q),s(f,D),s(D,M),s(f,d),s(f,I),s(I,G),s(I,ee),s(f,se),s(f,Y),s(Y,ae),s(Y,te),re||(ie=[_e(O,"click",o[12]),_e(n,"click",o[13])],re=!0)},p(h,[a]){a&4&&W(t,h[2]),a&8&&W(F,h[3]),a&16&&W(j,h[4]),a&64&&S(g,"attack",h[6]),a&256&&S(g,"damage",h[8]),a&128&&J!==(J=de(h[7]?h[9].specialEffect:"")+" svelte-q0qwhu")&&m(L,"class",J),a&256&&S(E,"enemy-attack",h[8]),a&64&&S(E,"enemy-damage",h[6]),a&32&&W(M,h[5]),a&1&&W(ee,h[0]),a&2&&W(te,h[1])},i:he,o:he,d(h){h&&T(f),re=!1,we(ie)}}}function ve(o,f,e){let H=0,U=0,t={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},c={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},i=t.hp+c.hpMod,k=t.mp+c.mpMod,F=k,p={id:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},u=p.hp,v="",j=0,b=!1,w=!1,g=!1;const x=()=>{if(k!==t.mp+c.mpMod&&k+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(3,k=k+t.mpRegen+c.mpRegenMod);return}e(3,k=t.mp+c.mpMod)},X=(r,l)=>{if(i-(p.attack-p.attack*r)*l<=0){e(5,v="Defeat!"),e(2,i=0);return}e(2,i=i-(p.attack-p.attack*r)*l)},A=(r,l,n)=>{try{const _=t.speed+c.speedMod;let q=(t.defense+c.defenseMod)/100,D=p.critical/100,M=1,d=!1;if(p.attackType==="Magic"&&(q=0),p.speed<_?d=Math.random()>=.5:d=Math.random()>=.8,j>1&&!d&&!r&&(d=!0),!d&&r&&e(5,v="Enemy was too slow!"),!d&&!r){e(3,k=F),j+=1,z(l,n);return}l===t.attackName&&x(),d&&r&&e(5,v="Both abilities succeeded."),d&&!r&&e(5,v="Your summon was too slow!"),d&&(Math.random()<=D&&(M=1.5),p.attackType==="Poison"&&M===1&&(M=1.5),X(q,M),e(8,g=!0),setTimeout(()=>e(8,g=!1),500))}catch(_){console.error(_)}},L=(r,l,n,_,q)=>{q==="Lifesteal"&&n&&(i+r*l*.2>t.hp+c.hpMod?e(2,i=t.hp+c.hpMod):e(2,i=i+r*l*.2)),A(n,_,q)},J=(r,l,n,_,q)=>{r&&(i+l*n>t.hp+c.hpMod?e(2,i=t.hp+c.hpMod):e(2,i=i+l*n)),A(r,_,q)},Z=(r,l,n,_,q,D,M)=>{if(e(3,k=k-n),M!=="Heal"){if(u-(l-l*q)*_<=0&&r){e(4,u=0),e(5,v="Victory!"),e(0,H+=p.reward*2),e(1,U+=p.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(7,w=!0),setTimeout(()=>e(7,w=!1),500);return}r&&(e(4,u=u-(l-l*q)*_),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(7,w=!0),setTimeout(()=>e(7,w=!1),500)),L(l,_,r,D,M);return}J(r,l,_,D,M)},E=()=>{(i<=0||u<=0)&&(e(2,i=t.hp+c.hpMod),e(3,k=t.mp+c.mpMod),e(4,u=p.hp),e(5,v=""))},z=(r,l)=>{try{const n=t.attack+c.attackMod,_=t.speed+c.speedMod,q=(t.critical+c.criticalMod)/100;let D=t.special+c.specialMod,M=t.specialCost,d=p.defense/100,I=!1,G=1;if(E(),r===t.specialName2&&(D=t.special2+c.specialMod,M=t.specialCost2),l==="Magic"&&(d=0),_<p.speed?I=Math.random()>=.5:I=Math.random()>=.8,Math.random()<=q&&(G=1.5),l==="Poison"&&G===1&&(G=1.5),r===t.attackName){if(u-(n-n*d)*G<=0&&I){e(4,u=0),e(5,v="Victory!"),e(0,H+=p.reward*2),e(1,U+=p.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500);return}I&&(e(4,u=u-(n-n*d)*G),e(6,b=!0),setTimeout(()=>e(6,b=!1),500)),A(I,r,l);return}k>=M?Z(I,D,M,G,d,r,l):e(5,v="Not enough MP!")}catch(n){console.error(n)}};return qe(()=>{Me.set(!0)}),Ee(()=>{Me.set(!1)}),[H,U,i,k,u,v,b,w,g,t,p,z,()=>z(t.attackName,t.attackType),()=>z(t.specialName,t.specialType)]}class Pe extends Ce{constructor(f){super(),ye(this,f,ve,Ie,ke,{})}}export{Pe as component};
