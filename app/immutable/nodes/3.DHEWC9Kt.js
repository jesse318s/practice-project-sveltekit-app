import{s as ie,a as me,n as ne,r as ue}from"../chunks/scheduler.CEbcw_JU.js";import{S as de,i as he,e as T,t as V,s as L,c as w,a as S,b as H,d as B,f as q,k as pe,l as g,m as z,g as ge,h as s,n as fe,j as Q}from"../chunks/index.DoMf8_sW.js";function ke(l){let m,e,R,U,t,c,n,k,F,i,d,D,j,b,E,h,A,W,y,J,X,O,Z="Attack",Y,N,$="Special Attack",v,a,r,u,p,M,I,_,f,G,P,ee,le;return{c(){m=T("div"),e=T("div"),R=T("div"),U=V("Player HP: "),t=V(l[2]),c=L(),n=T("div"),k=V("Player MP: "),F=V(l[3]),i=L(),d=T("div"),D=V("Enemy HP: "),j=V(l[4]),b=L(),E=T("div"),h=T("img"),W=L(),y=T("img"),X=L(),O=T("button"),O.textContent=Z,Y=L(),N=T("button"),N.textContent=$,v=L(),a=T("div"),r=V(l[5]),u=L(),p=T("div"),M=V("Experience: "),I=V(l[0]),_=L(),f=T("div"),G=V("Drachmas: "),P=V(l[1]),this.h()},l(C){m=w(C,"DIV",{class:!0});var o=S(m);e=w(o,"DIV",{class:!0});var K=S(e);R=w(K,"DIV",{});var te=S(R);U=H(te,"Player HP: "),t=H(te,l[2]),te.forEach(B),c=q(K),n=w(K,"DIV",{});var se=S(n);k=H(se,"Player MP: "),F=H(se,l[3]),se.forEach(B),i=q(K),d=w(K,"DIV",{});var ae=S(d);D=H(ae,"Enemy HP: "),j=H(ae,l[4]),ae.forEach(B),K.forEach(B),b=q(o),E=w(o,"DIV",{class:!0});var x=S(E);h=w(x,"IMG",{id:!0,src:!0,alt:!0,width:!0,height:!0,class:!0}),W=q(x),y=w(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(B),X=q(o),O=w(o,"BUTTON",{"data-svelte-h":!0}),pe(O)!=="svelte-xzlz5g"&&(O.textContent=Z),Y=q(o),N=w(o,"BUTTON",{"data-svelte-h":!0}),pe(N)!=="svelte-afg87k"&&(N.textContent=$),v=q(o),a=w(o,"DIV",{class:!0});var ce=S(a);r=H(ce,l[5]),ce.forEach(B),u=q(o),p=w(o,"DIV",{class:!0});var re=S(p);M=H(re,"Experience: "),I=H(re,l[0]),re.forEach(B),_=q(o),f=w(o,"DIV",{class:!0});var oe=S(f);G=H(oe,"Drachmas: "),P=H(oe,l[1]),oe.forEach(B),o.forEach(B),this.h()},h(){g(e,"class","stats svelte-9kago5"),g(h,"id","player-creature"),me(h.src,A=l[10].img)||g(h,"src",A),g(h,"alt",l[10].name),g(h,"width","128px"),g(h,"height","128px"),g(h,"class","svelte-9kago5"),z(h,"attack",l[6]),z(h,"damage",l[7]),g(y,"class","enemy-creature svelte-9kago5"),me(y.src,J=l[11].img)||g(y,"src",J),g(y,"alt",l[11].name),g(y,"width","128px"),g(y,"height","128px"),z(y,"enemy-attack",l[8]),z(y,"enemy-damage",l[9]),g(E,"class","creatures svelte-9kago5"),g(a,"class","combat-alert svelte-9kago5"),g(p,"class","experience svelte-9kago5"),g(f,"class","drachmas svelte-9kago5"),g(m,"class","game-container svelte-9kago5")},m(C,o){ge(C,m,o),s(m,e),s(e,R),s(R,U),s(R,t),s(e,c),s(e,n),s(n,k),s(n,F),s(e,i),s(e,d),s(d,D),s(d,j),s(m,b),s(m,E),s(E,h),s(E,W),s(E,y),s(m,X),s(m,O),s(m,Y),s(m,N),s(m,v),s(m,a),s(a,r),s(m,u),s(m,p),s(p,M),s(p,I),s(m,_),s(m,f),s(f,G),s(f,P),ee||(le=[fe(O,"click",l[12]),fe(N,"click",l[13])],ee=!0)},p(C,[o]){o&4&&Q(t,C[2]),o&8&&Q(F,C[3]),o&16&&Q(j,C[4]),o&64&&z(h,"attack",C[6]),o&128&&z(h,"damage",C[7]),o&256&&z(y,"enemy-attack",C[8]),o&512&&z(y,"enemy-damage",C[9]),o&32&&Q(r,C[5]),o&1&&Q(I,C[0]),o&2&&Q(P,C[1])},i:ne,o:ne,d(C){C&&B(m),ee=!1,ue(le)}}}function Me(l,m,e){let R=0,U=0,t={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",special2:75,specialCost2:100,specialName2:"Sunder",specialType2:"Magic"},c={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},n=t.hp+c.hpMod,k=t.mp+c.mpMod,F=k,i={id:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},d=i.hp,D="",j=0,b=!1,E=!1,h=!1,A=!1;const W=()=>{if(k!==t.mp+c.mpMod&&k+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(3,k=k+t.mpRegen+c.mpRegenMod);return}e(3,k=t.mp+c.mpMod)},y=(a,r)=>{if(n-(i.attack-i.attack*a)*r<=0){e(5,D="Defeat!"),e(2,n=0),e(7,E=!0),setTimeout(()=>e(7,E=!1),500);return}e(2,n=n-(i.attack-i.attack*a)*r),e(7,E=!0),setTimeout(()=>e(7,E=!1),500)},J=(a,r,u)=>{try{const p=t.speed+c.speedMod;let M=(t.defense+c.defenseMod)/100,I=i.critical/100,_=1,f=!1;if(i.attackType==="Magic"&&(M=0),i.speed<p?f=Math.random()>=.5:f=Math.random()>=.8,j>1&&!f&&!a&&(f=!0),!f&&a&&e(5,D="Enemy was too slow!"),!f&&!a){e(3,k=F),j+=1,Y(r,u);return}r===t.attackName&&W(),f&&a&&e(5,D="Both abilities succeeded."),f&&!a&&e(5,D="Your summon was too slow!"),f&&(Math.random()<=I&&(_=1.5),i.attackType==="Poison"&&_===1&&(_=1.5),y(M,_),e(8,h=!0),setTimeout(()=>e(8,h=!1),500))}catch(p){console.error(p)}},X=(a,r,u,p,M)=>{M==="Lifesteal"&&u&&(n+a*r*.2>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+a*r*.2)),J(u,p,M)},O=(a,r,u,p,M)=>{a&&(n+r*u>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+r*u)),J(a,p,M)},Z=(a,r,u,p,M,I,_)=>{if(e(3,k=k-u),_!=="Heal"){if(d-(r-r*M)*p<=0&&a){e(4,d=0),e(5,D="Victory!"),e(0,R+=i.reward*2),e(1,U+=i.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}a&&(e(4,d=d-(r-r*M)*p),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),X(r,p,a,I,_);return}O(a,r,p,I,_)},Y=(a,r)=>{try{const u=t.attack+c.attackMod,p=t.speed+c.speedMod,M=(t.critical+c.criticalMod)/100;let I=t.special+c.specialMod,_=t.specialCost,f=i.defense/100,G=!1,P=1;if(a===t.specialName2&&(I=t.special2+c.specialMod,_=t.specialCost2),r==="Magic"&&(f=0),p<i.speed?G=Math.random()>=.5:G=Math.random()>=.8,Math.random()<=M&&(P=1.5),r==="Poison"&&P===1&&(P=1.5),a===t.attackName){if(d-(u-u*f)*P<=0&&G){e(4,d=0),e(5,D="Victory!"),e(0,R+=i.reward*2),e(1,U+=i.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}G&&(e(4,d=d-(u-u*f)*P),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),J(G,a,r);return}k>=_?Z(G,I,_,P,f,a,r):e(5,D="Not enough MP!")}catch(u){console.error(u)}},N=()=>{(n<=0||d<=0)&&(e(2,n=t.hp+c.hpMod),e(3,k=t.mp+c.mpMod),e(4,d=i.hp),e(5,D=""))};return[R,U,n,k,d,D,b,E,h,A,t,i,()=>{N(),Y(t.attackName,t.attackType)},()=>{N(),Y(t.specialName,t.specialType)}]}class ye extends de{constructor(m){super(),he(this,m,Me,ke,ie,{})}}export{ye as component};
