import{s as Ie,e as k,a as O,c as _,b as C,g as B,f as I,K as _e,p as g,L as J,M as Ce,i as Ee,h as a,n as ye,N as he,O as pe,w as Ge,z as Ne,t as U,d as H,j as le,o as je,P as qe}from"../chunks/scheduler.Cbetkgfn.js";import{S as Se,i as Te,b as De,d as Pe,m as Ae,a as Ve,t as Re,e as Ue}from"../chunks/index.OYoryRwg.js";import{s as He,r as Oe}from"../chunks/relics.Bej4_qsT.js";import{i as Be}from"../chunks/store.CKltHNWN.js";import{b as Z,g as Fe}from"../chunks/entry.BFIF7do3.js";const Me=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function Ke(t){let s,e,f,i,c,V,l,r,D,h,n,A,o,u,p,q,b,E,v,Q,z,L,x,te,G;return{c(){s=k("section"),e=k("div"),f=k("div"),i=k("div"),c=k("img"),r=O(),D=k("div"),h=O(),n=k("div"),o=O(),u=k("div"),p=k("img"),E=O(),v=k("div"),Q=O(),z=k("div"),L=k("div"),te=O(),G=k("div"),this.h()},l(S){s=_(S,"SECTION",{class:!0});var M=C(s);e=_(M,"DIV",{class:!0});var ae=C(e);f=_(ae,"DIV",{class:!0});var $=C(f);i=_($,"DIV",{class:!0});var W=C(i);c=_(W,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),r=B(W),D=_(W,"DIV",{class:!0}),C(D).forEach(I),h=B(W),n=_(W,"DIV",{class:!0}),C(n).forEach(I),W.forEach(I),o=B($),u=_($,"DIV",{class:!0});var X=C(u);p=_(X,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),E=B(X),v=_(X,"DIV",{class:!0}),C(v).forEach(I),Q=B(X),z=_(X,"DIV",{class:!0});var K=C(z);L=_(K,"DIV",{class:!0}),C(L).forEach(I),K.forEach(I),X.forEach(I),$.forEach(I),te=B(ae),G=_(ae,"DIV",{class:!0}),C(G).forEach(I),ae.forEach(I),M.forEach(I),this.h()},h(){_e(c.src,V=Z+"/game/"+t[0].creature.img)||g(c,"src",V),g(c,"width","128px"),g(c,"height","128px"),g(c,"alt",l=t[0].creature.name),g(c,"class","svelte-b5b362"),J(c,"attack",t[0].isAttacking),J(c,"hurt",t[1].isAttacking),J(c,"aura",!t[0].isUsingSpecial),J(c,"player-using-special",t[0].isUsingSpecial),g(D,"class","shadow svelte-b5b362"),g(n,"class",A=Ce(t[0].isUsingSpecial?t[0].creature.specialEffect:"")+" svelte-b5b362"),g(i,"class","creature player-creature svelte-b5b362"),_e(p.src,q=Z+"/game/"+t[1].creature.img)||g(p,"src",q),g(p,"width","128px"),g(p,"height","128px"),g(p,"alt",b=t[1].creature.name),g(p,"class","svelte-b5b362"),J(p,"enemy-attack",t[1].isAttacking),J(p,"enemy-hurt",t[0].isAttacking),J(p,"enemy-spawning",t[1].isSpawning),g(v,"class","shadow svelte-b5b362"),g(L,"class",x=t[1].isSpawning?"enemy-spawn":""),g(z,"class","enemy-spawn-container svelte-b5b362"),g(u,"class","creature enemy-creature svelte-b5b362"),g(f,"class","creatures-container svelte-b5b362"),g(G,"class","floor svelte-b5b362"),g(e,"class","battlefield svelte-b5b362"),g(s,"class","battle-container svelte-b5b362")},m(S,M){Ee(S,s,M),a(s,e),a(e,f),a(f,i),a(i,c),a(i,r),a(i,D),a(i,h),a(i,n),a(f,o),a(f,u),a(u,p),a(u,E),a(u,v),a(u,Q),a(u,z),a(z,L),a(e,te),a(e,G)},p(S,[M]){M&1&&!_e(c.src,V=Z+"/game/"+S[0].creature.img)&&g(c,"src",V),M&1&&l!==(l=S[0].creature.name)&&g(c,"alt",l),M&1&&J(c,"attack",S[0].isAttacking),M&2&&J(c,"hurt",S[1].isAttacking),M&1&&J(c,"aura",!S[0].isUsingSpecial),M&1&&J(c,"player-using-special",S[0].isUsingSpecial),M&1&&A!==(A=Ce(S[0].isUsingSpecial?S[0].creature.specialEffect:"")+" svelte-b5b362")&&g(n,"class",A),M&2&&!_e(p.src,q=Z+"/game/"+S[1].creature.img)&&g(p,"src",q),M&2&&b!==(b=S[1].creature.name)&&g(p,"alt",b),M&2&&J(p,"enemy-attack",S[1].isAttacking),M&1&&J(p,"enemy-hurt",S[0].isAttacking),M&2&&J(p,"enemy-spawning",S[1].isSpawning),M&2&&x!==(x=S[1].isSpawning?"enemy-spawn":"")&&g(L,"class",x)},i:ye,o:ye,d(S){S&&I(s)}}}function Ye(t,s,e){let{playerState:f}=s,{enemyState:i}=s;return t.$$set=c=>{"playerState"in c&&e(0,f=c.playerState),"enemyState"in c&&e(1,i=c.enemyState)},[f,i]}class Je extends Se{constructor(s){super(),Te(this,s,Ye,Ke,Ie,{playerState:0,enemyState:1})}}const Le=(t,s)=>{try{const f=[{label:"Name",value:t.name},{label:"HP",value:t.hp+s.hpMod},{label:"Speed",value:t.speed+s.speedMod},{label:"Defense",value:t.defense+s.defenseMod},{label:"Critical",value:t.critical+s.criticalMod},{label:"MP",value:t.mp+s.mpMod},{label:"MP Regen",value:t.mpRegen+s.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+s.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+s.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(i=>`${i.label}: ${i.value}`).join(`
`);alert(f)}catch(e){console.error(e)}};function Qe(t){let s,e,f="Attack",i,c,V="Special",l,r,D="Mimic Summon",h,n,A="View Stats",o,u,p="Travel",q,b;return{c(){s=k("section"),e=k("button"),e.textContent=f,i=O(),c=k("button"),c.textContent=V,l=O(),r=k("button"),r.textContent=D,h=O(),n=k("button"),n.textContent=A,o=O(),u=k("button"),u.textContent=p},l(E){s=_(E,"SECTION",{});var v=C(s);e=_(v,"BUTTON",{"data-svelte-h":!0}),he(e)!=="svelte-19y3ioo"&&(e.textContent=f),i=B(v),c=_(v,"BUTTON",{"data-svelte-h":!0}),he(c)!=="svelte-172d9ub"&&(c.textContent=V),l=B(v),r=_(v,"BUTTON",{"data-svelte-h":!0}),he(r)!=="svelte-zspdcm"&&(r.textContent=D),h=B(v),n=_(v,"BUTTON",{"data-svelte-h":!0}),he(n)!=="svelte-1wutj5b"&&(n.textContent=A),o=B(v),u=_(v,"BUTTON",{"data-svelte-h":!0}),he(u)!=="svelte-1hg8zdr"&&(u.textContent=p),v.forEach(I)},m(E,v){Ee(E,s,v),a(s,e),a(s,i),a(s,c),a(s,l),a(s,r),a(s,h),a(s,n),a(s,o),a(s,u),q||(b=[pe(e,"click",t[4]),pe(e,"contextmenu",t[5]),pe(c,"click",t[6]),pe(r,"click",function(){Ne(t[2])&&t[2].apply(this,arguments)}),pe(n,"click",function(){Ne(Le(t[1],t[3]))&&Le(t[1],t[3]).apply(this,arguments)}),pe(u,"click",t[7])],q=!0)},p(E,[v]){t=E},i:ye,o:ye,d(E){E&&I(s),q=!1,Ge(b)}}}function We(t,s,e){let{battleEnemy:f}=s,{playerCreature:i}=s,{swapCreature:c}=s,{chosenRelic:V}=s;const l=()=>f(i.attackName,i.attackType),r=n=>{n.preventDefault(),f(i.specialName,i.specialType)},D=()=>f(i.specialName,i.specialType),h=()=>{Fe(Z+"/game/world")};return t.$$set=n=>{"battleEnemy"in n&&e(0,f=n.battleEnemy),"playerCreature"in n&&e(1,i=n.playerCreature),"swapCreature"in n&&e(2,c=n.swapCreature),"chosenRelic"in n&&e(3,V=n.chosenRelic)},[f,i,c,V,l,r,D,h]}class Xe extends Se{constructor(s){super(),Te(this,s,We,Qe,Ie,{battleEnemy:0,playerCreature:1,swapCreature:2,chosenRelic:3})}}function Ze(t){let s,e,f,i=t[3].name+"",c,V,l,r,D,h,n,A,o,u,p,q,b,E,v,Q,z,L=t[4].hp+"",x,te,G,S,M,ae,$=t[4].mp+"",W,X,K,ue,ne,m,d=t[7].hp+"",w,P,T,ee=(t[9]||"The battle begins...")+"",j,R,F,se,re,Y;return F=new Je({props:{playerState:{creature:t[4],isAttacking:t[10],isUsingSpecial:t[11]},enemyState:{creature:t[7],isAttacking:t[12],isSpawning:t[13]}}}),re=new Xe({props:{battleEnemy:t[14],playerCreature:t[4],swapCreature:t[15],chosenRelic:t[2]}}),{c(){s=k("main"),e=k("section"),f=k("h2"),c=U(i),V=O(),l=k("div"),r=k("div"),D=k("div"),h=U("Experience: "),n=U(t[0]),A=O(),o=k("div"),u=U("Drachmas: "),p=U(t[1]),q=O(),b=k("div"),E=k("div"),v=U("Player HP: "),Q=U(t[5]),z=U("/"),x=U(L),te=O(),G=k("div"),S=U("Player MP: "),M=U(t[6]),ae=U("/"),W=U($),X=O(),K=k("div"),ue=U("Enemy HP: "),ne=U(t[8]),m=U("/"),w=U(d),P=O(),T=k("div"),j=U(ee),R=O(),De(F.$$.fragment),se=O(),De(re.$$.fragment),this.h()},l(y){s=_(y,"MAIN",{class:!0});var N=C(s);e=_(N,"SECTION",{});var ce=C(e);f=_(ce,"H2",{});var ie=C(f);c=H(ie,i),ie.forEach(I),V=B(ce),l=_(ce,"DIV",{class:!0});var oe=C(l);r=_(oe,"DIV",{class:!0});var ke=C(r);D=_(ke,"DIV",{class:!0});var be=C(D);h=H(be,"Experience: "),n=H(be,t[0]),be.forEach(I),A=B(ke),o=_(ke,"DIV",{class:!0});var ve=C(o);u=H(ve,"Drachmas: "),p=H(ve,t[1]),ve.forEach(I),ke.forEach(I),q=B(oe),b=_(oe,"DIV",{class:!0});var me=C(b);E=_(me,"DIV",{});var fe=C(E);v=H(fe,"Player HP: "),Q=H(fe,t[5]),z=H(fe,"/"),x=H(fe,L),fe.forEach(I),te=B(me),G=_(me,"DIV",{});var de=C(G);S=H(de,"Player MP: "),M=H(de,t[6]),ae=H(de,"/"),W=H(de,$),de.forEach(I),X=B(me),K=_(me,"DIV",{});var ge=C(K);ue=H(ge,"Enemy HP: "),ne=H(ge,t[8]),m=H(ge,"/"),w=H(ge,d),ge.forEach(I),me.forEach(I),P=B(oe),T=_(oe,"DIV",{});var we=C(T);j=H(we,ee),we.forEach(I),oe.forEach(I),ce.forEach(I),R=B(N),Pe(F.$$.fragment,N),se=B(N),Pe(re.$$.fragment,N),N.forEach(I),this.h()},h(){g(D,"class","experience"),g(o,"class","drachmas"),g(r,"class","info-item svelte-ku2xkl"),g(b,"class","info-item svelte-ku2xkl"),g(l,"class","info svelte-ku2xkl"),g(s,"class","game-container svelte-ku2xkl")},m(y,N){Ee(y,s,N),a(s,e),a(e,f),a(f,c),a(e,V),a(e,l),a(l,r),a(r,D),a(D,h),a(D,n),a(r,A),a(r,o),a(o,u),a(o,p),a(l,q),a(l,b),a(b,E),a(E,v),a(E,Q),a(E,z),a(E,x),a(b,te),a(b,G),a(G,S),a(G,M),a(G,ae),a(G,W),a(b,X),a(b,K),a(K,ue),a(K,ne),a(K,m),a(K,w),a(l,P),a(l,T),a(T,j),a(s,R),Ae(F,s,null),a(s,se),Ae(re,s,null),Y=!0},p(y,N){(!Y||N[0]&8)&&i!==(i=y[3].name+"")&&le(c,i),(!Y||N[0]&1)&&le(n,y[0]),(!Y||N[0]&2)&&le(p,y[1]),(!Y||N[0]&32)&&le(Q,y[5]),(!Y||N[0]&16)&&L!==(L=y[4].hp+"")&&le(x,L),(!Y||N[0]&64)&&le(M,y[6]),(!Y||N[0]&16)&&$!==($=y[4].mp+"")&&le(W,$),(!Y||N[0]&256)&&le(ne,y[8]),(!Y||N[0]&128)&&d!==(d=y[7].hp+"")&&le(w,d),(!Y||N[0]&512)&&ee!==(ee=(y[9]||"The battle begins...")+"")&&le(j,ee);const ce={};N[0]&3088&&(ce.playerState={creature:y[4],isAttacking:y[10],isUsingSpecial:y[11]}),N[0]&12416&&(ce.enemyState={creature:y[7],isAttacking:y[12],isSpawning:y[13]}),F.$set(ce);const ie={};N[0]&16&&(ie.playerCreature=y[4]),N[0]&4&&(ie.chosenRelic=y[2]),re.$set(ie)},i(y){Y||(Ve(F.$$.fragment,y),Ve(re.$$.fragment,y),Y=!0)},o(y){Re(F.$$.fragment,y),Re(re.$$.fragment,y),Y=!1},d(y){y&&I(s),Ue(F),Ue(re)}}}function xe(t,s,e){let f=0,i=0,c=He[0],V=Me.filter(m=>m.stageId===c.id),l=V[0],r=Oe[0],D=!1,h=l.hp+r.hpMod,n=l.mp+r.mpMod,A=ze.filter(m=>m.stageId===c.id),o=A[Math.floor(Math.random()*A.length)],u=o.hp,p="",q=0,b=!1,E=!1,v=!1,Q=!1,z=null,L=null,x=null,te=null;const G=()=>{if(n!==l.mp+r.mpMod&&n+l.mpRegen+r.mpRegenMod<=l.mp+r.mpMod){e(6,n=n+l.mpRegen+r.mpRegenMod);return}e(6,n=l.mp+r.mpMod)},S=(m,d)=>{if(h-(o.attack-o.attack*m)*d<=0){e(9,p="Defeat!"),e(5,h=0);return}e(5,h=h-(o.attack-o.attack*m)*d)},M=(m,d,w)=>{try{const P=l.speed+r.speedMod;let T=(l.defense+r.defenseMod)/100,ee=o.critical/100,j=1,R=!1;if(o.attackType==="Magic"&&(T=0),o.speed<P?R=Math.random()>=.5:R=Math.random()>=.8,q>1&&!R&&!m&&(R=!0),!R&&m&&e(9,p="Enemy was too slow!"),!R&&!m){e(6,n=l.mp+r.mpMod),q+=1,K(d,w);return}d===l.attackName&&G(),R&&m&&e(9,p="Both abilities succeeded."),R&&!m&&e(9,p="Your summon was too slow!"),R&&(Math.random()<=ee&&(j=1.5),o.attackType==="Poison"&&j===1&&(j=1.5),S(T,j),e(12,v=!0),x=setTimeout(()=>e(12,v=!1),500))}catch(P){console.error(P)}},ae=(m,d,w,P,T)=>{T==="Lifesteal"&&w&&(h+m*d*.2>l.hp+r.hpMod?e(5,h=l.hp+r.hpMod):e(5,h=h+m*d*.2)),M(w,P,T)},$=(m,d,w,P,T)=>{m&&(h+d*w>l.hp+r.hpMod?e(5,h=l.hp+r.hpMod):e(5,h=h+d*w)),M(m,P,T)},W=(m,d,w,P,T,ee,j)=>{if(e(6,n=n-w),j!=="Heal"){if(u-(d-d*T)*P<=0&&m){e(8,u=0),e(9,p="Victory!"),e(0,f+=o.reward*2),e(1,i+=o.reward),e(10,b=!0),z=setTimeout(()=>e(10,b=!1),500),e(11,E=!0),L=setTimeout(()=>e(11,E=!1),500);return}m&&(e(8,u=u-(d-d*T)*P),e(10,b=!0),z=setTimeout(()=>e(10,b=!1),500),e(11,E=!0),L=setTimeout(()=>e(11,E=!1),500)),ae(d,P,m,ee,j);return}$(m,d,P,ee,j)},X=()=>{(h<=0||u<=0)&&(e(5,h=l.hp+r.hpMod),e(6,n=l.mp+r.mpMod),e(13,Q=!0),te=setTimeout(()=>e(13,Q=!1),500),e(7,o=A[Math.floor(Math.random()*A.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${Z+"/game/"+o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${Z+"/game/"+o.img.slice(0,-4)+"_attack.png"})`),e(8,u=o.hp),e(9,p=""))},K=(m,d)=>{try{const w=l.attack+r.attackMod,P=l.speed+r.speedMod,T=(l.critical+r.criticalMod)/100;let ee=l.special+r.specialMod,j=l.specialCost,R=o.defense/100,F=!1,se=1;if(Q)return;if(X(),d==="Magic"&&(R=0),P<o.speed?F=Math.random()>=.5:F=Math.random()>=.8,Math.random()<=T&&(se=1.5),d==="Poison"&&se===1&&(se=1.5),m===l.attackName){if(u-(w-w*R)*se<=0&&F){e(8,u=0),e(9,p="Victory!"),e(0,f+=o.reward*2),e(1,i+=o.reward),e(10,b=!0),z=setTimeout(()=>e(10,b=!1),500);return}F&&(e(8,u=u-(w-w*R)*se),e(10,b=!0),z=setTimeout(()=>e(10,b=!1),500)),M(F,m,d);return}n>=j?W(F,ee,j,se,R,m,d):e(9,p="Not enough MP!")}catch(w){console.error(w)}},ue=()=>{try{const m=o;e(5,h=0),X(),e(4,l=Me.find(d=>d.id===m.id)),e(5,h=l.hp+r.hpMod),e(6,n=l.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${Z+"/game/"+l.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${Z+"/game/"+l.img.slice(0,-4)+"_hurt.png"})`)}catch(m){console.error(m)}},ne=()=>{D&&(localStorage.setItem("drachmas",i),localStorage.setItem("playerExperience",f),localStorage.setItem("chosenRelicId",r.id))};return je(()=>{try{const m=localStorage.getItem("drachmas"),d=localStorage.getItem("playerExperience"),w=localStorage.getItem("chosenRelicId"),P=localStorage.getItem("curStageId");Be.set(!0),m&&e(1,i=parseInt(m)),d&&e(0,f=parseInt(d)),w&&e(2,r=Oe.find(T=>T.id===parseInt(w))),P&&e(3,c=He.find(T=>T.id===parseInt(P))),V=Me.filter(T=>T.stageId===c.id),e(4,l=V[0]),e(5,h=l.hp+r.hpMod),e(6,n=l.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${Z+"/game/"+l.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${Z+"/game/"+l.img.slice(0,-4)+"_hurt.png"})`),A=ze.filter(T=>T.stageId===c.id),e(7,o=A[Math.floor(Math.random()*A.length)]),e(8,u=o.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${Z+"/game/"+o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${Z+"/game/"+o.img.slice(0,-4)+"_attack.png"})`),D=!0}catch(m){console.error(m)}}),qe(()=>{Be.set(!1),clearTimeout(z),clearTimeout(L),clearTimeout(x),clearTimeout(te)}),t.$$.update=()=>{t.$$.dirty[0]&7&&ne()},[f,i,r,c,l,h,n,o,u,p,b,E,v,Q,K,ue]}class lt extends Se{constructor(s){super(),Te(this,s,xe,Ze,Ie,{},null,[-1,-1])}}export{lt as component};
