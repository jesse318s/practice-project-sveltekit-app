import{s as Le,d as he,e as Re,n as Ve,r as Oe,o as Ue,f as Ge}from"../chunks/scheduler.BoReh3vH.js";import{S as qe,i as Fe,e as y,t as D,s as S,c as M,a as w,b as R,d as j,f as N,y as ue,o as d,z as W,g as Ye,h as s,A as de,j as ae}from"../chunks/index.BklZDJd0.js";import{s as Ae,r as He}from"../chunks/relics.CGlwEWe2.js";import{i as ze}from"../chunks/store.Cn0GNUQE.js";import{g as Je}from"../chunks/entry.C5UIXO85.js";const Ee=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"}],Be=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50},{id:7,stageId:3,name:"Skeleton",img:"skeleton_creature_bow.png",reward:12,hp:100,attack:40,attackType:"Normal",speed:70,defense:20,critical:50}];function Ke(o){let n,e,V=o[2].name+"",z,B,E,t,l,X,f,k,A,p,v,C,se,b,q,P,g,J,Z,ne,K,L,re,pe,I,x,F,le,O,fe="Attack",ie,Y,ge="Special",me,Q,a,c,i,h,m,U,_,T,H,G,$,be="Mimic Summon",ke,ee,Pe="View Stats",_e,te,Se="Travel",ye,Ne;return{c(){n=y("div"),e=y("h2"),z=D(V),B=S(),E=y("div"),t=y("div"),l=D("Player HP: "),X=D(o[4]),f=S(),k=y("div"),A=D("Player MP: "),p=D(o[5]),v=S(),C=y("div"),se=D("Enemy HP: "),b=D(o[7]),q=S(),P=y("div"),g=y("img"),ne=S(),K=y("div"),L=y("div"),pe=S(),I=y("img"),le=S(),O=y("button"),O.textContent=fe,ie=S(),Y=y("button"),Y.textContent=ge,me=S(),Q=y("div"),a=D(o[8]),c=S(),i=y("div"),h=D("Experience: "),m=D(o[0]),U=S(),_=y("div"),T=D("Drachmas: "),H=D(o[1]),G=S(),$=y("button"),$.textContent=be,ke=S(),ee=y("button"),ee.textContent=Pe,_e=S(),te=y("button"),te.textContent=Se,this.h()},l(u){n=M(u,"DIV",{class:!0});var r=w(n);e=M(r,"H2",{});var je=w(e);z=R(je,V),je.forEach(j),B=N(r),E=M(r,"DIV",{class:!0});var ce=w(E);t=M(ce,"DIV",{});var Me=w(t);l=R(Me,"Player HP: "),X=R(Me,o[4]),Me.forEach(j),f=N(ce),k=M(ce,"DIV",{});var Ie=w(k);A=R(Ie,"Player MP: "),p=R(Ie,o[5]),Ie.forEach(j),v=N(ce),C=M(ce,"DIV",{});var Te=w(C);se=R(Te,"Enemy HP: "),b=R(Te,o[7]),Te.forEach(j),ce.forEach(j),q=N(r),P=M(r,"DIV",{class:!0});var oe=w(P);g=M(oe,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),ne=N(oe),K=M(oe,"DIV",{class:!0});var De=w(K);L=M(De,"DIV",{class:!0}),w(L).forEach(j),De.forEach(j),pe=N(oe),I=M(oe,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),oe.forEach(j),le=N(r),O=M(r,"BUTTON",{"data-svelte-h":!0}),ue(O)!=="svelte-ig8gg4"&&(O.textContent=fe),ie=N(r),Y=M(r,"BUTTON",{"data-svelte-h":!0}),ue(Y)!=="svelte-172d9ub"&&(Y.textContent=ge),me=N(r),Q=M(r,"DIV",{class:!0});var we=w(Q);a=R(we,o[8]),we.forEach(j),c=N(r),i=M(r,"DIV",{class:!0});var ve=w(i);h=R(ve,"Experience: "),m=R(ve,o[0]),ve.forEach(j),U=N(r),_=M(r,"DIV",{class:!0});var Ce=w(_);T=R(Ce,"Drachmas: "),H=R(Ce,o[1]),Ce.forEach(j),G=N(r),$=M(r,"BUTTON",{"data-svelte-h":!0}),ue($)!=="svelte-lzajz"&&($.textContent=be),ke=N(r),ee=M(r,"BUTTON",{"data-svelte-h":!0}),ue(ee)!=="svelte-z72cka"&&(ee.textContent=Pe),_e=N(r),te=M(r,"BUTTON",{"data-svelte-h":!0}),ue(te)!=="svelte-16av4zt"&&(te.textContent=Se),r.forEach(j),this.h()},h(){d(E,"class","stats svelte-1nsr9j6"),he(g.src,J=o[3].img)||d(g,"src",J),d(g,"width","128px"),d(g,"height","128px"),d(g,"alt",Z=o[3].name),d(g,"class","svelte-1nsr9j6"),W(g,"attack",o[9]),W(g,"hurt",o[11]),d(L,"class",re=Re(o[10]?o[3].specialEffect:"")+" svelte-1nsr9j6"),d(K,"class","special-effect-container svelte-1nsr9j6"),d(I,"class","enemy-creature svelte-1nsr9j6"),he(I.src,x=o[6].img)||d(I,"src",x),d(I,"width","128px"),d(I,"height","128px"),d(I,"alt",F=o[6].name),W(I,"enemy-attack",o[11]),W(I,"enemy-hurt",o[9]),d(P,"class","creatures svelte-1nsr9j6"),d(Q,"class","combat-alert svelte-1nsr9j6"),d(i,"class","experience svelte-1nsr9j6"),d(_,"class","drachmas svelte-1nsr9j6"),d(n,"class","game-container svelte-1nsr9j6")},m(u,r){Ye(u,n,r),s(n,e),s(e,z),s(n,B),s(n,E),s(E,t),s(t,l),s(t,X),s(E,f),s(E,k),s(k,A),s(k,p),s(E,v),s(E,C),s(C,se),s(C,b),s(n,q),s(n,P),s(P,g),s(P,ne),s(P,K),s(K,L),s(P,pe),s(P,I),s(n,le),s(n,O),s(n,ie),s(n,Y),s(n,me),s(n,Q),s(Q,a),s(n,c),s(n,i),s(i,h),s(i,m),s(n,U),s(n,_),s(_,T),s(_,H),s(n,G),s(n,$),s(n,ke),s(n,ee),s(n,_e),s(n,te),ye||(Ne=[de(O,"click",o[16]),de(Y,"click",o[17]),de($,"click",o[18]),de(ee,"click",o[19]),de(te,"click",o[20])],ye=!0)},p(u,r){r[0]&4&&V!==(V=u[2].name+"")&&ae(z,V),r[0]&16&&ae(X,u[4]),r[0]&32&&ae(p,u[5]),r[0]&128&&ae(b,u[7]),r[0]&8&&!he(g.src,J=u[3].img)&&d(g,"src",J),r[0]&8&&Z!==(Z=u[3].name)&&d(g,"alt",Z),r[0]&512&&W(g,"attack",u[9]),r[0]&2048&&W(g,"hurt",u[11]),r[0]&1032&&re!==(re=Re(u[10]?u[3].specialEffect:"")+" svelte-1nsr9j6")&&d(L,"class",re),r[0]&64&&!he(I.src,x=u[6].img)&&d(I,"src",x),r[0]&64&&F!==(F=u[6].name)&&d(I,"alt",F),r[0]&2048&&W(I,"enemy-attack",u[11]),r[0]&512&&W(I,"enemy-hurt",u[9]),r[0]&256&&ae(a,u[8]),r[0]&1&&ae(m,u[0]),r[0]&2&&ae(H,u[1])},i:Ve,o:Ve,d(u){u&&j(n),ye=!1,Oe(Ne)}}}function Qe(o,n,e){let V=0,z=0,B=Ae[0],E=Ee.filter(a=>a.stageId===B.id),t=E[0],l=He[0],X=!1,f=t.hp+l.hpMod,k=t.mp+l.mpMod,A=Be.filter(a=>a.stageId===B.id),p=A[Math.floor(Math.random()*A.length)],v=p.hp,C="",se=0,b=!1,q=!1,P=!1,g=null,J=null,Z=null;const ne=()=>{if(k!==t.mp+l.mpMod&&k+t.mpRegen+l.mpRegenMod<=t.mp+l.mpMod){e(5,k=k+t.mpRegen+l.mpRegenMod);return}e(5,k=t.mp+l.mpMod)},K=(a,c)=>{if(f-(p.attack-p.attack*a)*c<=0){e(8,C="Defeat!"),e(4,f=0);return}e(4,f=f-(p.attack-p.attack*a)*c)},L=(a,c,i)=>{try{const h=t.speed+l.speedMod;let m=(t.defense+l.defenseMod)/100,U=p.critical/100,_=1,T=!1;if(p.attackType==="Magic"&&(m=0),p.speed<h?T=Math.random()>=.5:T=Math.random()>=.8,se>1&&!T&&!a&&(T=!0),!T&&a&&e(8,C="Enemy was too slow!"),!T&&!a){e(5,k=t.mp+l.mpMod),se+=1,F(c,i);return}c===t.attackName&&ne(),T&&a&&e(8,C="Both abilities succeeded."),T&&!a&&e(8,C="Your summon was too slow!"),T&&(Math.random()<=U&&(_=1.5),p.attackType==="Poison"&&_===1&&(_=1.5),K(m,_),e(11,P=!0),Z=setTimeout(()=>e(11,P=!1),500))}catch(h){console.error(h)}},re=(a,c,i,h,m)=>{m==="Lifesteal"&&i&&(f+a*c*.2>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+a*c*.2)),L(i,h,m)},pe=(a,c,i,h,m)=>{a&&(f+c*i>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+c*i)),L(a,h,m)},I=(a,c,i,h,m,U,_)=>{if(e(5,k=k-i),_!=="Heal"){if(v-(c-c*m)*h<=0&&a){e(7,v=0),e(8,C="Victory!"),e(0,V+=p.reward*2),e(1,z+=p.reward),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500),e(10,q=!0),J=setTimeout(()=>e(10,q=!1),500);return}a&&(e(7,v=v-(c-c*m)*h),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500),e(10,q=!0),J=setTimeout(()=>e(10,q=!1),500)),re(c,h,a,U,_);return}pe(a,c,h,U,_)},x=()=>{(f<=0||v<=0)&&(e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),e(6,p=A[Math.floor(Math.random()*A.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_attack.png"})`),e(7,v=p.hp),e(8,C=""))},F=(a,c)=>{try{const i=t.attack+l.attackMod,h=t.speed+l.speedMod,m=(t.critical+l.criticalMod)/100;let U=t.special+l.specialMod,_=t.specialCost,T=p.defense/100,H=!1,G=1;if(x(),c==="Magic"&&(T=0),h<p.speed?H=Math.random()>=.5:H=Math.random()>=.8,Math.random()<=m&&(G=1.5),c==="Poison"&&G===1&&(G=1.5),a===t.attackName){if(v-(i-i*T)*G<=0&&H){e(7,v=0),e(8,C="Victory!"),e(0,V+=p.reward*2),e(1,z+=p.reward),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500);return}H&&(e(7,v=v-(i-i*T)*G),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500)),L(H,a,c);return}k>=_?I(H,U,_,G,T,a,c):e(8,C="Not enough MP!")}catch(i){console.error(i)}},le=()=>{try{const a=p;e(4,f=0),x(),e(3,t=Ee.find(c=>c.id===a.id)),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(a){console.error(a)}},O=()=>{try{const c=[{label:"Name",value:t.name},{label:"HP",value:t.hp+l.hpMod},{label:"Speed",value:t.speed+l.speedMod},{label:"Defense",value:t.defense+l.defenseMod},{label:"Critical",value:t.critical+l.criticalMod},{label:"MP",value:t.mp+l.mpMod},{label:"MP Regen",value:t.mpRegen+l.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+l.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+l.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(i=>`${i.label}: ${i.value}`).join(`
`);alert(c)}catch(a){console.error(a)}},fe=()=>{X&&(localStorage.setItem("drachmas",z),localStorage.setItem("playerExperience",V),localStorage.setItem("chosenRelicId",l.id))};Ue(()=>{try{const a=localStorage.getItem("drachmas"),c=localStorage.getItem("playerExperience"),i=localStorage.getItem("chosenRelicId"),h=localStorage.getItem("curStageId");ze.set(!0),a&&e(1,z=parseInt(a)),c&&e(0,V=parseInt(c)),i&&e(15,l=He.find(m=>m.id===parseInt(i))),h&&e(2,B=Ae.find(m=>m.id===parseInt(h))),E=Ee.filter(m=>m.stageId===B.id),e(3,t=E[0]),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),A=Be.filter(m=>m.stageId===B.id),e(6,p=A[Math.floor(Math.random()*A.length)]),e(7,v=p.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_attack.png"})`),X=!0}catch(a){console.error(a)}}),Ge(()=>{ze.set(!1),clearTimeout(g),clearTimeout(J),clearTimeout(Z)});const ie=()=>F(t.attackName,t.attackType),Y=()=>F(t.specialName,t.specialType),ge=()=>le(),me=()=>O(),Q=()=>{Je("/practice-project-sveltekit-app/game/world")};return o.$$.update=()=>{o.$$.dirty[0]&32771&&fe()},[V,z,B,t,f,k,p,v,C,b,q,P,F,le,O,l,ie,Y,ge,me,Q]}class et extends qe{constructor(n){super(),Fe(this,n,Qe,Ke,Le,{},null,[-1,-1])}}export{et as component};
