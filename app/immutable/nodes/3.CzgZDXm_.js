import{s as We,d as Ee,e as qe,n as Fe,r as Xe,o as Ze,f as xe}from"../chunks/scheduler.BoReh3vH.js";import{S as $e,i as et,e as y,t as C,s as S,c as M,a as B,b as E,d as j,f as N,y as Me,o as d,z as Z,g as tt,h as a,A as Ie,j as F}from"../chunks/index.BklZDJd0.js";import{s as Ye,r as Je}from"../chunks/relics.anhpFv9_.js";import{i as Ke}from"../chunks/store.Cn0GNUQE.js";import{b as V,g as at}from"../chunks/entry.BN7AZb1S.js";const Ae=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"}],Qe=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50},{id:7,stageId:3,name:"Skeleton",img:"skeleton_creature_bow.png",reward:12,hp:100,attack:40,attackType:"Normal",speed:70,defense:20,critical:50}];function st(c){let n,e,L=c[2].name+"",G,q,b,t,l,x,f,k=c[3].hp+"",A,p,g,D,$,w,O=c[3].mp+"",Q,Y,H,ce,oe,fe,J=c[6].hp+"",ne,ge,z,_,K,ee,me,W,X,pe,he,I,ie,s,o,m,h="Attack",u,v,P="Special",T,R,U,be,te,ve,Te,Pe,ae,Se,Ce,Ne,se,He="Mimic Summon",De,re,ze="View Stats",we,le,Be="Travel",Re,Le;return{c(){n=y("div"),e=y("h2"),G=C(L),q=S(),b=y("div"),t=y("div"),l=C("Player HP: "),x=C(c[4]),f=C("/"),A=C(k),p=S(),g=y("div"),D=C("Player MP: "),$=C(c[5]),w=C("/"),Q=C(O),Y=S(),H=y("div"),ce=C("Enemy HP: "),oe=C(c[7]),fe=C("/"),ne=C(J),ge=S(),z=y("div"),_=y("img"),me=S(),W=y("div"),X=y("div"),he=S(),I=y("img"),o=S(),m=y("button"),m.textContent=h,u=S(),v=y("button"),v.textContent=P,T=S(),R=y("div"),U=C(c[8]),be=S(),te=y("div"),ve=C("Experience: "),Te=C(c[0]),Pe=S(),ae=y("div"),Se=C("Drachmas: "),Ce=C(c[1]),Ne=S(),se=y("button"),se.textContent=He,De=S(),re=y("button"),re.textContent=ze,we=S(),le=y("button"),le.textContent=Be,this.h()},l(i){n=M(i,"DIV",{class:!0});var r=B(n);e=M(r,"H2",{});var Oe=B(e);G=E(Oe,L),Oe.forEach(j),q=N(r),b=M(r,"DIV",{class:!0});var ue=B(b);t=M(ue,"DIV",{});var ke=B(t);l=E(ke,"Player HP: "),x=E(ke,c[4]),f=E(ke,"/"),A=E(ke,k),ke.forEach(j),p=N(ue),g=M(ue,"DIV",{});var _e=B(g);D=E(_e,"Player MP: "),$=E(_e,c[5]),w=E(_e,"/"),Q=E(_e,O),_e.forEach(j),Y=N(ue),H=M(ue,"DIV",{});var ye=B(H);ce=E(ye,"Enemy HP: "),oe=E(ye,c[7]),fe=E(ye,"/"),ne=E(ye,J),ye.forEach(j),ue.forEach(j),ge=N(r),z=M(r,"DIV",{class:!0});var de=B(z);_=M(de,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),me=N(de),W=M(de,"DIV",{class:!0});var Ue=B(W);X=M(Ue,"DIV",{class:!0}),B(X).forEach(j),Ue.forEach(j),he=N(de),I=M(de,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),de.forEach(j),o=N(r),m=M(r,"BUTTON",{"data-svelte-h":!0}),Me(m)!=="svelte-ig8gg4"&&(m.textContent=h),u=N(r),v=M(r,"BUTTON",{"data-svelte-h":!0}),Me(v)!=="svelte-172d9ub"&&(v.textContent=P),T=N(r),R=M(r,"DIV",{class:!0});var Ge=B(R);U=E(Ge,c[8]),Ge.forEach(j),be=N(r),te=M(r,"DIV",{class:!0});var je=B(te);ve=E(je,"Experience: "),Te=E(je,c[0]),je.forEach(j),Pe=N(r),ae=M(r,"DIV",{class:!0});var Ve=B(ae);Se=E(Ve,"Drachmas: "),Ce=E(Ve,c[1]),Ve.forEach(j),Ne=N(r),se=M(r,"BUTTON",{"data-svelte-h":!0}),Me(se)!=="svelte-lzajz"&&(se.textContent=He),De=N(r),re=M(r,"BUTTON",{"data-svelte-h":!0}),Me(re)!=="svelte-z72cka"&&(re.textContent=ze),we=N(r),le=M(r,"BUTTON",{"data-svelte-h":!0}),Me(le)!=="svelte-1hg8zdr"&&(le.textContent=Be),r.forEach(j),this.h()},h(){d(b,"class","stats svelte-1nsr9j6"),Ee(_.src,K=V+"/game/"+c[3].img)||d(_,"src",K),d(_,"width","128px"),d(_,"height","128px"),d(_,"alt",ee=c[3].name),d(_,"class","svelte-1nsr9j6"),Z(_,"attack",c[9]),Z(_,"hurt",c[11]),d(X,"class",pe=qe(c[10]?c[3].specialEffect:"")+" svelte-1nsr9j6"),d(W,"class","special-effect-container svelte-1nsr9j6"),d(I,"class","enemy-creature svelte-1nsr9j6"),Ee(I.src,ie=V+"/game/"+c[6].img)||d(I,"src",ie),d(I,"width","128px"),d(I,"height","128px"),d(I,"alt",s=c[6].name),Z(I,"enemy-attack",c[11]),Z(I,"enemy-hurt",c[9]),d(z,"class","creatures svelte-1nsr9j6"),d(R,"class","combat-alert svelte-1nsr9j6"),d(te,"class","experience svelte-1nsr9j6"),d(ae,"class","drachmas svelte-1nsr9j6"),d(n,"class","game-container svelte-1nsr9j6")},m(i,r){tt(i,n,r),a(n,e),a(e,G),a(n,q),a(n,b),a(b,t),a(t,l),a(t,x),a(t,f),a(t,A),a(b,p),a(b,g),a(g,D),a(g,$),a(g,w),a(g,Q),a(b,Y),a(b,H),a(H,ce),a(H,oe),a(H,fe),a(H,ne),a(n,ge),a(n,z),a(z,_),a(z,me),a(z,W),a(W,X),a(z,he),a(z,I),a(n,o),a(n,m),a(n,u),a(n,v),a(n,T),a(n,R),a(R,U),a(n,be),a(n,te),a(te,ve),a(te,Te),a(n,Pe),a(n,ae),a(ae,Se),a(ae,Ce),a(n,Ne),a(n,se),a(n,De),a(n,re),a(n,we),a(n,le),Re||(Le=[Ie(m,"click",c[16]),Ie(v,"click",c[17]),Ie(se,"click",c[18]),Ie(re,"click",c[19]),Ie(le,"click",c[20])],Re=!0)},p(i,r){r[0]&4&&L!==(L=i[2].name+"")&&F(G,L),r[0]&16&&F(x,i[4]),r[0]&8&&k!==(k=i[3].hp+"")&&F(A,k),r[0]&32&&F($,i[5]),r[0]&8&&O!==(O=i[3].mp+"")&&F(Q,O),r[0]&128&&F(oe,i[7]),r[0]&64&&J!==(J=i[6].hp+"")&&F(ne,J),r[0]&8&&!Ee(_.src,K=V+"/game/"+i[3].img)&&d(_,"src",K),r[0]&8&&ee!==(ee=i[3].name)&&d(_,"alt",ee),r[0]&512&&Z(_,"attack",i[9]),r[0]&2048&&Z(_,"hurt",i[11]),r[0]&1032&&pe!==(pe=qe(i[10]?i[3].specialEffect:"")+" svelte-1nsr9j6")&&d(X,"class",pe),r[0]&64&&!Ee(I.src,ie=V+"/game/"+i[6].img)&&d(I,"src",ie),r[0]&64&&s!==(s=i[6].name)&&d(I,"alt",s),r[0]&2048&&Z(I,"enemy-attack",i[11]),r[0]&512&&Z(I,"enemy-hurt",i[9]),r[0]&256&&F(U,i[8]),r[0]&1&&F(Te,i[0]),r[0]&2&&F(Ce,i[1])},i:Fe,o:Fe,d(i){i&&j(n),Re=!1,Xe(Le)}}}function rt(c,n,e){let L=0,G=0,q=Ye[0],b=Ae.filter(s=>s.stageId===q.id),t=b[0],l=Je[0],x=!1,f=t.hp+l.hpMod,k=t.mp+l.mpMod,A=Qe.filter(s=>s.stageId===q.id),p=A[Math.floor(Math.random()*A.length)],g=p.hp,D="",$=0,w=!1,O=!1,Q=!1,Y=null,H=null,ce=null;const oe=()=>{if(k!==t.mp+l.mpMod&&k+t.mpRegen+l.mpRegenMod<=t.mp+l.mpMod){e(5,k=k+t.mpRegen+l.mpRegenMod);return}e(5,k=t.mp+l.mpMod)},fe=(s,o)=>{if(f-(p.attack-p.attack*s)*o<=0){e(8,D="Defeat!"),e(4,f=0);return}e(4,f=f-(p.attack-p.attack*s)*o)},J=(s,o,m)=>{try{const h=t.speed+l.speedMod;let u=(t.defense+l.defenseMod)/100,v=p.critical/100,P=1,T=!1;if(p.attackType==="Magic"&&(u=0),p.speed<h?T=Math.random()>=.5:T=Math.random()>=.8,$>1&&!T&&!s&&(T=!0),!T&&s&&e(8,D="Enemy was too slow!"),!T&&!s){e(5,k=t.mp+l.mpMod),$+=1,K(o,m);return}o===t.attackName&&oe(),T&&s&&e(8,D="Both abilities succeeded."),T&&!s&&e(8,D="Your summon was too slow!"),T&&(Math.random()<=v&&(P=1.5),p.attackType==="Poison"&&P===1&&(P=1.5),fe(u,P),e(11,Q=!0),ce=setTimeout(()=>e(11,Q=!1),500))}catch(h){console.error(h)}},ne=(s,o,m,h,u)=>{u==="Lifesteal"&&m&&(f+s*o*.2>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+s*o*.2)),J(m,h,u)},ge=(s,o,m,h,u)=>{s&&(f+o*m>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+o*m)),J(s,h,u)},z=(s,o,m,h,u,v,P)=>{if(e(5,k=k-m),P!=="Heal"){if(g-(o-o*u)*h<=0&&s){e(7,g=0),e(8,D="Victory!"),e(0,L+=p.reward*2),e(1,G+=p.reward),e(9,w=!0),Y=setTimeout(()=>e(9,w=!1),500),e(10,O=!0),H=setTimeout(()=>e(10,O=!1),500);return}s&&(e(7,g=g-(o-o*u)*h),e(9,w=!0),Y=setTimeout(()=>e(9,w=!1),500),e(10,O=!0),H=setTimeout(()=>e(10,O=!1),500)),ne(o,h,s,v,P);return}ge(s,o,h,v,P)},_=()=>{(f<=0||g<=0)&&(e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),e(6,p=A[Math.floor(Math.random()*A.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${V+"/game/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${V+"/game/"+p.img.slice(0,-4)+"_attack.png"})`),e(7,g=p.hp),e(8,D=""))},K=(s,o)=>{try{const m=t.attack+l.attackMod,h=t.speed+l.speedMod,u=(t.critical+l.criticalMod)/100;let v=t.special+l.specialMod,P=t.specialCost,T=p.defense/100,R=!1,U=1;if(_(),o==="Magic"&&(T=0),h<p.speed?R=Math.random()>=.5:R=Math.random()>=.8,Math.random()<=u&&(U=1.5),o==="Poison"&&U===1&&(U=1.5),s===t.attackName){if(g-(m-m*T)*U<=0&&R){e(7,g=0),e(8,D="Victory!"),e(0,L+=p.reward*2),e(1,G+=p.reward),e(9,w=!0),Y=setTimeout(()=>e(9,w=!1),500);return}R&&(e(7,g=g-(m-m*T)*U),e(9,w=!0),Y=setTimeout(()=>e(9,w=!1),500)),J(R,s,o);return}k>=P?z(R,v,P,U,T,s,o):e(8,D="Not enough MP!")}catch(m){console.error(m)}},ee=()=>{try{const s=p;e(4,f=0),_(),e(3,t=Ae.find(o=>o.id===s.id)),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${V+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${V+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(s){console.error(s)}},me=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+l.hpMod},{label:"Speed",value:t.speed+l.speedMod},{label:"Defense",value:t.defense+l.defenseMod},{label:"Critical",value:t.critical+l.criticalMod},{label:"MP",value:t.mp+l.mpMod},{label:"MP Regen",value:t.mpRegen+l.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+l.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+l.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(m=>`${m.label}: ${m.value}`).join(`
`);alert(o)}catch(s){console.error(s)}},W=()=>{x&&(localStorage.setItem("drachmas",G),localStorage.setItem("playerExperience",L),localStorage.setItem("chosenRelicId",l.id))};Ze(()=>{try{const s=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),m=localStorage.getItem("chosenRelicId"),h=localStorage.getItem("curStageId");Ke.set(!0),s&&e(1,G=parseInt(s)),o&&e(0,L=parseInt(o)),m&&e(15,l=Je.find(u=>u.id===parseInt(m))),h&&e(2,q=Ye.find(u=>u.id===parseInt(h))),b=Ae.filter(u=>u.stageId===q.id),e(3,t=b[0]),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${V+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${V+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),A=Qe.filter(u=>u.stageId===q.id),e(6,p=A[Math.floor(Math.random()*A.length)]),e(7,g=p.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${V+"/game/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${V+"/game/"+p.img.slice(0,-4)+"_attack.png"})`),x=!0}catch(s){console.error(s)}}),xe(()=>{Ke.set(!1),clearTimeout(Y),clearTimeout(H),clearTimeout(ce)});const X=()=>K(t.attackName,t.attackType),pe=()=>K(t.specialName,t.specialType),he=()=>ee(),I=()=>me(),ie=()=>{at(V+"/game/world")};return c.$$.update=()=>{c.$$.dirty[0]&32771&&W()},[L,G,q,t,f,k,p,g,D,w,O,Q,K,ee,me,l,X,pe,he,I,ie]}class pt extends $e{constructor(n){super(),et(this,n,rt,st,We,{},null,[-1,-1])}}export{pt as component};
