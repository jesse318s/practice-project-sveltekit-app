import{s as Ee,d as ue,e as ge,n as Me,r as Ce,o as Te,f as Ie}from"../chunks/scheduler.BoReh3vH.js";import{S as ve,i as De,e as T,t as q,s as G,c as I,a as R,b as V,d as w,f as z,y as ye,o as i,z as O,g as Pe,h as t,A as ke,j as $}from"../chunks/index.DhL7nboW.js";import{i as _e}from"../chunks/store.BxR7W1V8.js";const we=[{id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",price:50,hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special_effect_2"}],be=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],ae=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function qe(c){let m,e,N,U,s,n,p,E,J,l,g,v,j,D,C,k,S,Y,L,B,K,Z,M,Q,W,ee,P,re="Attack",te,a,o="Special Attack",d,u,_,A,h,y,b,H,F,ce,se,le,de;return{c(){m=T("div"),e=T("div"),N=T("div"),U=q("Player HP: "),s=q(c[2]),n=G(),p=T("div"),E=q("Player MP: "),J=q(c[3]),l=G(),g=T("div"),v=q("Enemy HP: "),j=q(c[5]),D=G(),C=T("div"),k=T("img"),Y=G(),L=T("div"),B=T("div"),Z=G(),M=T("img"),ee=G(),P=T("button"),P.textContent=re,te=G(),a=T("button"),a.textContent=o,d=G(),u=T("div"),_=q(c[6]),A=G(),h=T("div"),y=q("Experience: "),b=q(c[0]),H=G(),F=T("div"),ce=q("Drachmas: "),se=q(c[1]),this.h()},l(f){m=I(f,"DIV",{class:!0});var r=R(m);e=I(r,"DIV",{class:!0});var X=R(e);N=I(X,"DIV",{});var oe=R(N);U=V(oe,"Player HP: "),s=V(oe,c[2]),oe.forEach(w),n=z(X),p=I(X,"DIV",{});var ne=R(p);E=V(ne,"Player MP: "),J=V(ne,c[3]),ne.forEach(w),l=z(X),g=I(X,"DIV",{});var ie=R(g);v=V(ie,"Enemy HP: "),j=V(ie,c[5]),ie.forEach(w),X.forEach(w),D=z(r),C=I(r,"DIV",{class:!0});var x=R(C);k=I(x,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),Y=z(x),L=I(x,"DIV",{class:!0});var fe=R(L);B=I(fe,"DIV",{class:!0}),R(B).forEach(w),fe.forEach(w),Z=z(x),M=I(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(w),ee=z(r),P=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(P)!=="svelte-ig8gg4"&&(P.textContent=re),te=z(r),a=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(a)!=="svelte-11zl5of"&&(a.textContent=o),d=z(r),u=I(r,"DIV",{class:!0});var he=R(u);_=V(he,c[6]),he.forEach(w),A=z(r),h=I(r,"DIV",{class:!0});var me=R(h);y=V(me,"Experience: "),b=V(me,c[0]),me.forEach(w),H=z(r),F=I(r,"DIV",{class:!0});var pe=R(F);ce=V(pe,"Drachmas: "),se=V(pe,c[1]),pe.forEach(w),r.forEach(w),this.h()},h(){i(e,"class","stats svelte-pyqc25"),ue(k.src,S=c[10].img)||i(k,"src",S),i(k,"alt",c[10].name),i(k,"width","128px"),i(k,"height","128px"),i(k,"class","svelte-pyqc25"),O(k,"attack",c[7]),O(k,"hurt",c[9]),i(B,"class",K=ge(c[8]?c[10].specialEffect:"")+" svelte-pyqc25"),i(L,"class","special-effect-container svelte-pyqc25"),i(M,"class","enemy-creature svelte-pyqc25"),ue(M.src,Q=c[4].img)||i(M,"src",Q),i(M,"alt",W=c[4].name),i(M,"width","128px"),i(M,"height","128px"),O(M,"enemy-attack",c[9]),O(M,"enemy-hurt",c[7]),i(C,"class","creatures svelte-pyqc25"),i(P,"class","svelte-pyqc25"),i(a,"class","svelte-pyqc25"),i(u,"class","combat-alert svelte-pyqc25"),i(h,"class","experience svelte-pyqc25"),i(F,"class","drachmas svelte-pyqc25"),i(m,"class","game-container svelte-pyqc25")},m(f,r){Pe(f,m,r),t(m,e),t(e,N),t(N,U),t(N,s),t(e,n),t(e,p),t(p,E),t(p,J),t(e,l),t(e,g),t(g,v),t(g,j),t(m,D),t(m,C),t(C,k),t(C,Y),t(C,L),t(L,B),t(C,Z),t(C,M),t(m,ee),t(m,P),t(m,te),t(m,a),t(m,d),t(m,u),t(u,_),t(m,A),t(m,h),t(h,y),t(h,b),t(m,H),t(m,F),t(F,ce),t(F,se),le||(de=[ke(P,"click",c[12]),ke(a,"click",c[13])],le=!0)},p(f,[r]){r&4&&$(s,f[2]),r&8&&$(J,f[3]),r&32&&$(j,f[5]),r&128&&O(k,"attack",f[7]),r&512&&O(k,"hurt",f[9]),r&256&&K!==(K=ge(f[8]?f[10].specialEffect:"")+" svelte-pyqc25")&&i(B,"class",K),r&16&&!ue(M.src,Q=f[4].img)&&i(M,"src",Q),r&16&&W!==(W=f[4].name)&&i(M,"alt",W),r&512&&O(M,"enemy-attack",f[9]),r&128&&O(M,"enemy-hurt",f[7]),r&64&&$(_,f[6]),r&1&&$(b,f[0]),r&2&&$(se,f[1])},i:Me,o:Me,d(f){f&&w(m),le=!1,Ce(de)}}}function Re(c,m,e){let N=0,U=0,s=we[0],n=be[0],p=s.hp+n.hpMod,E=s.mp+n.mpMod,J=E,l=ae[Math.floor(Math.random()*ae.length)],g=l.hp,v="",j=0,D=!1,C=!1,k=!1,S=null,Y=null,L=null;const B=()=>{if(E!==s.mp+n.mpMod&&E+s.mpRegen+n.mpRegenMod<=s.mp+n.mpMod){e(3,E=E+s.mpRegen+n.mpRegenMod);return}e(3,E=s.mp+n.mpMod)},K=(a,o)=>{if(p-(l.attack-l.attack*a)*o<=0){e(6,v="Defeat!"),e(2,p=0);return}e(2,p=p-(l.attack-l.attack*a)*o)},Z=(a,o,d)=>{try{const u=s.speed+n.speedMod;let _=(s.defense+n.defenseMod)/100,A=l.critical/100,h=1,y=!1;if(l.attackType==="Magic"&&(_=0),l.speed<u?y=Math.random()>=.5:y=Math.random()>=.8,j>1&&!y&&!a&&(y=!0),!y&&a&&e(6,v="Enemy was too slow!"),!y&&!a){e(3,E=J),j+=1,P(o,d);return}o===s.attackName&&B(),y&&a&&e(6,v="Both abilities succeeded."),y&&!a&&e(6,v="Your summon was too slow!"),y&&(Math.random()<=A&&(h=1.5),l.attackType==="Poison"&&h===1&&(h=1.5),K(_,h),e(9,k=!0),L=setTimeout(()=>e(9,k=!1),500))}catch(u){console.error(u)}},M=(a,o,d,u,_)=>{_==="Lifesteal"&&d&&(p+a*o*.2>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+a*o*.2)),Z(d,u,_)},Q=(a,o,d,u,_)=>{a&&(p+o*d>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+o*d)),Z(a,u,_)},W=(a,o,d,u,_,A,h)=>{if(e(3,E=E-d),h!=="Heal"){if(g-(o-o*_)*u<=0&&a){e(5,g=0),e(6,v="Victory!"),e(0,N+=l.reward*2),e(1,U+=l.reward),e(7,D=!0),S=setTimeout(()=>e(7,D=!1),500),e(8,C=!0),Y=setTimeout(()=>e(8,C=!1),500);return}a&&(e(5,g=g-(o-o*_)*u),e(7,D=!0),S=setTimeout(()=>e(7,D=!1),500),e(8,C=!0),Y=setTimeout(()=>e(8,C=!1),500)),M(o,u,a,A,h);return}Q(a,o,u,A,h)},ee=()=>{(p<=0||g<=0)&&(e(2,p=s.hp+n.hpMod),e(3,E=s.mp+n.mpMod),e(4,l=ae[Math.floor(Math.random()*ae.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${l.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${l.img.slice(0,-4)+"_attack.png"})`),e(5,g=l.hp),e(6,v=""))},P=(a,o)=>{try{const d=s.attack+n.attackMod,u=s.speed+n.speedMod,_=(s.critical+n.criticalMod)/100;let A=s.special+n.specialMod,h=s.specialCost,y=l.defense/100,b=!1,H=1;if(ee(),o==="Magic"&&(y=0),u<l.speed?b=Math.random()>=.5:b=Math.random()>=.8,Math.random()<=_&&(H=1.5),o==="Poison"&&H===1&&(H=1.5),a===s.attackName){if(g-(d-d*y)*H<=0&&b){e(5,g=0),e(6,v="Victory!"),e(0,N+=l.reward*2),e(1,U+=l.reward),e(7,D=!0),S=setTimeout(()=>e(7,D=!1),500);return}b&&(e(5,g=g-(d-d*y)*H),e(7,D=!0),S=setTimeout(()=>e(7,D=!1),500)),Z(b,a,o);return}E>=h?W(b,A,h,H,y,a,o):e(6,v="Not enough MP!")}catch(d){console.error(d)}};return Te(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${s.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${l.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${l.img.slice(0,-4)+"_attack.png"})`),_e.set(!0)}),Ie(()=>{_e.set(!1),clearTimeout(S),clearTimeout(Y),clearTimeout(L)}),[N,U,p,E,l,g,v,D,C,k,s,P,()=>P(s.attackName,s.attackType),()=>P(s.specialName,s.specialType)]}class He extends ve{constructor(m){super(),De(this,m,Re,qe,Ee,{})}}export{He as component};
