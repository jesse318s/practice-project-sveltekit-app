import{s as Qe,d as Te,e as Ge,n as qe,r as We,o as Xe,f as Ze}from"../chunks/scheduler.BoReh3vH.js";import{S as xe,i as $e,e as y,t as T,s as S,c as M,a as z,b as C,d as R,f as N,y as ye,o as d,z as X,g as et,h as a,A as Me,j as q}from"../chunks/index.BklZDJd0.js";import{s as Fe,r as Ye}from"../chunks/relics.CGlwEWe2.js";import{i as Je}from"../chunks/store.Cn0GNUQE.js";import{g as tt}from"../chunks/entry.D_iZdi8c.js";const Ve=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"}],Ke=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50},{id:7,stageId:3,name:"Skeleton",img:"skeleton_creature_bow.png",reward:12,hp:100,attack:40,attackType:"Normal",speed:70,defense:20,critical:50}];function at(c){let p,e,B=c[2].name+"",U,G,E,t,l,Z,f,k=c[3].hp+"",V,i,g,j,x,D,L=c[3].mp+"",K,F,A,le,ce,de,Y=c[6].hp+"",oe,fe,H,_,J,$,pe,Q,W,ne,ge,I,ie,s,o,n,h="Attack",u,b,P="Special",v,w,O,Ce,ee,Ee,Ie,be,te,Pe,ve,Se,ae,Ae="Mimic Summon",Ne,se,He="View Stats",je,re,ze="Travel",De,Be;return{c(){p=y("div"),e=y("h2"),U=T(B),G=S(),E=y("div"),t=y("div"),l=T("Player HP: "),Z=T(c[4]),f=T("/"),V=T(k),i=S(),g=y("div"),j=T("Player MP: "),x=T(c[5]),D=T("/"),K=T(L),F=S(),A=y("div"),le=T("Enemy HP: "),ce=T(c[7]),de=T("/"),oe=T(Y),fe=S(),H=y("div"),_=y("img"),pe=S(),Q=y("div"),W=y("div"),ge=S(),I=y("img"),o=S(),n=y("button"),n.textContent=h,u=S(),b=y("button"),b.textContent=P,v=S(),w=y("div"),O=T(c[8]),Ce=S(),ee=y("div"),Ee=T("Experience: "),Ie=T(c[0]),be=S(),te=y("div"),Pe=T("Drachmas: "),ve=T(c[1]),Se=S(),ae=y("button"),ae.textContent=Ae,Ne=S(),se=y("button"),se.textContent=He,je=S(),re=y("button"),re.textContent=ze,this.h()},l(m){p=M(m,"DIV",{class:!0});var r=z(p);e=M(r,"H2",{});var Le=z(e);U=C(Le,B),Le.forEach(R),G=N(r),E=M(r,"DIV",{class:!0});var me=z(E);t=M(me,"DIV",{});var he=z(t);l=C(he,"Player HP: "),Z=C(he,c[4]),f=C(he,"/"),V=C(he,k),he.forEach(R),i=N(me),g=M(me,"DIV",{});var ke=z(g);j=C(ke,"Player MP: "),x=C(ke,c[5]),D=C(ke,"/"),K=C(ke,L),ke.forEach(R),F=N(me),A=M(me,"DIV",{});var _e=z(A);le=C(_e,"Enemy HP: "),ce=C(_e,c[7]),de=C(_e,"/"),oe=C(_e,Y),_e.forEach(R),me.forEach(R),fe=N(r),H=M(r,"DIV",{class:!0});var ue=z(H);_=M(ue,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),pe=N(ue),Q=M(ue,"DIV",{class:!0});var Oe=z(Q);W=M(Oe,"DIV",{class:!0}),z(W).forEach(R),Oe.forEach(R),ge=N(ue),I=M(ue,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),ue.forEach(R),o=N(r),n=M(r,"BUTTON",{"data-svelte-h":!0}),ye(n)!=="svelte-ig8gg4"&&(n.textContent=h),u=N(r),b=M(r,"BUTTON",{"data-svelte-h":!0}),ye(b)!=="svelte-172d9ub"&&(b.textContent=P),v=N(r),w=M(r,"DIV",{class:!0});var Ue=z(w);O=C(Ue,c[8]),Ue.forEach(R),Ce=N(r),ee=M(r,"DIV",{class:!0});var we=z(ee);Ee=C(we,"Experience: "),Ie=C(we,c[0]),we.forEach(R),be=N(r),te=M(r,"DIV",{class:!0});var Re=z(te);Pe=C(Re,"Drachmas: "),ve=C(Re,c[1]),Re.forEach(R),Se=N(r),ae=M(r,"BUTTON",{"data-svelte-h":!0}),ye(ae)!=="svelte-lzajz"&&(ae.textContent=Ae),Ne=N(r),se=M(r,"BUTTON",{"data-svelte-h":!0}),ye(se)!=="svelte-z72cka"&&(se.textContent=He),je=N(r),re=M(r,"BUTTON",{"data-svelte-h":!0}),ye(re)!=="svelte-16av4zt"&&(re.textContent=ze),r.forEach(R),this.h()},h(){d(E,"class","stats svelte-1nsr9j6"),Te(_.src,J=c[3].img)||d(_,"src",J),d(_,"width","128px"),d(_,"height","128px"),d(_,"alt",$=c[3].name),d(_,"class","svelte-1nsr9j6"),X(_,"attack",c[9]),X(_,"hurt",c[11]),d(W,"class",ne=Ge(c[10]?c[3].specialEffect:"")+" svelte-1nsr9j6"),d(Q,"class","special-effect-container svelte-1nsr9j6"),d(I,"class","enemy-creature svelte-1nsr9j6"),Te(I.src,ie=c[6].img)||d(I,"src",ie),d(I,"width","128px"),d(I,"height","128px"),d(I,"alt",s=c[6].name),X(I,"enemy-attack",c[11]),X(I,"enemy-hurt",c[9]),d(H,"class","creatures svelte-1nsr9j6"),d(w,"class","combat-alert svelte-1nsr9j6"),d(ee,"class","experience svelte-1nsr9j6"),d(te,"class","drachmas svelte-1nsr9j6"),d(p,"class","game-container svelte-1nsr9j6")},m(m,r){et(m,p,r),a(p,e),a(e,U),a(p,G),a(p,E),a(E,t),a(t,l),a(t,Z),a(t,f),a(t,V),a(E,i),a(E,g),a(g,j),a(g,x),a(g,D),a(g,K),a(E,F),a(E,A),a(A,le),a(A,ce),a(A,de),a(A,oe),a(p,fe),a(p,H),a(H,_),a(H,pe),a(H,Q),a(Q,W),a(H,ge),a(H,I),a(p,o),a(p,n),a(p,u),a(p,b),a(p,v),a(p,w),a(w,O),a(p,Ce),a(p,ee),a(ee,Ee),a(ee,Ie),a(p,be),a(p,te),a(te,Pe),a(te,ve),a(p,Se),a(p,ae),a(p,Ne),a(p,se),a(p,je),a(p,re),De||(Be=[Me(n,"click",c[16]),Me(b,"click",c[17]),Me(ae,"click",c[18]),Me(se,"click",c[19]),Me(re,"click",c[20])],De=!0)},p(m,r){r[0]&4&&B!==(B=m[2].name+"")&&q(U,B),r[0]&16&&q(Z,m[4]),r[0]&8&&k!==(k=m[3].hp+"")&&q(V,k),r[0]&32&&q(x,m[5]),r[0]&8&&L!==(L=m[3].mp+"")&&q(K,L),r[0]&128&&q(ce,m[7]),r[0]&64&&Y!==(Y=m[6].hp+"")&&q(oe,Y),r[0]&8&&!Te(_.src,J=m[3].img)&&d(_,"src",J),r[0]&8&&$!==($=m[3].name)&&d(_,"alt",$),r[0]&512&&X(_,"attack",m[9]),r[0]&2048&&X(_,"hurt",m[11]),r[0]&1032&&ne!==(ne=Ge(m[10]?m[3].specialEffect:"")+" svelte-1nsr9j6")&&d(W,"class",ne),r[0]&64&&!Te(I.src,ie=m[6].img)&&d(I,"src",ie),r[0]&64&&s!==(s=m[6].name)&&d(I,"alt",s),r[0]&2048&&X(I,"enemy-attack",m[11]),r[0]&512&&X(I,"enemy-hurt",m[9]),r[0]&256&&q(O,m[8]),r[0]&1&&q(Ie,m[0]),r[0]&2&&q(ve,m[1])},i:qe,o:qe,d(m){m&&R(p),De=!1,We(Be)}}}function st(c,p,e){let B=0,U=0,G=Fe[0],E=Ve.filter(s=>s.stageId===G.id),t=E[0],l=Ye[0],Z=!1,f=t.hp+l.hpMod,k=t.mp+l.mpMod,V=Ke.filter(s=>s.stageId===G.id),i=V[Math.floor(Math.random()*V.length)],g=i.hp,j="",x=0,D=!1,L=!1,K=!1,F=null,A=null,le=null;const ce=()=>{if(k!==t.mp+l.mpMod&&k+t.mpRegen+l.mpRegenMod<=t.mp+l.mpMod){e(5,k=k+t.mpRegen+l.mpRegenMod);return}e(5,k=t.mp+l.mpMod)},de=(s,o)=>{if(f-(i.attack-i.attack*s)*o<=0){e(8,j="Defeat!"),e(4,f=0);return}e(4,f=f-(i.attack-i.attack*s)*o)},Y=(s,o,n)=>{try{const h=t.speed+l.speedMod;let u=(t.defense+l.defenseMod)/100,b=i.critical/100,P=1,v=!1;if(i.attackType==="Magic"&&(u=0),i.speed<h?v=Math.random()>=.5:v=Math.random()>=.8,x>1&&!v&&!s&&(v=!0),!v&&s&&e(8,j="Enemy was too slow!"),!v&&!s){e(5,k=t.mp+l.mpMod),x+=1,J(o,n);return}o===t.attackName&&ce(),v&&s&&e(8,j="Both abilities succeeded."),v&&!s&&e(8,j="Your summon was too slow!"),v&&(Math.random()<=b&&(P=1.5),i.attackType==="Poison"&&P===1&&(P=1.5),de(u,P),e(11,K=!0),le=setTimeout(()=>e(11,K=!1),500))}catch(h){console.error(h)}},oe=(s,o,n,h,u)=>{u==="Lifesteal"&&n&&(f+s*o*.2>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+s*o*.2)),Y(n,h,u)},fe=(s,o,n,h,u)=>{s&&(f+o*n>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+o*n)),Y(s,h,u)},H=(s,o,n,h,u,b,P)=>{if(e(5,k=k-n),P!=="Heal"){if(g-(o-o*u)*h<=0&&s){e(7,g=0),e(8,j="Victory!"),e(0,B+=i.reward*2),e(1,U+=i.reward),e(9,D=!0),F=setTimeout(()=>e(9,D=!1),500),e(10,L=!0),A=setTimeout(()=>e(10,L=!1),500);return}s&&(e(7,g=g-(o-o*u)*h),e(9,D=!0),F=setTimeout(()=>e(9,D=!1),500),e(10,L=!0),A=setTimeout(()=>e(10,L=!1),500)),oe(o,h,s,b,P);return}fe(s,o,h,b,P)},_=()=>{(f<=0||g<=0)&&(e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),e(6,i=V[Math.floor(Math.random()*V.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+i.img.slice(0,-4)+"_attack.png"})`),e(7,g=i.hp),e(8,j=""))},J=(s,o)=>{try{const n=t.attack+l.attackMod,h=t.speed+l.speedMod,u=(t.critical+l.criticalMod)/100;let b=t.special+l.specialMod,P=t.specialCost,v=i.defense/100,w=!1,O=1;if(_(),o==="Magic"&&(v=0),h<i.speed?w=Math.random()>=.5:w=Math.random()>=.8,Math.random()<=u&&(O=1.5),o==="Poison"&&O===1&&(O=1.5),s===t.attackName){if(g-(n-n*v)*O<=0&&w){e(7,g=0),e(8,j="Victory!"),e(0,B+=i.reward*2),e(1,U+=i.reward),e(9,D=!0),F=setTimeout(()=>e(9,D=!1),500);return}w&&(e(7,g=g-(n-n*v)*O),e(9,D=!0),F=setTimeout(()=>e(9,D=!1),500)),Y(w,s,o);return}k>=P?H(w,b,P,O,v,s,o):e(8,j="Not enough MP!")}catch(n){console.error(n)}},$=()=>{try{const s=i;e(4,f=0),_(),e(3,t=Ve.find(o=>o.id===s.id)),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(s){console.error(s)}},pe=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+l.hpMod},{label:"Speed",value:t.speed+l.speedMod},{label:"Defense",value:t.defense+l.defenseMod},{label:"Critical",value:t.critical+l.criticalMod},{label:"MP",value:t.mp+l.mpMod},{label:"MP Regen",value:t.mpRegen+l.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+l.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+l.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(n=>`${n.label}: ${n.value}`).join(`
`);alert(o)}catch(s){console.error(s)}},Q=()=>{Z&&(localStorage.setItem("drachmas",U),localStorage.setItem("playerExperience",B),localStorage.setItem("chosenRelicId",l.id))};Xe(()=>{try{const s=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),n=localStorage.getItem("chosenRelicId"),h=localStorage.getItem("curStageId");Je.set(!0),s&&e(1,U=parseInt(s)),o&&e(0,B=parseInt(o)),n&&e(15,l=Ye.find(u=>u.id===parseInt(n))),h&&e(2,G=Fe.find(u=>u.id===parseInt(h))),E=Ve.filter(u=>u.stageId===G.id),e(3,t=E[0]),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),V=Ke.filter(u=>u.stageId===G.id),e(6,i=V[Math.floor(Math.random()*V.length)]),e(7,g=i.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+i.img.slice(0,-4)+"_attack.png"})`),Z=!0}catch(s){console.error(s)}}),Ze(()=>{Je.set(!1),clearTimeout(F),clearTimeout(A),clearTimeout(le)});const W=()=>J(t.attackName,t.attackType),ne=()=>J(t.specialName,t.specialType),ge=()=>$(),I=()=>pe(),ie=()=>{tt("/practice-project-sveltekit-app/game/world")};return c.$$.update=()=>{c.$$.dirty[0]&32771&&Q()},[B,U,G,t,f,k,i,g,j,D,L,K,J,$,pe,l,W,ne,ge,I,ie]}class nt extends xe{constructor(p){super(),$e(this,p,st,at,Qe,{},null,[-1,-1])}}export{nt as component};
