import{s as ut,d as Ae,e as He,n as ot,r as dt,o as gt,f as ft}from"../chunks/scheduler.BoReh3vH.js";import{S as ht,i as vt,e as d,t as E,s as T,c as g,a as b,b as C,d as y,f as D,y as De,o as m,z as L,g as kt,h as a,A as ye,j as J}from"../chunks/index.BklZDJd0.js";import{s as nt,r as mt}from"../chunks/relics.9MHovSS4.js";import{i as pt}from"../chunks/store.Cn0GNUQE.js";import{b as z,g as _t}from"../chunks/entry.CkS6pt3B.js";const Xe=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],it=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function yt(o){let p,e,O=o[2].name+"",G,j,N,t,n,ae,v,M=o[3].hp+"",B,i,_,P,se,V,U=o[3].mp+"",Q,W,w,le,re,ie,ce=o[6].hp+"",ue,oe,X,q,F,R,h,de,ge,be,ne,Me,Z,fe,l,r,c,k,f,Y,S,I,A,H,Se,ze,Ie,Be,K,Ze="Attack",Le,x,xe="Special",Oe,he,Ne,Ue,me,Ge,we,je,pe,qe,Pe,Fe,$,$e="Mimic Summon",Ye,ee,et="View Stats",Je,te,tt="Travel",Ke,at;return{c(){p=d("div"),e=d("h2"),G=E(O),j=T(),N=d("div"),t=d("div"),n=E("Player HP: "),ae=E(o[4]),v=E("/"),B=E(M),i=T(),_=d("div"),P=E("Player MP: "),se=E(o[5]),V=E("/"),Q=E(U),W=T(),w=d("div"),le=E("Enemy HP: "),re=E(o[7]),ie=E("/"),ue=E(ce),oe=T(),X=d("div"),q=d("div"),F=d("div"),R=d("div"),h=d("img"),be=T(),ne=d("div"),Me=T(),Z=d("div"),l=T(),r=d("div"),c=d("img"),Y=T(),S=d("div"),I=T(),A=d("div"),H=d("div"),ze=T(),Ie=d("div"),Be=T(),K=d("button"),K.textContent=Ze,Le=T(),x=d("button"),x.textContent=xe,Oe=T(),he=d("div"),Ne=E(o[8]),Ue=T(),me=d("div"),Ge=E("Experience: "),we=E(o[0]),je=T(),pe=d("div"),qe=E("Drachmas: "),Pe=E(o[1]),Fe=T(),$=d("button"),$.textContent=$e,Ye=T(),ee=d("button"),ee.textContent=et,Je=T(),te=d("button"),te.textContent=tt,this.h()},l(u){p=g(u,"DIV",{class:!0});var s=b(p);e=g(s,"H2",{});var st=b(e);G=C(st,O),st.forEach(y),j=D(s),N=g(s,"DIV",{class:!0});var ve=b(N);t=g(ve,"DIV",{});var Ee=b(t);n=C(Ee,"Player HP: "),ae=C(Ee,o[4]),v=C(Ee,"/"),B=C(Ee,M),Ee.forEach(y),i=D(ve),_=g(ve,"DIV",{});var Te=b(_);P=C(Te,"Player MP: "),se=C(Te,o[5]),V=C(Te,"/"),Q=C(Te,U),Te.forEach(y),W=D(ve),w=g(ve,"DIV",{});var Ce=b(w);le=C(Ce,"Enemy HP: "),re=C(Ce,o[7]),ie=C(Ce,"/"),ue=C(Ce,ce),Ce.forEach(y),ve.forEach(y),oe=D(s),X=g(s,"DIV",{class:!0});var lt=b(X);q=g(lt,"DIV",{class:!0});var Ve=b(q);F=g(Ve,"DIV",{class:!0});var Re=b(F);R=g(Re,"DIV",{class:!0});var ke=b(R);h=g(ke,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),be=D(ke),ne=g(ke,"DIV",{class:!0}),b(ne).forEach(y),Me=D(ke),Z=g(ke,"DIV",{class:!0}),b(Z).forEach(y),ke.forEach(y),l=D(Re),r=g(Re,"DIV",{class:!0});var _e=b(r);c=g(_e,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Y=D(_e),S=g(_e,"DIV",{class:!0}),b(S).forEach(y),I=D(_e),A=g(_e,"DIV",{class:!0});var rt=b(A);H=g(rt,"DIV",{class:!0}),b(H).forEach(y),rt.forEach(y),_e.forEach(y),Re.forEach(y),ze=D(Ve),Ie=g(Ve,"DIV",{class:!0}),b(Ie).forEach(y),Ve.forEach(y),lt.forEach(y),Be=D(s),K=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(K)!=="svelte-19y3ioo"&&(K.textContent=Ze),Le=D(s),x=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(x)!=="svelte-172d9ub"&&(x.textContent=xe),Oe=D(s),he=g(s,"DIV",{class:!0});var ct=b(he);Ne=C(ct,o[8]),ct.forEach(y),Ue=D(s),me=g(s,"DIV",{class:!0});var Qe=b(me);Ge=C(Qe,"Experience: "),we=C(Qe,o[0]),Qe.forEach(y),je=D(s),pe=g(s,"DIV",{class:!0});var We=b(pe);qe=C(We,"Drachmas: "),Pe=C(We,o[1]),We.forEach(y),Fe=D(s),$=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De($)!=="svelte-zspdcm"&&($.textContent=$e),Ye=D(s),ee=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-wou4mf"&&(ee.textContent=et),Je=D(s),te=g(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-1hg8zdr"&&(te.textContent=tt),s.forEach(y),this.h()},h(){m(N,"class","stats svelte-uv8gnb"),Ae(h.src,de=z+"/game/"+o[3].img)||m(h,"src",de),m(h,"width","128px"),m(h,"height","128px"),m(h,"alt",ge=o[3].name),m(h,"class","svelte-uv8gnb"),L(h,"attack",o[9]),L(h,"hurt",o[11]),L(h,"player-using-special",o[10]),m(ne,"class","shadow svelte-uv8gnb"),m(Z,"class",fe=He(o[10]?o[3].specialEffect:"")+" svelte-uv8gnb"),m(R,"class","creature player-creature svelte-uv8gnb"),Ae(c.src,k=z+"/game/"+o[6].img)||m(c,"src",k),m(c,"width","128px"),m(c,"height","128px"),m(c,"alt",f=o[6].name),m(c,"class","svelte-uv8gnb"),L(c,"enemy-attack",o[11]),L(c,"enemy-hurt",o[9]),L(c,"enemy-spawning",o[12]),m(S,"class","shadow svelte-uv8gnb"),m(H,"class",Se=He(o[12]?"enemy-spawn":"")+" svelte-uv8gnb"),m(A,"class","enemy-spawn-container svelte-uv8gnb"),m(r,"class","creature enemy-creature svelte-uv8gnb"),m(F,"class","creatures-container svelte-uv8gnb"),m(Ie,"class","battle-floor svelte-uv8gnb"),m(q,"class","battlefield svelte-uv8gnb"),m(X,"class","battle-stage svelte-uv8gnb"),m(K,"class","svelte-uv8gnb"),m(x,"class","svelte-uv8gnb"),m(he,"class","combat-alert svelte-uv8gnb"),m(me,"class","experience svelte-uv8gnb"),m(pe,"class","drachmas svelte-uv8gnb"),m($,"class","svelte-uv8gnb"),m(ee,"class","svelte-uv8gnb"),m(te,"class","svelte-uv8gnb"),m(p,"class","game-container svelte-uv8gnb")},m(u,s){kt(u,p,s),a(p,e),a(e,G),a(p,j),a(p,N),a(N,t),a(t,n),a(t,ae),a(t,v),a(t,B),a(N,i),a(N,_),a(_,P),a(_,se),a(_,V),a(_,Q),a(N,W),a(N,w),a(w,le),a(w,re),a(w,ie),a(w,ue),a(p,oe),a(p,X),a(X,q),a(q,F),a(F,R),a(R,h),a(R,be),a(R,ne),a(R,Me),a(R,Z),a(F,l),a(F,r),a(r,c),a(r,Y),a(r,S),a(r,I),a(r,A),a(A,H),a(q,ze),a(q,Ie),a(p,Be),a(p,K),a(p,Le),a(p,x),a(p,Oe),a(p,he),a(he,Ne),a(p,Ue),a(p,me),a(me,Ge),a(me,we),a(p,je),a(p,pe),a(pe,qe),a(pe,Pe),a(p,Fe),a(p,$),a(p,Ye),a(p,ee),a(p,Je),a(p,te),Ke||(at=[ye(K,"click",o[17]),ye(K,"contextmenu",o[18]),ye(x,"click",o[19]),ye($,"click",o[14]),ye(ee,"click",o[15]),ye(te,"click",o[20])],Ke=!0)},p(u,s){s[0]&4&&O!==(O=u[2].name+"")&&J(G,O),s[0]&16&&J(ae,u[4]),s[0]&8&&M!==(M=u[3].hp+"")&&J(B,M),s[0]&32&&J(se,u[5]),s[0]&8&&U!==(U=u[3].mp+"")&&J(Q,U),s[0]&128&&J(re,u[7]),s[0]&64&&ce!==(ce=u[6].hp+"")&&J(ue,ce),s[0]&8&&!Ae(h.src,de=z+"/game/"+u[3].img)&&m(h,"src",de),s[0]&8&&ge!==(ge=u[3].name)&&m(h,"alt",ge),s[0]&512&&L(h,"attack",u[9]),s[0]&2048&&L(h,"hurt",u[11]),s[0]&1024&&L(h,"player-using-special",u[10]),s[0]&1032&&fe!==(fe=He(u[10]?u[3].specialEffect:"")+" svelte-uv8gnb")&&m(Z,"class",fe),s[0]&64&&!Ae(c.src,k=z+"/game/"+u[6].img)&&m(c,"src",k),s[0]&64&&f!==(f=u[6].name)&&m(c,"alt",f),s[0]&2048&&L(c,"enemy-attack",u[11]),s[0]&512&&L(c,"enemy-hurt",u[9]),s[0]&4096&&L(c,"enemy-spawning",u[12]),s[0]&4096&&Se!==(Se=He(u[12]?"enemy-spawn":"")+" svelte-uv8gnb")&&m(H,"class",Se),s[0]&256&&J(Ne,u[8]),s[0]&1&&J(we,u[0]),s[0]&2&&J(Pe,u[1])},i:ot,o:ot,d(u){u&&y(p),Ke=!1,dt(at)}}}function bt(o,p,e){let O=0,G=0,j=nt[0],N=Xe.filter(l=>l.stageId===j.id),t=N[0],n=mt[0],ae=!1,v=t.hp+n.hpMod,M=t.mp+n.mpMod,B=it.filter(l=>l.stageId===j.id),i=B[Math.floor(Math.random()*B.length)],_=i.hp,P="",se=0,V=!1,U=!1,Q=!1,W=!1,w=null,le=null,re=null,ie=null;const ce=()=>{if(M!==t.mp+n.mpMod&&M+t.mpRegen+n.mpRegenMod<=t.mp+n.mpMod){e(5,M=M+t.mpRegen+n.mpRegenMod);return}e(5,M=t.mp+n.mpMod)},ue=(l,r)=>{if(v-(i.attack-i.attack*l)*r<=0){e(8,P="Defeat!"),e(4,v=0);return}e(4,v=v-(i.attack-i.attack*l)*r)},oe=(l,r,c)=>{try{const k=t.speed+n.speedMod;let f=(t.defense+n.defenseMod)/100,Y=i.critical/100,S=1,I=!1;if(i.attackType==="Magic"&&(f=0),i.speed<k?I=Math.random()>=.5:I=Math.random()>=.8,se>1&&!I&&!l&&(I=!0),!I&&l&&e(8,P="Enemy was too slow!"),!I&&!l){e(5,M=t.mp+n.mpMod),se+=1,h(r,c);return}r===t.attackName&&ce(),I&&l&&e(8,P="Both abilities succeeded."),I&&!l&&e(8,P="Your summon was too slow!"),I&&(Math.random()<=Y&&(S=1.5),i.attackType==="Poison"&&S===1&&(S=1.5),ue(f,S),e(11,Q=!0),re=setTimeout(()=>e(11,Q=!1),500))}catch(k){console.error(k)}},X=(l,r,c,k,f)=>{f==="Lifesteal"&&c&&(v+l*r*.2>t.hp+n.hpMod?e(4,v=t.hp+n.hpMod):e(4,v=v+l*r*.2)),oe(c,k,f)},q=(l,r,c,k,f)=>{l&&(v+r*c>t.hp+n.hpMod?e(4,v=t.hp+n.hpMod):e(4,v=v+r*c)),oe(l,k,f)},F=(l,r,c,k,f,Y,S)=>{if(e(5,M=M-c),S!=="Heal"){if(_-(r-r*f)*k<=0&&l){e(7,_=0),e(8,P="Victory!"),e(0,O+=i.reward*2),e(1,G+=i.reward),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500),e(10,U=!0),le=setTimeout(()=>e(10,U=!1),500);return}l&&(e(7,_=_-(r-r*f)*k),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500),e(10,U=!0),le=setTimeout(()=>e(10,U=!1),500)),X(r,k,l,Y,S);return}q(l,r,k,Y,S)},R=()=>{(v<=0||_<=0)&&(e(4,v=t.hp+n.hpMod),e(5,M=t.mp+n.mpMod),e(12,W=!0),ie=setTimeout(()=>e(12,W=!1),500),e(6,i=B[Math.floor(Math.random()*B.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+i.img.slice(0,-4)+"_attack.png"})`),e(7,_=i.hp),e(8,P=""))},h=(l,r)=>{try{const c=t.attack+n.attackMod,k=t.speed+n.speedMod,f=(t.critical+n.criticalMod)/100;let Y=t.special+n.specialMod,S=t.specialCost,I=i.defense/100,A=!1,H=1;if(W)return;if(R(),r==="Magic"&&(I=0),k<i.speed?A=Math.random()>=.5:A=Math.random()>=.8,Math.random()<=f&&(H=1.5),r==="Poison"&&H===1&&(H=1.5),l===t.attackName){if(_-(c-c*I)*H<=0&&A){e(7,_=0),e(8,P="Victory!"),e(0,O+=i.reward*2),e(1,G+=i.reward),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500);return}A&&(e(7,_=_-(c-c*I)*H),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500)),oe(A,l,r);return}M>=S?F(A,Y,S,H,I,l,r):e(8,P="Not enough MP!")}catch(c){console.error(c)}},de=()=>{try{const l=i;e(4,v=0),R(),e(3,t=Xe.find(r=>r.id===l.id)),e(4,v=t.hp+n.hpMod),e(5,M=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(l){console.error(l)}},ge=()=>{try{const r=[{label:"Name",value:t.name},{label:"HP",value:t.hp+n.hpMod},{label:"Speed",value:t.speed+n.speedMod},{label:"Defense",value:t.defense+n.defenseMod},{label:"Critical",value:t.critical+n.criticalMod},{label:"MP",value:t.mp+n.mpMod},{label:"MP Regen",value:t.mpRegen+n.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+n.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+n.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(c=>`${c.label}: ${c.value}`).join(`
`);alert(r)}catch(l){console.error(l)}},be=()=>{ae&&(localStorage.setItem("drachmas",G),localStorage.setItem("playerExperience",O),localStorage.setItem("chosenRelicId",n.id))};gt(()=>{try{const l=localStorage.getItem("drachmas"),r=localStorage.getItem("playerExperience"),c=localStorage.getItem("chosenRelicId"),k=localStorage.getItem("curStageId");pt.set(!0),l&&e(1,G=parseInt(l)),r&&e(0,O=parseInt(r)),c&&e(16,n=mt.find(f=>f.id===parseInt(c))),k&&e(2,j=nt.find(f=>f.id===parseInt(k))),N=Xe.filter(f=>f.stageId===j.id),e(3,t=N[0]),e(4,v=t.hp+n.hpMod),e(5,M=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),B=it.filter(f=>f.stageId===j.id),e(6,i=B[Math.floor(Math.random()*B.length)]),e(7,_=i.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+i.img.slice(0,-4)+"_attack.png"})`),ae=!0}catch(l){console.error(l)}}),ft(()=>{pt.set(!1),clearTimeout(w),clearTimeout(le),clearTimeout(re),clearTimeout(ie)});const ne=()=>h(t.attackName,t.attackType),Me=l=>{l.preventDefault(),h(t.specialName,t.specialType)},Z=()=>h(t.specialName,t.specialType),fe=()=>{_t(z+"/game/world")};return o.$$.update=()=>{o.$$.dirty[0]&65539&&be()},[O,G,j,t,v,M,i,_,P,V,U,Q,W,h,de,ge,n,ne,Me,Z,fe]}class Dt extends ht{constructor(p){super(),vt(this,p,bt,yt,ut,{},null,[-1,-1])}}export{Dt as component};
