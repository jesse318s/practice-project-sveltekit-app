import{s as Ee,d as ue,e as ge,n as Me,r as ve,o as Ce,f as Te}from"../chunks/scheduler.BoReh3vH.js";import{S as Ie,i as ze,e as C,t as b,s as H,c as T,a as q,b as R,d as P,f as G,y as ke,o as i,z as B,g as De,h as t,A as _e,j as $}from"../chunks/index.DhL7nboW.js";import{i as ye}from"../chunks/store.BxR7W1V8.js";const Pe=[{id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",price:50,hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special_effect_2"}],we=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],ae=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function be(c){let m,e,V,O,s,n,p,E,J,l,g,I,U,z,v,_,L,Y,j,S,K,Z,M,Q,W,ee,D,re="Attack",te,a,o="Special Attack",d,u,y,N,h,k,w,A,F,ce,se,le,de;return{c(){m=C("div"),e=C("div"),V=C("div"),O=b("Player HP: "),s=b(c[2]),n=H(),p=C("div"),E=b("Player MP: "),J=b(c[3]),l=H(),g=C("div"),I=b("Enemy HP: "),U=b(c[5]),z=H(),v=C("div"),_=C("img"),Y=H(),j=C("div"),S=C("div"),Z=H(),M=C("img"),ee=H(),D=C("button"),D.textContent=re,te=H(),a=C("button"),a.textContent=o,d=H(),u=C("div"),y=b(c[6]),N=H(),h=C("div"),k=b("Experience: "),w=b(c[0]),A=H(),F=C("div"),ce=b("Drachmas: "),se=b(c[1]),this.h()},l(f){m=T(f,"DIV",{class:!0});var r=q(m);e=T(r,"DIV",{class:!0});var X=q(e);V=T(X,"DIV",{});var oe=q(V);O=R(oe,"Player HP: "),s=R(oe,c[2]),oe.forEach(P),n=G(X),p=T(X,"DIV",{});var ne=q(p);E=R(ne,"Player MP: "),J=R(ne,c[3]),ne.forEach(P),l=G(X),g=T(X,"DIV",{});var ie=q(g);I=R(ie,"Enemy HP: "),U=R(ie,c[5]),ie.forEach(P),X.forEach(P),z=G(r),v=T(r,"DIV",{class:!0});var x=q(v);_=T(x,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),Y=G(x),j=T(x,"DIV",{class:!0});var fe=q(j);S=T(fe,"DIV",{class:!0}),q(S).forEach(P),fe.forEach(P),Z=G(x),M=T(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(P),ee=G(r),D=T(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(D)!=="svelte-ig8gg4"&&(D.textContent=re),te=G(r),a=T(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-11zl5of"&&(a.textContent=o),d=G(r),u=T(r,"DIV",{class:!0});var he=q(u);y=R(he,c[6]),he.forEach(P),N=G(r),h=T(r,"DIV",{class:!0});var me=q(h);k=R(me,"Experience: "),w=R(me,c[0]),me.forEach(P),A=G(r),F=T(r,"DIV",{class:!0});var pe=q(F);ce=R(pe,"Drachmas: "),se=R(pe,c[1]),pe.forEach(P),r.forEach(P),this.h()},h(){i(e,"class","stats svelte-qz431e"),ue(_.src,L=c[10].img)||i(_,"src",L),i(_,"alt",c[10].name),i(_,"width","128px"),i(_,"height","128px"),i(_,"class","svelte-qz431e"),B(_,"attack",c[7]),B(_,"hurt",c[9]),i(S,"class",K=ge(c[8]?c[10].specialEffect:"")+" svelte-qz431e"),i(j,"class","special-effect-container svelte-qz431e"),i(M,"class","enemy-creature svelte-qz431e"),ue(M.src,Q=c[4].img)||i(M,"src",Q),i(M,"alt",W=c[4].name),i(M,"width","128px"),i(M,"height","128px"),B(M,"enemy-attack",c[9]),B(M,"enemy-hurt",c[7]),i(v,"class","creatures svelte-qz431e"),i(D,"class","svelte-qz431e"),i(a,"class","svelte-qz431e"),i(u,"class","combat-alert svelte-qz431e"),i(h,"class","experience svelte-qz431e"),i(F,"class","drachmas svelte-qz431e"),i(m,"class","game-container svelte-qz431e")},m(f,r){De(f,m,r),t(m,e),t(e,V),t(V,O),t(V,s),t(e,n),t(e,p),t(p,E),t(p,J),t(e,l),t(e,g),t(g,I),t(g,U),t(m,z),t(m,v),t(v,_),t(v,Y),t(v,j),t(j,S),t(v,Z),t(v,M),t(m,ee),t(m,D),t(m,te),t(m,a),t(m,d),t(m,u),t(u,y),t(m,N),t(m,h),t(h,k),t(h,w),t(m,A),t(m,F),t(F,ce),t(F,se),le||(de=[_e(D,"click",c[12]),_e(a,"click",c[13])],le=!0)},p(f,[r]){r&4&&$(s,f[2]),r&8&&$(J,f[3]),r&32&&$(U,f[5]),r&128&&B(_,"attack",f[7]),r&512&&B(_,"hurt",f[9]),r&256&&K!==(K=ge(f[8]?f[10].specialEffect:"")+" svelte-qz431e")&&i(S,"class",K),r&16&&!ue(M.src,Q=f[4].img)&&i(M,"src",Q),r&16&&W!==(W=f[4].name)&&i(M,"alt",W),r&512&&B(M,"enemy-attack",f[9]),r&128&&B(M,"enemy-hurt",f[7]),r&64&&$(y,f[6]),r&1&&$(w,f[0]),r&2&&$(se,f[1])},i:Me,o:Me,d(f){f&&P(m),le=!1,ve(de)}}}function qe(c,m,e){let V=0,O=0,s=Pe[0],n=we[0],p=s.hp+n.hpMod,E=s.mp+n.mpMod,J=E,l=ae[Math.floor(Math.random()*ae.length)],g=l.hp,I="",U=0,z=!1,v=!1,_=!1,L=null,Y=null,j=null;const S=()=>{if(E!==s.mp+n.mpMod&&E+s.mpRegen+n.mpRegenMod<=s.mp+n.mpMod){e(3,E=E+s.mpRegen+n.mpRegenMod);return}e(3,E=s.mp+n.mpMod)},K=(a,o)=>{if(p-(l.attack-l.attack*a)*o<=0){e(6,I="Defeat!"),e(2,p=0);return}e(2,p=p-(l.attack-l.attack*a)*o)},Z=(a,o,d)=>{try{const u=s.speed+n.speedMod;let y=(s.defense+n.defenseMod)/100,N=l.critical/100,h=1,k=!1;if(l.attackType==="Magic"&&(y=0),l.speed<u?k=Math.random()>=.5:k=Math.random()>=.8,U>1&&!k&&!a&&(k=!0),!k&&a&&e(6,I="Enemy was too slow!"),!k&&!a){e(3,E=J),U+=1,D(o,d);return}o===s.attackName&&S(),k&&a&&e(6,I="Both abilities succeeded."),k&&!a&&e(6,I="Your summon was too slow!"),k&&(Math.random()<=N&&(h=1.5),l.attackType==="Poison"&&h===1&&(h=1.5),K(y,h),e(9,_=!0),j=setTimeout(()=>e(9,_=!1),500))}catch(u){console.error(u)}},M=(a,o,d,u,y)=>{y==="Lifesteal"&&d&&(p+a*o*.2>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+a*o*.2)),Z(d,u,y)},Q=(a,o,d,u,y)=>{a&&(p+o*d>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+o*d)),Z(a,u,y)},W=(a,o,d,u,y,N,h)=>{if(e(3,E=E-d),h!=="Heal"){if(g-(o-o*y)*u<=0&&a){e(5,g=0),e(6,I="Victory!"),e(0,V+=l.reward*2),e(1,O+=l.reward),e(7,z=!0),L=setTimeout(()=>e(7,z=!1),500),e(8,v=!0),Y=setTimeout(()=>e(8,v=!1),500);return}a&&(e(5,g=g-(o-o*y)*u),e(7,z=!0),L=setTimeout(()=>e(7,z=!1),500),e(8,v=!0),Y=setTimeout(()=>e(8,v=!1),500)),M(o,u,a,N,h);return}Q(a,o,u,N,h)},ee=()=>{(p<=0||g<=0)&&(e(2,p=s.hp+n.hpMod),e(3,E=s.mp+n.mpMod),e(4,l=ae[Math.floor(Math.random()*ae.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${l.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${l.img.slice(0,-4)+"_attack.png"})`),e(5,g=l.hp),e(6,I=""))},D=(a,o)=>{try{const d=s.attack+n.attackMod,u=s.speed+n.speedMod,y=(s.critical+n.criticalMod)/100;let N=s.special+n.specialMod,h=s.specialCost,k=l.defense/100,w=!1,A=1;if(ee(),o==="Magic"&&(k=0),u<l.speed?w=Math.random()>=.5:w=Math.random()>=.8,Math.random()<=y&&(A=1.5),o==="Poison"&&A===1&&(A=1.5),a===s.attackName){if(g-(d-d*k)*A<=0&&w){e(5,g=0),e(6,I="Victory!"),e(0,V+=l.reward*2),e(1,O+=l.reward),e(7,z=!0),L=setTimeout(()=>e(7,z=!1),500);return}w&&(e(5,g=g-(d-d*k)*A),e(7,z=!0),L=setTimeout(()=>e(7,z=!1),500)),Z(w,a,o);return}E>=h?W(w,N,h,A,k,a,o):e(6,I="Not enough MP!")}catch(d){console.error(d)}};return Ce(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+s.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_attack.png"})`),ye.set(!0)}),Te(()=>{ye.set(!1),clearTimeout(L),clearTimeout(Y),clearTimeout(j)}),[V,O,p,E,l,g,I,z,v,_,s,D,()=>D(s.attackName,s.attackType),()=>D(s.specialName,s.specialType)]}class Ae extends Ie{constructor(m){super(),ze(this,m,qe,be,Ee,{})}}export{Ae as component};
