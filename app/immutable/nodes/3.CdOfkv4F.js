import{s as ue,a as me,n as ne,r as he,o as de,b as ge}from"../chunks/scheduler.B_jJGfMn.js";import{S as Me,i as ke,e as T,t as V,s as v,c as w,a as B,b as q,d as N,f as O,k as pe,l as g,m as L,g as _e,h as s,n as fe,j as K}from"../chunks/index.CQa0FlaJ.js";import{i as ie}from"../chunks/store.CYFosK7b.js";function ye(l){let m,e,z,S,t,c,n,M,Y,i,h,E,U,I,D,d,A,Q,C,F,W,G,Z="Attack",j,H,x="Special Attack",X,a,r,u,p,k,b,_,f,R,P,ee,le;return{c(){m=T("div"),e=T("div"),z=T("div"),S=V("Player HP: "),t=V(l[2]),c=v(),n=T("div"),M=V("Player MP: "),Y=V(l[3]),i=v(),h=T("div"),E=V("Enemy HP: "),U=V(l[4]),I=v(),D=T("div"),d=T("img"),Q=v(),C=T("img"),W=v(),G=T("button"),G.textContent=Z,j=v(),H=T("button"),H.textContent=x,X=v(),a=T("div"),r=V(l[5]),u=v(),p=T("div"),k=V("Experience: "),b=V(l[0]),_=v(),f=T("div"),R=V("Drachmas: "),P=V(l[1]),this.h()},l(y){m=w(y,"DIV",{class:!0});var o=B(m);e=w(o,"DIV",{class:!0});var J=B(e);z=w(J,"DIV",{});var te=B(z);S=q(te,"Player HP: "),t=q(te,l[2]),te.forEach(N),c=O(J),n=w(J,"DIV",{});var se=B(n);M=q(se,"Player MP: "),Y=q(se,l[3]),se.forEach(N),i=O(J),h=w(J,"DIV",{});var ae=B(h);E=q(ae,"Enemy HP: "),U=q(ae,l[4]),ae.forEach(N),J.forEach(N),I=O(o),D=w(o,"DIV",{class:!0});var $=B(D);d=w($,"IMG",{id:!0,src:!0,alt:!0,width:!0,height:!0,class:!0}),Q=O($),C=w($,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),$.forEach(N),W=O(o),G=w(o,"BUTTON",{"data-svelte-h":!0}),pe(G)!=="svelte-xzlz5g"&&(G.textContent=Z),j=O(o),H=w(o,"BUTTON",{"data-svelte-h":!0}),pe(H)!=="svelte-afg87k"&&(H.textContent=x),X=O(o),a=w(o,"DIV",{class:!0});var ce=B(a);r=q(ce,l[5]),ce.forEach(N),u=O(o),p=w(o,"DIV",{class:!0});var re=B(p);k=q(re,"Experience: "),b=q(re,l[0]),re.forEach(N),_=O(o),f=w(o,"DIV",{class:!0});var oe=B(f);R=q(oe,"Drachmas: "),P=q(oe,l[1]),oe.forEach(N),o.forEach(N),this.h()},h(){g(e,"class","stats svelte-hrzqvh"),g(d,"id","player-creature"),me(d.src,A=l[10].img)||g(d,"src",A),g(d,"alt",l[10].name),g(d,"width","128px"),g(d,"height","128px"),g(d,"class","svelte-hrzqvh"),L(d,"attack",l[6]),L(d,"damage",l[7]),g(C,"class","enemy-creature svelte-hrzqvh"),me(C.src,F=l[11].img)||g(C,"src",F),g(C,"alt",l[11].name),g(C,"width","128px"),g(C,"height","128px"),L(C,"enemy-attack",l[8]),L(C,"enemy-damage",l[9]),g(D,"class","creatures svelte-hrzqvh"),g(a,"class","combat-alert svelte-hrzqvh"),g(p,"class","experience svelte-hrzqvh"),g(f,"class","drachmas svelte-hrzqvh"),g(m,"class","game-container svelte-hrzqvh")},m(y,o){_e(y,m,o),s(m,e),s(e,z),s(z,S),s(z,t),s(e,c),s(e,n),s(n,M),s(n,Y),s(e,i),s(e,h),s(h,E),s(h,U),s(m,I),s(m,D),s(D,d),s(D,Q),s(D,C),s(m,W),s(m,G),s(m,j),s(m,H),s(m,X),s(m,a),s(a,r),s(m,u),s(m,p),s(p,k),s(p,b),s(m,_),s(m,f),s(f,R),s(f,P),ee||(le=[fe(G,"click",l[12]),fe(H,"click",l[13])],ee=!0)},p(y,[o]){o&4&&K(t,y[2]),o&8&&K(Y,y[3]),o&16&&K(U,y[4]),o&64&&L(d,"attack",y[6]),o&128&&L(d,"damage",y[7]),o&256&&L(C,"enemy-attack",y[8]),o&512&&L(C,"enemy-damage",y[9]),o&32&&K(r,y[5]),o&1&&K(b,y[0]),o&2&&K(P,y[1])},i:ne,o:ne,d(y){y&&N(m),ee=!1,he(le)}}}function Ce(l,m,e){let z=0,S=0,t={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",special2:75,specialCost2:100,specialName2:"Sunder",specialType2:"Magic"},c={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},n=t.hp+c.hpMod,M=t.mp+c.mpMod,Y=M,i={id:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},h=i.hp,E="",U=0,I=!1,D=!1,d=!1,A=!1;const Q=()=>{if(M!==t.mp+c.mpMod&&M+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(3,M=M+t.mpRegen+c.mpRegenMod);return}e(3,M=t.mp+c.mpMod)},C=(a,r)=>{if(n-(i.attack-i.attack*a)*r<=0){e(5,E="Defeat!"),e(2,n=0),e(7,D=!0),setTimeout(()=>e(7,D=!1),500);return}e(2,n=n-(i.attack-i.attack*a)*r),e(7,D=!0),setTimeout(()=>e(7,D=!1),500)},F=(a,r,u)=>{try{const p=t.speed+c.speedMod;let k=(t.defense+c.defenseMod)/100,b=i.critical/100,_=1,f=!1;if(i.attackType==="Magic"&&(k=0),i.speed<p?f=Math.random()>=.5:f=Math.random()>=.8,U>1&&!f&&!a&&(f=!0),!f&&a&&e(5,E="Enemy was too slow!"),!f&&!a){e(3,M=Y),U+=1,j(r,u);return}r===t.attackName&&Q(),f&&a&&e(5,E="Both abilities succeeded."),f&&!a&&e(5,E="Your summon was too slow!"),f&&(Math.random()<=b&&(_=1.5),i.attackType==="Poison"&&_===1&&(_=1.5),C(k,_),e(8,d=!0),setTimeout(()=>e(8,d=!1),500))}catch(p){console.error(p)}},W=(a,r,u,p,k)=>{k==="Lifesteal"&&u&&(n+a*r*.2>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+a*r*.2)),F(u,p,k)},G=(a,r,u,p,k)=>{a&&(n+r*u>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+r*u)),F(a,p,k)},Z=(a,r,u,p,k,b,_)=>{if(e(3,M=M-u),_!=="Heal"){if(h-(r-r*k)*p<=0&&a){e(4,h=0),e(5,E="Victory!"),e(0,z+=i.reward*2),e(1,S+=i.reward),e(6,I=!0),setTimeout(()=>e(6,I=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}a&&(e(4,h=h-(r-r*k)*p),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),W(r,p,a,b,_);return}G(a,r,p,b,_)},j=(a,r)=>{try{const u=t.attack+c.attackMod,p=t.speed+c.speedMod,k=(t.critical+c.criticalMod)/100;let b=t.special+c.specialMod,_=t.specialCost,f=i.defense/100,R=!1,P=1;if(a===t.specialName2&&(b=t.special2+c.specialMod,_=t.specialCost2),r==="Magic"&&(f=0),p<i.speed?R=Math.random()>=.5:R=Math.random()>=.8,Math.random()<=k&&(P=1.5),r==="Poison"&&P===1&&(P=1.5),a===t.attackName){if(h-(u-u*f)*P<=0&&R){e(4,h=0),e(5,E="Victory!"),e(0,z+=i.reward*2),e(1,S+=i.reward),e(6,I=!0),setTimeout(()=>e(6,I=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}R&&(e(4,h=h-(u-u*f)*P),e(6,I=!0),setTimeout(()=>e(6,I=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),F(R,a,r);return}M>=_?Z(R,b,_,P,f,a,r):e(5,E="Not enough MP!")}catch(u){console.error(u)}},H=()=>{(n<=0||h<=0)&&(e(2,n=t.hp+c.hpMod),e(3,M=t.mp+c.mpMod),e(4,h=i.hp),e(5,E=""))},x=()=>{H(),j(t.attackName,t.attackType)},X=()=>{H(),j(t.specialName,t.specialType)};return de(()=>{ie.update(()=>!0)}),ge(()=>{ie.update(()=>!1)}),[z,S,n,M,h,E,I,D,d,A,t,i,x,X]}class we extends Me{constructor(m){super(),ke(this,m,Ce,ye,ue,{})}}export{we as component};
