import{s as he,n as Z,d as ve,o as pe,f as ge,r as ye}from"../chunks/scheduler.BoReh3vH.js";import{S as _e,i as me,e as w,s as G,t as P,c as C,a as T,y as q,f as D,b as U,d as k,o as S,g as A,h as _,j as X,B as Y,A as z,n as F,l as Q,m as ke,k as $,u as Ie,v as be,w as xe,x as we,q as Ce}from"../chunks/index.BklZDJd0.js";import{e as H}from"../chunks/each.D6YF6ztN.js";import{r as W,s as K}from"../chunks/relics.CGlwEWe2.js";import{i as ee,a as te}from"../chunks/store.Cn0GNUQE.js";import{b as Se,g as Ee}from"../chunks/entry.BdMfgJ5o.js";const J=[{id:1,rocks:[{x:1,y:1},{x:3,y:3},{x:0,y:3}],exits:[{x:0,y:0,destGridId:2,spawn:{x:4,y:4}},{x:4,y:2,destGridId:2,spawn:{x:0,y:2}},{x:2,y:4,destGridId:2,spawn:{x:2,y:0}}]},{id:2,rocks:[{x:1,y:3},{x:4,y:1}],exits:[{x:0,y:4,destGridId:1,spawn:{x:4,y:0}},{x:4,y:0,destGridId:1,spawn:{x:0,y:4}},{x:2,y:0,destGridId:1,spawn:{x:2,y:4}}]}];function le(i,e,l){const t=i.slice();return t[6]=e[l],t}function se(i){let e;return{c(){e=P("Active")},l(l){e=U(l,"Active")},m(l,t){A(l,e,t)},d(l){l&&k(e)}}}function ie(i){let e,l="Buy",t,s;function a(){return i[5](i[6])}return{c(){e=w("button"),e.textContent=l,this.h()},l(r){e=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-yl076z"&&(e.textContent=l),this.h()},h(){S(e,"class","svelte-7eusns")},m(r,g){A(r,e,g),t||(s=z(e,"click",a),t=!0)},p(r,g){i=r},d(r){r&&k(e),t=!1,s()}}}function re(i){let e,l,t,s,a,r=i[6].name+"",g,E,u,b,m,d=i[6].description+"",o,n,p,x,R=i[6].price+"",B,V,y,v,h=i[6].id===i[1].id&&se(),c=i[6].id!==i[1].id&&ie(i);return{c(){e=w("div"),l=w("img"),s=G(),a=w("h3"),g=P(r),E=G(),u=w("p"),h&&h.c(),b=G(),m=w("p"),o=P(d),n=G(),p=w("p"),x=P("Price: "),B=P(R),V=P(" drachmas"),y=G(),c&&c.c(),v=G(),this.h()},l(I){e=C(I,"DIV",{class:!0});var f=T(e);l=C(f,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),s=D(f),a=C(f,"H3",{});var N=T(a);g=U(N,r),N.forEach(k),E=D(f),u=C(f,"P",{class:!0});var O=T(u);h&&h.l(O),O.forEach(k),b=D(f),m=C(f,"P",{});var L=T(m);o=U(L,d),L.forEach(k),n=D(f),p=C(f,"P",{});var M=T(p);x=U(M,"Price: "),B=U(M,R),V=U(M," drachmas"),M.forEach(k),y=D(f),c&&c.l(f),v=D(f),f.forEach(k),this.h()},h(){ve(l.src,t=Se+"/"+i[6].img)||S(l,"src",t),S(l,"width","46px"),S(l,"height","46px"),S(l,"alt",i[6].name),S(l,"class","svelte-7eusns"),S(u,"class","active"),S(e,"class","menu-item svelte-7eusns")},m(I,f){A(I,e,f),_(e,l),_(e,s),_(e,a),_(a,g),_(e,E),_(e,u),h&&h.m(u,null),_(e,b),_(e,m),_(m,o),_(e,n),_(e,p),_(p,x),_(p,B),_(p,V),_(e,y),c&&c.m(e,null),_(e,v)},p(I,f){I[6].id===I[1].id?h||(h=se(),h.c(),h.m(u,null)):h&&(h.d(1),h=null),I[6].id!==I[1].id?c?c.p(I,f):(c=ie(I),c.c(),c.m(e,v)):c&&(c.d(1),c=null)},d(I){I&&k(e),h&&h.d(),c&&c.d()}}}function Re(i){let e,l,t="Relic Store",s,a,r,g,E,u,b=H(i[2]),m=[];for(let d=0;d<b.length;d+=1)m[d]=re(le(i,b,d));return{c(){e=w("div"),l=w("h2"),l.textContent=t,s=G(),a=w("p"),r=P("Drachmas: "),g=P(i[0]),E=G(),u=w("div");for(let d=0;d<m.length;d+=1)m[d].c();this.h()},l(d){e=C(d,"DIV",{class:!0});var o=T(e);l=C(o,"H2",{"data-svelte-h":!0}),q(l)!=="svelte-6gh0hs"&&(l.textContent=t),s=D(o),a=C(o,"P",{});var n=T(a);r=U(n,"Drachmas: "),g=U(n,i[0]),n.forEach(k),E=D(o),u=C(o,"DIV",{});var p=T(u);for(let x=0;x<m.length;x+=1)m[x].l(p);p.forEach(k),o.forEach(k),this.h()},h(){S(e,"class","menu svelte-7eusns")},m(d,o){A(d,e,o),_(e,l),_(e,s),_(e,a),_(a,r),_(a,g),_(e,E),_(e,u);for(let n=0;n<m.length;n+=1)m[n]&&m[n].m(u,null)},p(d,[o]){if(o&1&&X(g,d[0]),o&14){b=H(d[2]);let n;for(n=0;n<b.length;n+=1){const p=le(d,b,n);m[n]?m[n].p(p,o):(m[n]=re(p),m[n].c(),m[n].m(u,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=b.length}},i:Z,o:Z,d(d){d&&k(e),Y(m,d)}}}function Ge(i,e,l){let{drachmas:t}=e,{chosenRelic:s}=e,{curGridId:a}=e;const r=W.filter(u=>u.stageId===a),g=u=>{if(t>=u.price){l(0,t-=u.price),localStorage.setItem("drachmas",t),l(1,s=u),localStorage.setItem("chosenRelicId",u.id),window.location.reload();return}alert("Not enough drachmas to spend!")},E=u=>g(u);return i.$$set=u=>{"drachmas"in u&&l(0,t=u.drachmas),"chosenRelic"in u&&l(1,s=u.chosenRelic),"curGridId"in u&&l(4,a=u.curGridId)},[t,s,r,g,a,E]}class De extends _e{constructor(e){super(),me(this,e,Ge,Re,he,{drachmas:0,chosenRelic:1,curGridId:4})}}function ne(i,e,l){const t=i.slice();return t[17]=e[l],t[19]=l,t}function ae(i,e,l){const t=i.slice();return t[17]=e[l],t[21]=l,t}function ce(i){let e,l,t,s,a,r,g,E="Left",u,b,m,d="Up",o,n,p="Down",x,R,B="Right",V,y,v=H(Array(j)),h=[];for(let c=0;c<v.length;c+=1)h[c]=fe(ne(i,v,c));return{c(){e=w("h2"),l=P(i[2]),t=G(),s=w("div");for(let c=0;c<h.length;c+=1)h[c].c();a=G(),r=w("div"),g=w("button"),g.textContent=E,u=G(),b=w("div"),m=w("button"),m.textContent=d,o=G(),n=w("button"),n.textContent=p,x=G(),R=w("button"),R.textContent=B,this.h()},l(c){e=C(c,"H2",{});var I=T(e);l=U(I,i[2]),I.forEach(k),t=D(c),s=C(c,"DIV",{class:!0});var f=T(s);for(let L=0;L<h.length;L+=1)h[L].l(f);f.forEach(k),a=D(c),r=C(c,"DIV",{class:!0});var N=T(r);g=C(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(g)!=="svelte-b3x30h"&&(g.textContent=E),u=D(N),b=C(N,"DIV",{class:!0});var O=T(b);m=C(O,"BUTTON",{class:!0,"data-svelte-h":!0}),q(m)!=="svelte-zcznvd"&&(m.textContent=d),o=D(O),n=C(O,"BUTTON",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-1x8a6xp"&&(n.textContent=p),O.forEach(k),x=D(N),R=C(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(R)!=="svelte-du436l"&&(R.textContent=B),N.forEach(k),this.h()},h(){S(s,"class","grid svelte-fax0re"),S(g,"class","svelte-fax0re"),S(m,"class","svelte-fax0re"),S(n,"class","svelte-fax0re"),S(b,"class","svelte-fax0re"),S(R,"class","svelte-fax0re"),S(r,"class","button-row svelte-fax0re")},m(c,I){A(c,e,I),_(e,l),A(c,t,I),A(c,s,I);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(s,null);A(c,a,I),A(c,r,I),_(r,g),_(r,u),_(r,b),_(b,m),_(b,o),_(b,n),_(r,x),_(r,R),V||(y=[z(g,"click",i[8]),z(m,"click",i[9]),z(n,"click",i[10]),z(R,"click",i[11])],V=!0)},p(c,I){if(I&4&&X(l,c[2]),I&67){v=H(Array(j));let f;for(f=0;f<v.length;f+=1){const N=ne(c,v,f);h[f]?h[f].p(N,I):(h[f]=fe(N),h[f].c(),h[f].m(s,null))}for(;f<h.length;f+=1)h[f].d(1);h.length=v.length}},d(c){c&&(k(e),k(t),k(s),k(a),k(r)),Y(h,c),V=!1,ye(y)}}}function oe(i){let e,l;return{c(){e=w("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),T(e).forEach(k),this.h()},h(){S(e,"class",l="cell "+i[6](i[21],i[19],i[0],i[1])+" svelte-fax0re")},m(t,s){A(t,e,s)},p(t,s){s&3&&l!==(l="cell "+t[6](t[21],t[19],t[0],t[1])+" svelte-fax0re")&&S(e,"class",l)},d(t){t&&k(e)}}}function fe(i){let e,l=H(Array(j)),t=[];for(let s=0;s<l.length;s+=1)t[s]=oe(ae(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=$()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);e=$()},m(s,a){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(s,a);A(s,e,a)},p(s,a){if(a&67){l=H(Array(j));let r;for(r=0;r<l.length;r+=1){const g=ae(s,l,r);t[r]?t[r].p(g,a):(t[r]=oe(g),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){s&&k(e),Y(t,s)}}}function de(i){let e,l="Battle",t,s;return{c(){e=w("button"),e.textContent=l,this.h()},l(a){e=C(a,"BUTTON",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-17w86ff"&&(e.textContent=l),this.h()},h(){S(e,"class","svelte-fax0re")},m(a,r){A(a,e,r),t||(s=z(e,"click",i[13]),t=!0)},d(a){a&&k(e),t=!1,s()}}}function ue(i){let e,l;return e=new De({props:{drachmas:i[4],chosenRelic:i[5],curGridId:i[1]}}),{c(){Ie(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,s){xe(e,t,s),l=!0},p(t,s){const a={};s&16&&(a.drachmas=t[4]),s&32&&(a.chosenRelic=t[5]),s&2&&(a.curGridId=t[1]),e.$set(a)},i(t){l||(F(e.$$.fragment,t),l=!0)},o(t){Q(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function Te(i){let e,l,t,s,a=i[3]?"Close Relic Store":"Relic Store",r,g,E,u,b,m,d=!i[3]&&ce(i),o=!i[3]&&de(i),n=i[3]&&ue(i);return{c(){e=w("div"),d&&d.c(),l=G(),t=w("div"),s=w("button"),r=P(a),g=G(),o&&o.c(),E=G(),n&&n.c(),this.h()},l(p){e=C(p,"DIV",{class:!0});var x=T(e);d&&d.l(x),l=D(x),t=C(x,"DIV",{class:!0});var R=T(t);s=C(R,"BUTTON",{class:!0});var B=T(s);r=U(B,a),B.forEach(k),g=D(R),o&&o.l(R),R.forEach(k),E=D(x),n&&n.l(x),x.forEach(k),this.h()},h(){S(s,"class","svelte-fax0re"),S(t,"class","button-row svelte-fax0re"),S(e,"class","world svelte-fax0re")},m(p,x){A(p,e,x),d&&d.m(e,null),_(e,l),_(e,t),_(t,s),_(s,r),_(t,g),o&&o.m(t,null),_(e,E),n&&n.m(e,null),u=!0,b||(m=z(s,"click",i[12]),b=!0)},p(p,[x]){p[3]?d&&(d.d(1),d=null):d?d.p(p,x):(d=ce(p),d.c(),d.m(e,l)),(!u||x&8)&&a!==(a=p[3]?"Close Relic Store":"Relic Store")&&X(r,a),p[3]?o&&(o.d(1),o=null):o||(o=de(p),o.c(),o.m(t,null)),p[3]?n?(n.p(p,x),x&8&&F(n,1)):(n=ue(p),n.c(),F(n,1),n.m(e,null)):n&&(Ce(),Q(n,1,1,()=>{n=null}),ke())},i(p){u||(F(n),u=!0)},o(p){Q(n),u=!1},d(p){p&&k(e),d&&d.d(),o&&o.d(),n&&n.d(),b=!1,m()}}}const j=5;function Ae(i,e,l){let t={x:2,y:2},s=1,a=K.find(y=>y.id===s).name,r=!1,g=0,E=0,u=W[0];const b=y=>{y.preventDefault(),y.key==="ArrowUp"&&o("up"),y.key==="ArrowDown"&&o("down"),y.key==="ArrowLeft"&&o("left"),y.key==="ArrowRight"&&o("right")},m=(y,v,h,c)=>{if(h.x===y&&h.y===v)return"player";const I=J.find(f=>f.id===c);return I.rocks.find(f=>f.x===y&&f.y===v)?"rock":I.exits.find(f=>f.x===y&&f.y===v)?"exit":""},d=()=>{const y=J.find(v=>v.id===s).exits.find(v=>v.x===t.x&&v.y===t.y);if(g<K.find(v=>v.id===y.destGridId).expReq){alert("Not enough experience to enter!");return}y&&(l(1,s=y.destGridId),localStorage.setItem("curStageId",s),l(2,a=K.find(v=>v.id===s).name),l(0,t=y.spawn))},o=y=>{let v={...t};if(y==="up"&&(v.y-=1),y==="down"&&(v.y+=1),y==="left"&&(v.x-=1),y==="right"&&(v.x+=1),v.x<0||v.x>=j||v.y<0||v.y>=j)return;const h=J.find(c=>c.id===s);h.rocks.find(c=>c.x===v.x&&c.y===v.y)||l(0,t=v),h.exits.find(c=>c.x===t.x&&c.y===t.y)&&d()};return pe(()=>{ee.set(!0),te.set(!0),localStorage.getItem("curStageId")&&(l(1,s=parseInt(localStorage.getItem("curStageId"))),l(2,a=K.find(y=>y.id===s).name)),localStorage.getItem("playerExperience")&&(g=parseInt(localStorage.getItem("playerExperience"))),localStorage.getItem("drachmas")&&l(4,E=parseInt(localStorage.getItem("drachmas"))),localStorage.getItem("chosenRelicId")&&l(5,u=W.find(y=>y.id===parseInt(localStorage.getItem("chosenRelicId")))),typeof window<"u"&&window.addEventListener("keydown",b)}),ge(()=>{ee.set(!1),te.set(!1),typeof window<"u"&&window.removeEventListener("keydown",b)}),[t,s,a,r,E,u,m,o,()=>o("left"),()=>o("up"),()=>o("down"),()=>o("right"),()=>l(3,r=!r),()=>Ee("/practice-project-sveltekit-app/game")]}class qe extends _e{constructor(e){super(),me(this,e,Ae,Te,he,{})}}export{qe as component};
