import{s as dt,d as Ae,e as ct,n as ot,r as ft,o as gt,f as ht,i as kt}from"../chunks/scheduler.BoReh3vH.js";import{S as _t,i as vt,e as d,t as E,s as T,c as f,a as M,b,d as v,f as D,y as Se,o,z as C,g as yt,h as a,A as ye,j as Y}from"../chunks/index.BklZDJd0.js";import{s as nt,r as it}from"../chunks/relics.Bej4_qsT.js";import{i as mt}from"../chunks/store.Cn0GNUQE.js";import{b as B,g as Mt}from"../chunks/entry.37B9C0mI.js";const We=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],pt=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}],ut=(e,c)=>{try{const P=[{label:"Name",value:e.name},{label:"HP",value:e.hp+c.hpMod},{label:"Speed",value:e.speed+c.speedMod},{label:"Defense",value:e.defense+c.defenseMod},{label:"Critical",value:e.critical+c.criticalMod},{label:"MP",value:e.mp+c.mpMod},{label:"MP Regen",value:e.mpRegen+c.mpRegenMod},{label:`
Attack Name`,value:e.attackName},{label:"Attack",value:e.attack+c.attackMod},{label:"Attack Type",value:e.attackType},{label:`
Special Name`,value:e.specialName},{label:"Special",value:e.special+c.specialMod},{label:"Special Cost",value:e.specialCost},{label:"Special Type",value:e.specialType}].map(V=>`${V.label}: ${V.value}`).join(`
`);alert(P)}catch(t){console.error(t)}};function It(e){let c,t,P=e[3].name+"",V,G,N,s,m,te,k,I=e[4].hp+"",L,u,_,R,ae,A,O=e[4].mp+"",K,Q,w,se,le,pe,re=e[7].hp+"",ue,ce,W,j,q,H,g,de,fe,Me,oe,Ie,X,r,i,p,n,h,U,S,y,F,z,ge,Ne,He,Ee,ze,J,Xe="Attack",Be,Z,Ze="Special",Le,he,we,Oe,ne,Ue,Ce,Ge,ie,je,Pe,qe,x,xe="Mimic Summon",Fe,$,$e="View Stats",Ye,ee,et="Travel",Je,tt;return{c(){c=d("div"),t=d("h2"),V=E(P),G=T(),N=d("div"),s=d("div"),m=E("Player HP: "),te=E(e[5]),k=E("/"),L=E(I),u=T(),_=d("div"),R=E("Player MP: "),ae=E(e[6]),A=E("/"),K=E(O),Q=T(),w=d("div"),se=E("Enemy HP: "),le=E(e[8]),pe=E("/"),ue=E(re),ce=T(),W=d("div"),j=d("div"),q=d("div"),H=d("div"),g=d("img"),Me=T(),oe=d("div"),Ie=T(),X=d("div"),i=T(),p=d("div"),n=d("img"),S=T(),y=d("div"),F=T(),z=d("div"),ge=d("div"),He=T(),Ee=d("div"),ze=T(),J=d("button"),J.textContent=Xe,Be=T(),Z=d("button"),Z.textContent=Ze,Le=T(),he=d("div"),we=E(e[9]),Oe=T(),ne=d("div"),Ue=E("Experience: "),Ce=E(e[0]),Ge=T(),ie=d("div"),je=E("Drachmas: "),Pe=E(e[1]),qe=T(),x=d("button"),x.textContent=xe,Fe=T(),$=d("button"),$.textContent=$e,Ye=T(),ee=d("button"),ee.textContent=et,this.h()},l(me){c=f(me,"DIV",{class:!0});var l=M(c);t=f(l,"H2",{});var at=M(t);V=b(at,P),at.forEach(v),G=D(l),N=f(l,"DIV",{class:!0});var ke=M(N);s=f(ke,"DIV",{});var Te=M(s);m=b(Te,"Player HP: "),te=b(Te,e[5]),k=b(Te,"/"),L=b(Te,I),Te.forEach(v),u=D(ke),_=f(ke,"DIV",{});var be=M(_);R=b(be,"Player MP: "),ae=b(be,e[6]),A=b(be,"/"),K=b(be,O),be.forEach(v),Q=D(ke),w=f(ke,"DIV",{});var De=M(w);se=b(De,"Enemy HP: "),le=b(De,e[8]),pe=b(De,"/"),ue=b(De,re),De.forEach(v),ke.forEach(v),ce=D(l),W=f(l,"DIV",{class:!0});var st=M(W);j=f(st,"DIV",{class:!0});var Ve=M(j);q=f(Ve,"DIV",{class:!0});var Re=M(q);H=f(Re,"DIV",{class:!0});var _e=M(H);g=f(_e,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Me=D(_e),oe=f(_e,"DIV",{class:!0}),M(oe).forEach(v),Ie=D(_e),X=f(_e,"DIV",{class:!0}),M(X).forEach(v),_e.forEach(v),i=D(Re),p=f(Re,"DIV",{class:!0});var ve=M(p);n=f(ve,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),S=D(ve),y=f(ve,"DIV",{class:!0}),M(y).forEach(v),F=D(ve),z=f(ve,"DIV",{class:!0});var lt=M(z);ge=f(lt,"DIV",{class:!0}),M(ge).forEach(v),lt.forEach(v),ve.forEach(v),Re.forEach(v),He=D(Ve),Ee=f(Ve,"DIV",{class:!0}),M(Ee).forEach(v),Ve.forEach(v),st.forEach(v),ze=D(l),J=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Se(J)!=="svelte-19y3ioo"&&(J.textContent=Xe),Be=D(l),Z=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Se(Z)!=="svelte-172d9ub"&&(Z.textContent=Ze),Le=D(l),he=f(l,"DIV",{class:!0});var rt=M(he);we=b(rt,e[9]),rt.forEach(v),Oe=D(l),ne=f(l,"DIV",{class:!0});var Ke=M(ne);Ue=b(Ke,"Experience: "),Ce=b(Ke,e[0]),Ke.forEach(v),Ge=D(l),ie=f(l,"DIV",{class:!0});var Qe=M(ie);je=b(Qe,"Drachmas: "),Pe=b(Qe,e[1]),Qe.forEach(v),qe=D(l),x=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Se(x)!=="svelte-zspdcm"&&(x.textContent=xe),Fe=D(l),$=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Se($)!=="svelte-1wutj5b"&&($.textContent=$e),Ye=D(l),ee=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Se(ee)!=="svelte-1hg8zdr"&&(ee.textContent=et),l.forEach(v),this.h()},h(){o(N,"class","stats svelte-1isd0ku"),Ae(g.src,de=B+"/game/"+e[4].img)||o(g,"src",de),o(g,"width","128px"),o(g,"height","128px"),o(g,"alt",fe=e[4].name),o(g,"class","svelte-1isd0ku"),C(g,"attack",e[10]),C(g,"hurt",e[12]),C(g,"aura",!e[11]),C(g,"player-using-special",e[11]),o(oe,"class","shadow svelte-1isd0ku"),o(X,"class",r=ct(e[11]?e[4].specialEffect:"")+" svelte-1isd0ku"),o(H,"class","creature player-creature svelte-1isd0ku"),Ae(n.src,h=B+"/game/"+e[7].img)||o(n,"src",h),o(n,"width","128px"),o(n,"height","128px"),o(n,"alt",U=e[7].name),o(n,"class","svelte-1isd0ku"),C(n,"enemy-attack",e[12]),C(n,"enemy-hurt",e[10]),C(n,"enemy-spawning",e[13]),o(y,"class","shadow svelte-1isd0ku"),o(ge,"class",Ne=e[13]?"enemy-spawn":""),o(z,"class","enemy-spawn-container svelte-1isd0ku"),o(p,"class","creature enemy-creature svelte-1isd0ku"),o(q,"class","creatures-container svelte-1isd0ku"),o(Ee,"class","floor svelte-1isd0ku"),o(j,"class","battlefield svelte-1isd0ku"),o(W,"class","battle-container svelte-1isd0ku"),o(J,"class","svelte-1isd0ku"),o(Z,"class","svelte-1isd0ku"),o(he,"class","combat-alert svelte-1isd0ku"),o(ne,"class","experience svelte-1isd0ku"),o(ie,"class","drachmas svelte-1isd0ku"),o(x,"class","svelte-1isd0ku"),o($,"class","svelte-1isd0ku"),o(ee,"class","svelte-1isd0ku"),o(c,"class","game-container svelte-1isd0ku")},m(me,l){yt(me,c,l),a(c,t),a(t,V),a(c,G),a(c,N),a(N,s),a(s,m),a(s,te),a(s,k),a(s,L),a(N,u),a(N,_),a(_,R),a(_,ae),a(_,A),a(_,K),a(N,Q),a(N,w),a(w,se),a(w,le),a(w,pe),a(w,ue),a(c,ce),a(c,W),a(W,j),a(j,q),a(q,H),a(H,g),a(H,Me),a(H,oe),a(H,Ie),a(H,X),a(q,i),a(q,p),a(p,n),a(p,S),a(p,y),a(p,F),a(p,z),a(z,ge),a(j,He),a(j,Ee),a(c,ze),a(c,J),a(c,Be),a(c,Z),a(c,Le),a(c,he),a(he,we),a(c,Oe),a(c,ne),a(ne,Ue),a(ne,Ce),a(c,Ge),a(c,ie),a(ie,je),a(ie,Pe),a(c,qe),a(c,x),a(c,Fe),a(c,$),a(c,Ye),a(c,ee),Je||(tt=[ye(J,"click",e[16]),ye(J,"contextmenu",e[17]),ye(Z,"click",e[18]),ye(x,"click",e[15]),ye($,"click",function(){kt(ut(e[4],e[2]))&&ut(e[4],e[2]).apply(this,arguments)}),ye(ee,"click",e[19])],Je=!0)},p(me,l){e=me,l[0]&8&&P!==(P=e[3].name+"")&&Y(V,P),l[0]&32&&Y(te,e[5]),l[0]&16&&I!==(I=e[4].hp+"")&&Y(L,I),l[0]&64&&Y(ae,e[6]),l[0]&16&&O!==(O=e[4].mp+"")&&Y(K,O),l[0]&256&&Y(le,e[8]),l[0]&128&&re!==(re=e[7].hp+"")&&Y(ue,re),l[0]&16&&!Ae(g.src,de=B+"/game/"+e[4].img)&&o(g,"src",de),l[0]&16&&fe!==(fe=e[4].name)&&o(g,"alt",fe),l[0]&1024&&C(g,"attack",e[10]),l[0]&4096&&C(g,"hurt",e[12]),l[0]&2048&&C(g,"aura",!e[11]),l[0]&2048&&C(g,"player-using-special",e[11]),l[0]&2064&&r!==(r=ct(e[11]?e[4].specialEffect:"")+" svelte-1isd0ku")&&o(X,"class",r),l[0]&128&&!Ae(n.src,h=B+"/game/"+e[7].img)&&o(n,"src",h),l[0]&128&&U!==(U=e[7].name)&&o(n,"alt",U),l[0]&4096&&C(n,"enemy-attack",e[12]),l[0]&1024&&C(n,"enemy-hurt",e[10]),l[0]&8192&&C(n,"enemy-spawning",e[13]),l[0]&8192&&Ne!==(Ne=e[13]?"enemy-spawn":"")&&o(ge,"class",Ne),l[0]&512&&Y(we,e[9]),l[0]&1&&Y(Ce,e[0]),l[0]&2&&Y(Pe,e[1])},i:ot,o:ot,d(me){me&&v(c),Je=!1,ft(tt)}}}function Et(e,c,t){let P=0,V=0,G=nt[0],N=We.filter(r=>r.stageId===G.id),s=N[0],m=it[0],te=!1,k=s.hp+m.hpMod,I=s.mp+m.mpMod,L=pt.filter(r=>r.stageId===G.id),u=L[Math.floor(Math.random()*L.length)],_=u.hp,R="",ae=0,A=!1,O=!1,K=!1,Q=!1,w=null,se=null,le=null,pe=null;const re=()=>{if(I!==s.mp+m.mpMod&&I+s.mpRegen+m.mpRegenMod<=s.mp+m.mpMod){t(6,I=I+s.mpRegen+m.mpRegenMod);return}t(6,I=s.mp+m.mpMod)},ue=(r,i)=>{if(k-(u.attack-u.attack*r)*i<=0){t(9,R="Defeat!"),t(5,k=0);return}t(5,k=k-(u.attack-u.attack*r)*i)},ce=(r,i,p)=>{try{const n=s.speed+m.speedMod;let h=(s.defense+m.defenseMod)/100,U=u.critical/100,S=1,y=!1;if(u.attackType==="Magic"&&(h=0),u.speed<n?y=Math.random()>=.5:y=Math.random()>=.8,ae>1&&!y&&!r&&(y=!0),!y&&r&&t(9,R="Enemy was too slow!"),!y&&!r){t(6,I=s.mp+m.mpMod),ae+=1,g(i,p);return}i===s.attackName&&re(),y&&r&&t(9,R="Both abilities succeeded."),y&&!r&&t(9,R="Your summon was too slow!"),y&&(Math.random()<=U&&(S=1.5),u.attackType==="Poison"&&S===1&&(S=1.5),ue(h,S),t(12,K=!0),le=setTimeout(()=>t(12,K=!1),500))}catch(n){console.error(n)}},W=(r,i,p,n,h)=>{h==="Lifesteal"&&p&&(k+r*i*.2>s.hp+m.hpMod?t(5,k=s.hp+m.hpMod):t(5,k=k+r*i*.2)),ce(p,n,h)},j=(r,i,p,n,h)=>{r&&(k+i*p>s.hp+m.hpMod?t(5,k=s.hp+m.hpMod):t(5,k=k+i*p)),ce(r,n,h)},q=(r,i,p,n,h,U,S)=>{if(t(6,I=I-p),S!=="Heal"){if(_-(i-i*h)*n<=0&&r){t(8,_=0),t(9,R="Victory!"),t(0,P+=u.reward*2),t(1,V+=u.reward),t(10,A=!0),w=setTimeout(()=>t(10,A=!1),500),t(11,O=!0),se=setTimeout(()=>t(11,O=!1),500);return}r&&(t(8,_=_-(i-i*h)*n),t(10,A=!0),w=setTimeout(()=>t(10,A=!1),500),t(11,O=!0),se=setTimeout(()=>t(11,O=!1),500)),W(i,n,r,U,S);return}j(r,i,n,U,S)},H=()=>{(k<=0||_<=0)&&(t(5,k=s.hp+m.hpMod),t(6,I=s.mp+m.mpMod),t(13,Q=!0),pe=setTimeout(()=>t(13,Q=!1),500),t(7,u=L[Math.floor(Math.random()*L.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+u.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+u.img.slice(0,-4)+"_attack.png"})`),t(8,_=u.hp),t(9,R=""))},g=(r,i)=>{try{const p=s.attack+m.attackMod,n=s.speed+m.speedMod,h=(s.critical+m.criticalMod)/100;let U=s.special+m.specialMod,S=s.specialCost,y=u.defense/100,F=!1,z=1;if(Q)return;if(H(),i==="Magic"&&(y=0),n<u.speed?F=Math.random()>=.5:F=Math.random()>=.8,Math.random()<=h&&(z=1.5),i==="Poison"&&z===1&&(z=1.5),r===s.attackName){if(_-(p-p*y)*z<=0&&F){t(8,_=0),t(9,R="Victory!"),t(0,P+=u.reward*2),t(1,V+=u.reward),t(10,A=!0),w=setTimeout(()=>t(10,A=!1),500);return}F&&(t(8,_=_-(p-p*y)*z),t(10,A=!0),w=setTimeout(()=>t(10,A=!1),500)),ce(F,r,i);return}I>=S?q(F,U,S,z,y,r,i):t(9,R="Not enough MP!")}catch(p){console.error(p)}},de=()=>{try{const r=u;t(5,k=0),H(),t(4,s=We.find(i=>i.id===r.id)),t(5,k=s.hp+m.hpMod),t(6,I=s.mp+m.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+s.img.slice(0,-4)+"_hurt.png"})`)}catch(r){console.error(r)}},fe=()=>{te&&(localStorage.setItem("drachmas",V),localStorage.setItem("playerExperience",P),localStorage.setItem("chosenRelicId",m.id))};gt(()=>{try{const r=localStorage.getItem("drachmas"),i=localStorage.getItem("playerExperience"),p=localStorage.getItem("chosenRelicId"),n=localStorage.getItem("curStageId");mt.set(!0),r&&t(1,V=parseInt(r)),i&&t(0,P=parseInt(i)),p&&t(2,m=it.find(h=>h.id===parseInt(p))),n&&t(3,G=nt.find(h=>h.id===parseInt(n))),N=We.filter(h=>h.stageId===G.id),t(4,s=N[0]),t(5,k=s.hp+m.hpMod),t(6,I=s.mp+m.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+s.img.slice(0,-4)+"_hurt.png"})`),L=pt.filter(h=>h.stageId===G.id),t(7,u=L[Math.floor(Math.random()*L.length)]),t(8,_=u.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+u.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+u.img.slice(0,-4)+"_attack.png"})`),te=!0}catch(r){console.error(r)}}),ht(()=>{mt.set(!1),clearTimeout(w),clearTimeout(se),clearTimeout(le),clearTimeout(pe)});const Me=()=>g(s.attackName,s.attackType),oe=r=>{r.preventDefault(),g(s.specialName,s.specialType)},Ie=()=>g(s.specialName,s.specialType),X=()=>{Mt(B+"/game/world")};return e.$$.update=()=>{e.$$.dirty[0]&7&&fe()},[P,V,m,G,s,k,I,u,_,R,A,O,K,Q,g,de,Me,oe,Ie,X]}class wt extends _t{constructor(c){super(),vt(this,c,Et,It,dt,{},null,[-1,-1])}}export{wt as component};
