import{s as Ae,d as ue,e as De,n as we,r as He,o as ze,f as Be}from"../chunks/scheduler.BoReh3vH.js";import{S as Le,i as Ge,e as M,t as w,s as S,c as I,a as q,b as R,d as N,f as D,y as de,o as i,z as X,g as Oe,h as s,A as fe,j as ee}from"../chunks/index.BklZDJd0.js";import{s as qe,r as Re}from"../chunks/relics.CGlwEWe2.js";import{i as Ve}from"../chunks/store.Cn0GNUQE.js";const Ee=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"}],je=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50},{id:7,stageId:3,name:"Skeleton",img:"skeleton_creature_bow.png",reward:12,hp:100,attack:40,attackType:"Normal",speed:70,defense:20,critical:50}];function Ue(o){let n,e,V=o[2].name+"",B,L,C,t,r,Z,g,_,j,p,v,E,te,b,F,P,h,J,x,ce,K,G,ae,oe,y,$,Y,se,A,ie="Attack",pe,O,me="Special",ne,a,c,m,u,d,H,T,k,U,z,ge,Q,Te="Mimic Summon",he,W,Ce="View Stats",ke,be;return{c(){n=M("div"),e=M("h2"),B=w(V),L=S(),C=M("div"),t=M("div"),r=w("Player HP: "),Z=w(o[4]),g=S(),_=M("div"),j=w("Player MP: "),p=w(o[5]),v=S(),E=M("div"),te=w("Enemy HP: "),b=w(o[7]),F=S(),P=M("div"),h=M("img"),ce=S(),K=M("div"),G=M("div"),oe=S(),y=M("img"),se=S(),A=M("button"),A.textContent=ie,pe=S(),O=M("button"),O.textContent=me,ne=S(),a=M("div"),c=w(o[8]),m=S(),u=M("div"),d=w("Experience: "),H=w(o[0]),T=S(),k=M("div"),U=w("Drachmas: "),z=w(o[1]),ge=S(),Q=M("button"),Q.textContent=Te,he=S(),W=M("button"),W.textContent=Ce,this.h()},l(f){n=I(f,"DIV",{class:!0});var l=q(n);e=I(l,"H2",{});var Pe=q(e);B=R(Pe,V),Pe.forEach(N),L=D(l),C=I(l,"DIV",{class:!0});var re=q(C);t=I(re,"DIV",{});var _e=q(t);r=R(_e,"Player HP: "),Z=R(_e,o[4]),_e.forEach(N),g=D(re),_=I(re,"DIV",{});var ye=q(_);j=R(ye,"Player MP: "),p=R(ye,o[5]),ye.forEach(N),v=D(re),E=I(re,"DIV",{});var Me=q(E);te=R(Me,"Enemy HP: "),b=R(Me,o[7]),Me.forEach(N),re.forEach(N),F=D(l),P=I(l,"DIV",{class:!0});var le=q(P);h=I(le,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),ce=D(le),K=I(le,"DIV",{class:!0});var Se=q(K);G=I(Se,"DIV",{class:!0}),q(G).forEach(N),Se.forEach(N),oe=D(le),y=I(le,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),le.forEach(N),se=D(l),A=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),de(A)!=="svelte-ig8gg4"&&(A.textContent=ie),pe=D(l),O=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),de(O)!=="svelte-172d9ub"&&(O.textContent=me),ne=D(l),a=I(l,"DIV",{class:!0});var Ne=q(a);c=R(Ne,o[8]),Ne.forEach(N),m=D(l),u=I(l,"DIV",{class:!0});var Ie=q(u);d=R(Ie,"Experience: "),H=R(Ie,o[0]),Ie.forEach(N),T=D(l),k=I(l,"DIV",{class:!0});var ve=q(k);U=R(ve,"Drachmas: "),z=R(ve,o[1]),ve.forEach(N),ge=D(l),Q=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),de(Q)!=="svelte-lzajz"&&(Q.textContent=Te),he=D(l),W=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),de(W)!=="svelte-z72cka"&&(W.textContent=Ce),l.forEach(N),this.h()},h(){i(C,"class","stats svelte-1qmif5p"),ue(h.src,J=o[3].img)||i(h,"src",J),i(h,"width","128px"),i(h,"height","128px"),i(h,"alt",x=o[3].name),i(h,"class","svelte-1qmif5p"),X(h,"attack",o[9]),X(h,"hurt",o[11]),i(G,"class",ae=De(o[10]?o[3].specialEffect:"")+" svelte-1qmif5p"),i(K,"class","special-effect-container svelte-1qmif5p"),i(y,"class","enemy-creature svelte-1qmif5p"),ue(y.src,$=o[6].img)||i(y,"src",$),i(y,"width","128px"),i(y,"height","128px"),i(y,"alt",Y=o[6].name),X(y,"enemy-attack",o[11]),X(y,"enemy-hurt",o[9]),i(P,"class","creatures svelte-1qmif5p"),i(A,"class","svelte-1qmif5p"),i(O,"class","svelte-1qmif5p"),i(a,"class","combat-alert svelte-1qmif5p"),i(u,"class","experience svelte-1qmif5p"),i(k,"class","drachmas svelte-1qmif5p"),i(Q,"class","svelte-1qmif5p"),i(W,"class","svelte-1qmif5p"),i(n,"class","game-container svelte-1qmif5p")},m(f,l){Oe(f,n,l),s(n,e),s(e,B),s(n,L),s(n,C),s(C,t),s(t,r),s(t,Z),s(C,g),s(C,_),s(_,j),s(_,p),s(C,v),s(C,E),s(E,te),s(E,b),s(n,F),s(n,P),s(P,h),s(P,ce),s(P,K),s(K,G),s(P,oe),s(P,y),s(n,se),s(n,A),s(n,pe),s(n,O),s(n,ne),s(n,a),s(a,c),s(n,m),s(n,u),s(u,d),s(u,H),s(n,T),s(n,k),s(k,U),s(k,z),s(n,ge),s(n,Q),s(n,he),s(n,W),ke||(be=[fe(A,"click",o[16]),fe(O,"click",o[17]),fe(Q,"click",o[18]),fe(W,"click",o[19])],ke=!0)},p(f,l){l[0]&4&&V!==(V=f[2].name+"")&&ee(B,V),l[0]&16&&ee(Z,f[4]),l[0]&32&&ee(p,f[5]),l[0]&128&&ee(b,f[7]),l[0]&8&&!ue(h.src,J=f[3].img)&&i(h,"src",J),l[0]&8&&x!==(x=f[3].name)&&i(h,"alt",x),l[0]&512&&X(h,"attack",f[9]),l[0]&2048&&X(h,"hurt",f[11]),l[0]&1032&&ae!==(ae=De(f[10]?f[3].specialEffect:"")+" svelte-1qmif5p")&&i(G,"class",ae),l[0]&64&&!ue(y.src,$=f[6].img)&&i(y,"src",$),l[0]&64&&Y!==(Y=f[6].name)&&i(y,"alt",Y),l[0]&2048&&X(y,"enemy-attack",f[11]),l[0]&512&&X(y,"enemy-hurt",f[9]),l[0]&256&&ee(c,f[8]),l[0]&1&&ee(H,f[0]),l[0]&2&&ee(z,f[1])},i:we,o:we,d(f){f&&N(n),ke=!1,He(be)}}}function Fe(o,n,e){let V=0,B=0,L=qe[0],C=Ee.filter(a=>a.stageId===L.id),t=C[0],r=Re[0],Z=!1,g=t.hp+r.hpMod,_=t.mp+r.mpMod,j=je.filter(a=>a.stageId===L.id),p=j[Math.floor(Math.random()*j.length)],v=p.hp,E="",te=0,b=!1,F=!1,P=!1,h=null,J=null,x=null;const ce=()=>{if(_!==t.mp+r.mpMod&&_+t.mpRegen+r.mpRegenMod<=t.mp+r.mpMod){e(5,_=_+t.mpRegen+r.mpRegenMod);return}e(5,_=t.mp+r.mpMod)},K=(a,c)=>{if(g-(p.attack-p.attack*a)*c<=0){e(8,E="Defeat!"),e(4,g=0);return}e(4,g=g-(p.attack-p.attack*a)*c)},G=(a,c,m)=>{try{const u=t.speed+r.speedMod;let d=(t.defense+r.defenseMod)/100,H=p.critical/100,T=1,k=!1;if(p.attackType==="Magic"&&(d=0),p.speed<u?k=Math.random()>=.5:k=Math.random()>=.8,te>1&&!k&&!a&&(k=!0),!k&&a&&e(8,E="Enemy was too slow!"),!k&&!a){e(5,_=t.mp+r.mpMod),te+=1,Y(c,m);return}c===t.attackName&&ce(),k&&a&&e(8,E="Both abilities succeeded."),k&&!a&&e(8,E="Your summon was too slow!"),k&&(Math.random()<=H&&(T=1.5),p.attackType==="Poison"&&T===1&&(T=1.5),K(d,T),e(11,P=!0),x=setTimeout(()=>e(11,P=!1),500))}catch(u){console.error(u)}},ae=(a,c,m,u,d)=>{d==="Lifesteal"&&m&&(g+a*c*.2>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+a*c*.2)),G(m,u,d)},oe=(a,c,m,u,d)=>{a&&(g+c*m>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+c*m)),G(a,u,d)},y=(a,c,m,u,d,H,T)=>{if(e(5,_=_-m),T!=="Heal"){if(v-(c-c*d)*u<=0&&a){e(7,v=0),e(8,E="Victory!"),e(0,V+=p.reward*2),e(1,B+=p.reward),e(9,b=!0),h=setTimeout(()=>e(9,b=!1),500),e(10,F=!0),J=setTimeout(()=>e(10,F=!1),500);return}a&&(e(7,v=v-(c-c*d)*u),e(9,b=!0),h=setTimeout(()=>e(9,b=!1),500),e(10,F=!0),J=setTimeout(()=>e(10,F=!1),500)),ae(c,u,a,H,T);return}oe(a,c,u,H,T)},$=()=>{(g<=0||v<=0)&&(e(4,g=t.hp+r.hpMod),e(5,_=t.mp+r.mpMod),e(6,p=j[Math.floor(Math.random()*j.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_attack.png"})`),e(7,v=p.hp),e(8,E=""))},Y=(a,c)=>{try{const m=t.attack+r.attackMod,u=t.speed+r.speedMod,d=(t.critical+r.criticalMod)/100;let H=t.special+r.specialMod,T=t.specialCost,k=p.defense/100,U=!1,z=1;if($(),c==="Magic"&&(k=0),u<p.speed?U=Math.random()>=.5:U=Math.random()>=.8,Math.random()<=d&&(z=1.5),c==="Poison"&&z===1&&(z=1.5),a===t.attackName){if(v-(m-m*k)*z<=0&&U){e(7,v=0),e(8,E="Victory!"),e(0,V+=p.reward*2),e(1,B+=p.reward),e(9,b=!0),h=setTimeout(()=>e(9,b=!1),500);return}U&&(e(7,v=v-(m-m*k)*z),e(9,b=!0),h=setTimeout(()=>e(9,b=!1),500)),G(U,a,c);return}_>=T?y(U,H,T,z,k,a,c):e(8,E="Not enough MP!")}catch(m){console.error(m)}},se=()=>{try{const a=p;e(4,g=0),$(),e(3,t=Ee.find(c=>c.id===a.id)),e(4,g=t.hp+r.hpMod),e(5,_=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(a){console.error(a)}},A=()=>{try{const c=[{label:"Name",value:t.name},{label:"HP",value:t.hp+r.hpMod},{label:"Speed",value:t.speed+r.speedMod},{label:"Defense",value:t.defense+r.defenseMod},{label:"Critical",value:t.critical+r.criticalMod},{label:"MP",value:t.mp+r.mpMod},{label:"MP Regen",value:t.mpRegen+r.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+r.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+r.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(m=>`${m.label}: ${m.value}`).join(`
`);alert(c)}catch(a){console.error(a)}},ie=()=>{Z&&(localStorage.setItem("drachmas",B),localStorage.setItem("playerExperience",V),localStorage.setItem("chosenRelicId",r.id))};ze(()=>{try{const a=localStorage.getItem("drachmas"),c=localStorage.getItem("playerExperience"),m=localStorage.getItem("chosenRelicId"),u=localStorage.getItem("curStageId");Ve.set(!0),a&&e(1,B=parseInt(a)),c&&e(0,V=parseInt(c)),m&&e(15,r=Re.find(d=>d.id===parseInt(m))),u&&e(2,L=qe.find(d=>d.id===parseInt(u))),C=Ee.filter(d=>d.stageId===L.id),e(3,t=C[0]),e(4,g=t.hp+r.hpMod),e(5,_=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),j=je.filter(d=>d.stageId===L.id),e(6,p=j[Math.floor(Math.random()*j.length)]),e(7,v=p.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+p.img.slice(0,-4)+"_attack.png"})`),Z=!0}catch(a){console.error(a)}}),Be(()=>{Ve.set(!1),clearTimeout(h),clearTimeout(J),clearTimeout(x)});const pe=()=>Y(t.attackName,t.attackType),O=()=>Y(t.specialName,t.specialType),me=()=>se(),ne=()=>A();return o.$$.update=()=>{o.$$.dirty[0]&32771&&ie()},[V,B,L,t,g,_,p,v,E,b,F,P,Y,se,A,r,pe,O,me,ne]}class We extends Le{constructor(n){super(),Ge(this,n,Fe,Ue,Ae,{},null,[-1,-1])}}export{We as component};
