import{s as ye,d as pe,e as ge,n as _e,r as Ee,o as be,f as Ce}from"../chunks/scheduler.BoReh3vH.js";import{S as Te,i as De,e as b,t as V,s as z,c as C,a as A,b as R,d as P,f as L,y as ke,o as p,z as U,g as Ie,h as t,A as Me,j as $}from"../chunks/index.DhL7nboW.js";import{i as ve}from"../chunks/store.BxR7W1V8.js";const re=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function Pe(l){let n,e,H,q,s,m,i,y,K,o,g,T,j,D,E,M,O,Y,B,S,Q,F,_,W,X,ee,I,ae="Attack",te,r,c="Special Attack",f,u,v,N,h,k,w,G,J,le,se,oe,fe;return{c(){n=b("div"),e=b("div"),H=b("div"),q=V("Player HP: "),s=V(l[2]),m=z(),i=b("div"),y=V("Player MP: "),K=V(l[3]),o=z(),g=b("div"),T=V("Enemy HP: "),j=V(l[5]),D=z(),E=b("div"),M=b("img"),Y=z(),B=b("div"),S=b("div"),F=z(),_=b("img"),ee=z(),I=b("button"),I.textContent=ae,te=z(),r=b("button"),r.textContent=c,f=z(),u=b("div"),v=V(l[6]),N=z(),h=b("div"),k=V("Experience: "),w=V(l[0]),G=z(),J=b("div"),le=V("Drachmas: "),se=V(l[1]),this.h()},l(d){n=C(d,"DIV",{class:!0});var a=A(n);e=C(a,"DIV",{class:!0});var Z=A(e);H=C(Z,"DIV",{});var ce=A(H);q=R(ce,"Player HP: "),s=R(ce,l[2]),ce.forEach(P),m=L(Z),i=C(Z,"DIV",{});var me=A(i);y=R(me,"Player MP: "),K=R(me,l[3]),me.forEach(P),o=L(Z),g=C(Z,"DIV",{});var ne=A(g);T=R(ne,"Enemy HP: "),j=R(ne,l[5]),ne.forEach(P),Z.forEach(P),D=L(a),E=C(a,"DIV",{class:!0});var x=A(E);M=C(x,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),Y=L(x),B=C(x,"DIV",{class:!0});var de=A(B);S=C(de,"DIV",{class:!0}),A(S).forEach(P),de.forEach(P),F=L(x),_=C(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(P),ee=L(a),I=C(a,"BUTTON",{"data-svelte-h":!0}),ke(I)!=="svelte-ig8gg4"&&(I.textContent=ae),te=L(a),r=C(a,"BUTTON",{"data-svelte-h":!0}),ke(r)!=="svelte-11zl5of"&&(r.textContent=c),f=L(a),u=C(a,"DIV",{class:!0});var he=A(u);v=R(he,l[6]),he.forEach(P),N=L(a),h=C(a,"DIV",{class:!0});var ie=A(h);k=R(ie,"Experience: "),w=R(ie,l[0]),ie.forEach(P),G=L(a),J=C(a,"DIV",{class:!0});var ue=A(J);le=R(ue,"Drachmas: "),se=R(ue,l[1]),ue.forEach(P),a.forEach(P),this.h()},h(){p(e,"class","stats svelte-3vovmb"),pe(M.src,O=l[10].img)||p(M,"src",O),p(M,"alt",l[10].name),p(M,"width","128px"),p(M,"height","128px"),p(M,"class","svelte-3vovmb"),U(M,"attack",l[7]),U(M,"hurt",l[9]),p(S,"class",Q=ge(l[8]?l[10].specialEffect:"")+" svelte-3vovmb"),p(B,"class","special-effect-container svelte-3vovmb"),p(_,"class","enemy-creature svelte-3vovmb"),pe(_.src,W=l[4].img)||p(_,"src",W),p(_,"alt",X=l[4].name),p(_,"width","128px"),p(_,"height","128px"),U(_,"enemy-attack",l[9]),U(_,"enemy-hurt",l[7]),p(E,"class","creatures svelte-3vovmb"),p(u,"class","combat-alert svelte-3vovmb"),p(h,"class","experience svelte-3vovmb"),p(J,"class","drachmas svelte-3vovmb"),p(n,"class","game-container svelte-3vovmb")},m(d,a){Ie(d,n,a),t(n,e),t(e,H),t(H,q),t(H,s),t(e,m),t(e,i),t(i,y),t(i,K),t(e,o),t(e,g),t(g,T),t(g,j),t(n,D),t(n,E),t(E,M),t(E,Y),t(E,B),t(B,S),t(E,F),t(E,_),t(n,ee),t(n,I),t(n,te),t(n,r),t(n,f),t(n,u),t(u,v),t(n,N),t(n,h),t(h,k),t(h,w),t(n,G),t(n,J),t(J,le),t(J,se),oe||(fe=[Me(I,"click",l[12]),Me(r,"click",l[13])],oe=!0)},p(d,[a]){a&4&&$(s,d[2]),a&8&&$(K,d[3]),a&32&&$(j,d[5]),a&128&&U(M,"attack",d[7]),a&512&&U(M,"hurt",d[9]),a&256&&Q!==(Q=ge(d[8]?d[10].specialEffect:"")+" svelte-3vovmb")&&p(S,"class",Q),a&16&&!pe(_.src,W=d[4].img)&&p(_,"src",W),a&16&&X!==(X=d[4].name)&&p(_,"alt",X),a&512&&U(_,"enemy-attack",d[9]),a&128&&U(_,"enemy-hurt",d[7]),a&64&&$(v,d[6]),a&1&&$(w,d[0]),a&2&&$(se,d[1])},i:_e,o:_e,d(d){d&&P(n),oe=!1,Ee(fe)}}}function we(l,n,e){let H=0,q=0,s={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},m={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},i=s.hp+m.hpMod,y=s.mp+m.mpMod,K=y,o=re[Math.floor(Math.random()*re.length)],g=o.hp,T="",j=0,D=!1,E=!1,M=!1,O=null,Y=null,B=null;const S=()=>{if(y!==s.mp+m.mpMod&&y+s.mpRegen+m.mpRegenMod<=s.mp+m.mpMod){e(3,y=y+s.mpRegen+m.mpRegenMod);return}e(3,y=s.mp+m.mpMod)},Q=(r,c)=>{if(i-(o.attack-o.attack*r)*c<=0){e(6,T="Defeat!"),e(2,i=0);return}e(2,i=i-(o.attack-o.attack*r)*c)},F=(r,c,f)=>{try{const u=s.speed+m.speedMod;let v=(s.defense+m.defenseMod)/100,N=o.critical/100,h=1,k=!1;if(o.attackType==="Magic"&&(v=0),o.speed<u?k=Math.random()>=.5:k=Math.random()>=.8,j>1&&!k&&!r&&(k=!0),!k&&r&&e(6,T="Enemy was too slow!"),!k&&!r){e(3,y=K),j+=1,I(c,f);return}c===s.attackName&&S(),k&&r&&e(6,T="Both abilities succeeded."),k&&!r&&e(6,T="Your summon was too slow!"),k&&(Math.random()<=N&&(h=1.5),o.attackType==="Poison"&&h===1&&(h=1.5),Q(v,h),e(9,M=!0),B=setTimeout(()=>e(9,M=!1),500))}catch(u){console.error(u)}},_=(r,c,f,u,v)=>{v==="Lifesteal"&&f&&(i+r*c*.2>s.hp+m.hpMod?e(2,i=s.hp+m.hpMod):e(2,i=i+r*c*.2)),F(f,u,v)},W=(r,c,f,u,v)=>{r&&(i+c*f>s.hp+m.hpMod?e(2,i=s.hp+m.hpMod):e(2,i=i+c*f)),F(r,u,v)},X=(r,c,f,u,v,N,h)=>{if(e(3,y=y-f),h!=="Heal"){if(g-(c-c*v)*u<=0&&r){e(5,g=0),e(6,T="Victory!"),e(0,H+=o.reward*2),e(1,q+=o.reward),e(7,D=!0),O=setTimeout(()=>e(7,D=!1),500),e(8,E=!0),Y=setTimeout(()=>e(8,E=!1),500);return}r&&(e(5,g=g-(c-c*v)*u),e(7,D=!0),O=setTimeout(()=>e(7,D=!1),500),e(8,E=!0),Y=setTimeout(()=>e(8,E=!1),500)),_(c,u,r,N,h);return}W(r,c,u,N,h)},ee=()=>{(i<=0||g<=0)&&(e(2,i=s.hp+m.hpMod),e(3,y=s.mp+m.mpMod),e(4,o=re[Math.floor(Math.random()*re.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${o.img.slice(0,-4)+"_attack.png"})`),e(5,g=o.hp),e(6,T=""))},I=(r,c)=>{try{const f=s.attack+m.attackMod,u=s.speed+m.speedMod,v=(s.critical+m.criticalMod)/100;let N=s.special+m.specialMod,h=s.specialCost,k=o.defense/100,w=!1,G=1;if(ee(),c==="Magic"&&(k=0),u<o.speed?w=Math.random()>=.5:w=Math.random()>=.8,Math.random()<=v&&(G=1.5),c==="Poison"&&G===1&&(G=1.5),r===s.attackName){if(g-(f-f*k)*G<=0&&w){e(5,g=0),e(6,T="Victory!"),e(0,H+=o.reward*2),e(1,q+=o.reward),e(7,D=!0),O=setTimeout(()=>e(7,D=!1),500);return}w&&(e(5,g=g-(f-f*k)*G),e(7,D=!0),O=setTimeout(()=>e(7,D=!1),500)),F(w,r,c);return}y>=h?X(w,N,h,G,k,r,c):e(6,T="Not enough MP!")}catch(f){console.error(f)}};return be(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${s.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${o.img.slice(0,-4)+"_attack.png"})`),ve.set(!0)}),Ce(()=>{ve.set(!1),clearTimeout(O),clearTimeout(Y),clearTimeout(B)}),[H,q,i,y,o,g,T,D,E,M,s,I,()=>I(s.attackName,s.attackType),()=>I(s.specialName,s.specialType)]}class He extends Te{constructor(n){super(),De(this,n,we,Pe,ye,{})}}export{He as component};
