import{s as ie,a as me,n as ne,r as ue}from"../chunks/scheduler.CEbcw_JU.js";import{S as he,i as de,e as T,t as V,s as v,c as w,a as B,b as q,d as N,f as O,k as pe,l as g,m as L,g as ge,h as s,n as fe,j as K}from"../chunks/index.DoMf8_sW.js";function Me(l){let m,e,z,S,t,c,n,M,Y,i,h,D,U,b,E,d,A,Q,y,F,W,G,X="Attack",j,H,$="Special Attack",Z,a,r,u,p,k,I,_,f,R,P,ee,le;return{c(){m=T("div"),e=T("div"),z=T("div"),S=V("Player HP: "),t=V(l[2]),c=v(),n=T("div"),M=V("Player MP: "),Y=V(l[3]),i=v(),h=T("div"),D=V("Enemy HP: "),U=V(l[4]),b=v(),E=T("div"),d=T("img"),Q=v(),y=T("img"),W=v(),G=T("button"),G.textContent=X,j=v(),H=T("button"),H.textContent=$,Z=v(),a=T("div"),r=V(l[5]),u=v(),p=T("div"),k=V("Experience: "),I=V(l[0]),_=v(),f=T("div"),R=V("Drachmas: "),P=V(l[1]),this.h()},l(C){m=w(C,"DIV",{class:!0});var o=B(m);e=w(o,"DIV",{class:!0});var J=B(e);z=w(J,"DIV",{});var te=B(z);S=q(te,"Player HP: "),t=q(te,l[2]),te.forEach(N),c=O(J),n=w(J,"DIV",{});var se=B(n);M=q(se,"Player MP: "),Y=q(se,l[3]),se.forEach(N),i=O(J),h=w(J,"DIV",{});var ae=B(h);D=q(ae,"Enemy HP: "),U=q(ae,l[4]),ae.forEach(N),J.forEach(N),b=O(o),E=w(o,"DIV",{class:!0});var x=B(E);d=w(x,"IMG",{id:!0,src:!0,alt:!0,width:!0,height:!0,class:!0}),Q=O(x),y=w(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(N),W=O(o),G=w(o,"BUTTON",{"data-svelte-h":!0}),pe(G)!=="svelte-xzlz5g"&&(G.textContent=X),j=O(o),H=w(o,"BUTTON",{"data-svelte-h":!0}),pe(H)!=="svelte-afg87k"&&(H.textContent=$),Z=O(o),a=w(o,"DIV",{class:!0});var ce=B(a);r=q(ce,l[5]),ce.forEach(N),u=O(o),p=w(o,"DIV",{class:!0});var re=B(p);k=q(re,"Experience: "),I=q(re,l[0]),re.forEach(N),_=O(o),f=w(o,"DIV",{class:!0});var oe=B(f);R=q(oe,"Drachmas: "),P=q(oe,l[1]),oe.forEach(N),o.forEach(N),this.h()},h(){g(e,"class","stats svelte-hrzqvh"),g(d,"id","player-creature"),me(d.src,A=l[10].img)||g(d,"src",A),g(d,"alt",l[10].name),g(d,"width","128px"),g(d,"height","128px"),g(d,"class","svelte-hrzqvh"),L(d,"attack",l[6]),L(d,"damage",l[7]),g(y,"class","enemy-creature svelte-hrzqvh"),me(y.src,F=l[11].img)||g(y,"src",F),g(y,"alt",l[11].name),g(y,"width","128px"),g(y,"height","128px"),L(y,"enemy-attack",l[8]),L(y,"enemy-damage",l[9]),g(E,"class","creatures svelte-hrzqvh"),g(a,"class","combat-alert svelte-hrzqvh"),g(p,"class","experience svelte-hrzqvh"),g(f,"class","drachmas svelte-hrzqvh"),g(m,"class","game-container svelte-hrzqvh")},m(C,o){ge(C,m,o),s(m,e),s(e,z),s(z,S),s(z,t),s(e,c),s(e,n),s(n,M),s(n,Y),s(e,i),s(e,h),s(h,D),s(h,U),s(m,b),s(m,E),s(E,d),s(E,Q),s(E,y),s(m,W),s(m,G),s(m,j),s(m,H),s(m,Z),s(m,a),s(a,r),s(m,u),s(m,p),s(p,k),s(p,I),s(m,_),s(m,f),s(f,R),s(f,P),ee||(le=[fe(G,"click",l[12]),fe(H,"click",l[13])],ee=!0)},p(C,[o]){o&4&&K(t,C[2]),o&8&&K(Y,C[3]),o&16&&K(U,C[4]),o&64&&L(d,"attack",C[6]),o&128&&L(d,"damage",C[7]),o&256&&L(y,"enemy-attack",C[8]),o&512&&L(y,"enemy-damage",C[9]),o&32&&K(r,C[5]),o&1&&K(I,C[0]),o&2&&K(P,C[1])},i:ne,o:ne,d(C){C&&N(m),ee=!1,ue(le)}}}function ke(l,m,e){let z=0,S=0,t={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",special2:75,specialCost2:100,specialName2:"Sunder",specialType2:"Magic"},c={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},n=t.hp+c.hpMod,M=t.mp+c.mpMod,Y=M,i={id:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},h=i.hp,D="",U=0,b=!1,E=!1,d=!1,A=!1;const Q=()=>{if(M!==t.mp+c.mpMod&&M+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(3,M=M+t.mpRegen+c.mpRegenMod);return}e(3,M=t.mp+c.mpMod)},y=(a,r)=>{if(n-(i.attack-i.attack*a)*r<=0){e(5,D="Defeat!"),e(2,n=0),e(7,E=!0),setTimeout(()=>e(7,E=!1),500);return}e(2,n=n-(i.attack-i.attack*a)*r),e(7,E=!0),setTimeout(()=>e(7,E=!1),500)},F=(a,r,u)=>{try{const p=t.speed+c.speedMod;let k=(t.defense+c.defenseMod)/100,I=i.critical/100,_=1,f=!1;if(i.attackType==="Magic"&&(k=0),i.speed<p?f=Math.random()>=.5:f=Math.random()>=.8,U>1&&!f&&!a&&(f=!0),!f&&a&&e(5,D="Enemy was too slow!"),!f&&!a){e(3,M=Y),U+=1,j(r,u);return}r===t.attackName&&Q(),f&&a&&e(5,D="Both abilities succeeded."),f&&!a&&e(5,D="Your summon was too slow!"),f&&(Math.random()<=I&&(_=1.5),i.attackType==="Poison"&&_===1&&(_=1.5),y(k,_),e(8,d=!0),setTimeout(()=>e(8,d=!1),500))}catch(p){console.error(p)}},W=(a,r,u,p,k)=>{k==="Lifesteal"&&u&&(n+a*r*.2>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+a*r*.2)),F(u,p,k)},G=(a,r,u,p,k)=>{a&&(n+r*u>t.hp+c.hpMod?e(2,n=t.hp+c.hpMod):e(2,n=n+r*u)),F(a,p,k)},X=(a,r,u,p,k,I,_)=>{if(e(3,M=M-u),_!=="Heal"){if(h-(r-r*k)*p<=0&&a){e(4,h=0),e(5,D="Victory!"),e(0,z+=i.reward*2),e(1,S+=i.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}a&&(e(4,h=h-(r-r*k)*p),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),W(r,p,a,I,_);return}G(a,r,p,I,_)},j=(a,r)=>{try{const u=t.attack+c.attackMod,p=t.speed+c.speedMod,k=(t.critical+c.criticalMod)/100;let I=t.special+c.specialMod,_=t.specialCost,f=i.defense/100,R=!1,P=1;if(a===t.specialName2&&(I=t.special2+c.specialMod,_=t.specialCost2),r==="Magic"&&(f=0),p<i.speed?R=Math.random()>=.5:R=Math.random()>=.8,Math.random()<=k&&(P=1.5),r==="Poison"&&P===1&&(P=1.5),a===t.attackName){if(h-(u-u*f)*P<=0&&R){e(4,h=0),e(5,D="Victory!"),e(0,z+=i.reward*2),e(1,S+=i.reward),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500);return}R&&(e(4,h=h-(u-u*f)*P),e(6,b=!0),setTimeout(()=>e(6,b=!1),500),e(9,A=!0),setTimeout(()=>e(9,A=!1),500)),F(R,a,r);return}M>=_?X(R,I,_,P,f,a,r):e(5,D="Not enough MP!")}catch(u){console.error(u)}},H=()=>{(n<=0||h<=0)&&(e(2,n=t.hp+c.hpMod),e(3,M=t.mp+c.mpMod),e(4,h=i.hp),e(5,D=""))};return[z,S,n,M,h,D,b,E,d,A,t,i,()=>{H(),j(t.attackName,t.attackType)},()=>{H(),j(t.specialName,t.specialType)}]}class ye extends he{constructor(m){super(),de(this,m,ke,Me,ie,{})}}export{ye as component};
