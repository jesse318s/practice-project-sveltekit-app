import{s as Ie,d as ce,e as Ce,n as Te,r as ze,o as we,f as De}from"../chunks/scheduler.BoReh3vH.js";import{S as be,i as qe,e as v,t as q,s as R,c as C,a as V,b as j,d as D,f as N,y as ke,o as p,z as J,g as Re,h as s,A as Me,j as te}from"../chunks/index.DhL7nboW.js";import{i as Pe}from"../chunks/store.BxR7W1V8.js";const le=[{id:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"}],Ve=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],oe=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function je(a){let m,e,A,K,t,c,i,f,L,o,M,z,Q,w,y,h,H,B,X,O,U,Y,se,_,x,W,Z,b,ne="Attack",re,S,n="Special Attack",l,u,g,E,P,T,k,G,I,pe,ae,ie,F,_e="Swap Summon",me,ye;return{c(){m=v("div"),e=v("div"),A=v("div"),K=q("Player HP: "),t=q(a[3]),c=R(),i=v("div"),f=q("Player MP: "),L=q(a[4]),o=R(),M=v("div"),z=q("Enemy HP: "),Q=q(a[6]),w=R(),y=v("div"),h=v("img"),X=R(),O=v("div"),U=v("div"),se=R(),_=v("img"),Z=R(),b=v("button"),b.textContent=ne,re=R(),S=v("button"),S.textContent=n,l=R(),u=v("div"),g=q(a[7]),E=R(),P=v("div"),T=q("Experience: "),k=q(a[0]),G=R(),I=v("div"),pe=q("Drachmas: "),ae=q(a[1]),ie=R(),F=v("button"),F.textContent=_e,this.h()},l(d){m=C(d,"DIV",{class:!0});var r=V(m);e=C(r,"DIV",{class:!0});var $=V(e);A=C($,"DIV",{});var ue=V(A);K=j(ue,"Player HP: "),t=j(ue,a[3]),ue.forEach(D),c=N($),i=C($,"DIV",{});var de=V(i);f=j(de,"Player MP: "),L=j(de,a[4]),de.forEach(D),o=N($),M=C($,"DIV",{});var fe=V(M);z=j(fe,"Enemy HP: "),Q=j(fe,a[6]),fe.forEach(D),$.forEach(D),w=N(r),y=C(r,"DIV",{class:!0});var ee=V(y);h=C(ee,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),X=N(ee),O=C(ee,"DIV",{class:!0});var Ee=V(O);U=C(Ee,"DIV",{class:!0}),V(U).forEach(D),Ee.forEach(D),se=N(ee),_=C(ee,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),ee.forEach(D),Z=N(r),b=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(b)!=="svelte-ig8gg4"&&(b.textContent=ne),re=N(r),S=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(S)!=="svelte-11zl5of"&&(S.textContent=n),l=N(r),u=C(r,"DIV",{class:!0});var ve=V(u);g=j(ve,a[7]),ve.forEach(D),E=N(r),P=C(r,"DIV",{class:!0});var he=V(P);T=j(he,"Experience: "),k=j(he,a[0]),he.forEach(D),G=N(r),I=C(r,"DIV",{class:!0});var ge=V(I);pe=j(ge,"Drachmas: "),ae=j(ge,a[1]),ge.forEach(D),ie=N(r),F=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(F)!=="svelte-1c1ym4l"&&(F.textContent=_e),r.forEach(D),this.h()},h(){p(e,"class","stats svelte-qz431e"),ce(h.src,H=a[2].img)||p(h,"src",H),p(h,"width","128px"),p(h,"height","128px"),p(h,"alt",B=a[2].name),p(h,"class","svelte-qz431e"),J(h,"attack",a[8]),J(h,"hurt",a[10]),p(U,"class",Y=Ce(a[9]?a[2].specialEffect:"")+" svelte-qz431e"),p(O,"class","special-effect-container svelte-qz431e"),p(_,"class","enemy-creature svelte-qz431e"),ce(_.src,x=a[5].img)||p(_,"src",x),p(_,"width","128px"),p(_,"height","128px"),p(_,"alt",W=a[5].name),J(_,"enemy-attack",a[10]),J(_,"enemy-hurt",a[8]),p(y,"class","creatures svelte-qz431e"),p(b,"class","svelte-qz431e"),p(S,"class","svelte-qz431e"),p(u,"class","combat-alert svelte-qz431e"),p(P,"class","experience svelte-qz431e"),p(I,"class","drachmas svelte-qz431e"),p(F,"class","svelte-qz431e"),p(m,"class","game-container svelte-qz431e")},m(d,r){Re(d,m,r),s(m,e),s(e,A),s(A,K),s(A,t),s(e,c),s(e,i),s(i,f),s(i,L),s(e,o),s(e,M),s(M,z),s(M,Q),s(m,w),s(m,y),s(y,h),s(y,X),s(y,O),s(O,U),s(y,se),s(y,_),s(m,Z),s(m,b),s(m,re),s(m,S),s(m,l),s(m,u),s(u,g),s(m,E),s(m,P),s(P,T),s(P,k),s(m,G),s(m,I),s(I,pe),s(I,ae),s(m,ie),s(m,F),me||(ye=[Me(b,"click",a[13]),Me(S,"click",a[14]),Me(F,"click",a[15])],me=!0)},p(d,[r]){r&8&&te(t,d[3]),r&16&&te(L,d[4]),r&64&&te(Q,d[6]),r&4&&!ce(h.src,H=d[2].img)&&p(h,"src",H),r&4&&B!==(B=d[2].name)&&p(h,"alt",B),r&256&&J(h,"attack",d[8]),r&1024&&J(h,"hurt",d[10]),r&516&&Y!==(Y=Ce(d[9]?d[2].specialEffect:"")+" svelte-qz431e")&&p(U,"class",Y),r&32&&!ce(_.src,x=d[5].img)&&p(_,"src",x),r&32&&W!==(W=d[5].name)&&p(_,"alt",W),r&1024&&J(_,"enemy-attack",d[10]),r&256&&J(_,"enemy-hurt",d[8]),r&128&&te(g,d[7]),r&1&&te(k,d[0]),r&2&&te(ae,d[1])},i:Te,o:Te,d(d){d&&D(m),me=!1,ze(ye)}}}function Ne(a,m,e){let A=0,K=0,t=le[0],c=Ve[0],i=t.hp+c.hpMod,f=t.mp+c.mpMod,L=f,o=oe[Math.floor(Math.random()*oe.length)],M=o.hp,z="",Q=0,w=!1,y=!1,h=!1,H=null,B=null,X=null;const O=()=>{if(f!==t.mp+c.mpMod&&f+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(4,f=f+t.mpRegen+c.mpRegenMod);return}e(4,f=t.mp+c.mpMod)},U=(n,l)=>{if(i-(o.attack-o.attack*n)*l<=0){e(7,z="Defeat!"),e(3,i=0);return}e(3,i=i-(o.attack-o.attack*n)*l)},Y=(n,l,u)=>{try{const g=t.speed+c.speedMod;let E=(t.defense+c.defenseMod)/100,P=o.critical/100,T=1,k=!1;if(o.attackType==="Magic"&&(E=0),o.speed<g?k=Math.random()>=.5:k=Math.random()>=.8,Q>1&&!k&&!n&&(k=!0),!k&&n&&e(7,z="Enemy was too slow!"),!k&&!n){e(4,f=L),Q+=1,Z(l,u);return}l===t.attackName&&O(),k&&n&&e(7,z="Both abilities succeeded."),k&&!n&&e(7,z="Your summon was too slow!"),k&&(Math.random()<=P&&(T=1.5),o.attackType==="Poison"&&T===1&&(T=1.5),U(E,T),e(10,h=!0),X=setTimeout(()=>e(10,h=!1),500))}catch(g){console.error(g)}},se=(n,l,u,g,E)=>{E==="Lifesteal"&&u&&(i+n*l*.2>t.hp+c.hpMod?e(3,i=t.hp+c.hpMod):e(3,i=i+n*l*.2)),Y(u,g,E)},_=(n,l,u,g,E)=>{n&&(i+l*u>t.hp+c.hpMod?e(3,i=t.hp+c.hpMod):e(3,i=i+l*u)),Y(n,g,E)},x=(n,l,u,g,E,P,T)=>{if(e(4,f=f-u),T!=="Heal"){if(M-(l-l*E)*g<=0&&n){e(6,M=0),e(7,z="Victory!"),e(0,A+=o.reward*2),e(1,K+=o.reward),e(8,w=!0),H=setTimeout(()=>e(8,w=!1),500),e(9,y=!0),B=setTimeout(()=>e(9,y=!1),500);return}n&&(e(6,M=M-(l-l*E)*g),e(8,w=!0),H=setTimeout(()=>e(8,w=!1),500),e(9,y=!0),B=setTimeout(()=>e(9,y=!1),500)),se(l,g,n,P,T);return}_(n,l,g,P,T)},W=()=>{(i<=0||M<=0)&&(e(3,i=t.hp+c.hpMod),e(4,f=t.mp+c.mpMod),e(5,o=oe[Math.floor(Math.random()*oe.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+o.img.slice(0,-4)+"_attack.png"})`),e(6,M=o.hp),e(7,z=""))},Z=(n,l)=>{try{const u=t.attack+c.attackMod,g=t.speed+c.speedMod,E=(t.critical+c.criticalMod)/100;let P=t.special+c.specialMod,T=t.specialCost,k=o.defense/100,G=!1,I=1;if(W(),l==="Magic"&&(k=0),g<o.speed?G=Math.random()>=.5:G=Math.random()>=.8,Math.random()<=E&&(I=1.5),l==="Poison"&&I===1&&(I=1.5),n===t.attackName){if(M-(u-u*k)*I<=0&&G){e(6,M=0),e(7,z="Victory!"),e(0,A+=o.reward*2),e(1,K+=o.reward),e(8,w=!0),H=setTimeout(()=>e(8,w=!1),500);return}G&&(e(6,M=M-(u-u*k)*I),e(8,w=!0),H=setTimeout(()=>e(8,w=!1),500)),Y(G,n,l);return}f>=T?x(G,P,T,I,k,n,l):e(7,z="Not enough MP!")}catch(u){console.error(u)}},b=()=>{if(e(3,i=0),W(),t===le[0]){e(2,t=le[1]),e(3,i=t.hp+c.hpMod),e(4,f=t.mp+c.mpMod),L=f,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`);return}e(2,t=le[0]),e(3,i=t.hp+c.hpMod),e(4,f=t.mp+c.mpMod),L=f,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)};return we(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+o.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+o.img.slice(0,-4)+"_attack.png"})`),Pe.set(!0)}),De(()=>{Pe.set(!1),clearTimeout(H),clearTimeout(B),clearTimeout(X)}),[A,K,t,i,f,o,M,z,w,y,h,Z,b,()=>Z(t.attackName,t.attackType),()=>Z(t.specialName,t.specialType),()=>b()]}class Se extends be{constructor(m){super(),qe(this,m,Ne,je,Ie,{})}}export{Se as component};
