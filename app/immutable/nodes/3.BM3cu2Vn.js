import{s as xe,d as Se,e as Je,n as Ke,r as $e,o as et,f as tt}from"../chunks/scheduler.BoReh3vH.js";import{S as at,i as st,e as y,t as C,s as v,c as M,a as H,b as E,d as D,f as S,y as Te,o as d,z as L,g as lt,h as a,A as Ce,j as Y}from"../chunks/index.BklZDJd0.js";import{s as Qe,r as We}from"../chunks/relics.9MHovSS4.js";import{i as Xe}from"../chunks/store.Cn0GNUQE.js";import{b as z,g as rt}from"../chunks/entry.DM-gJ3tI.js";const Le=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],Ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function ct(c){let n,e,O=c[2].name+"",G,j,N,t,r,x,g,I=c[3].hp+"",B,m,h,R,$,V,U=c[3].mp+"",K,Q,w,ee,te,ie,ae=c[6].hp+"",ue,se,P,k,de,le,W,J,re,ke,_,fe,ge,_e,X,l,o,i,u,f="Attack",q,T,b="Special",F,A,Ee,Ne,ce,we,be,Pe,oe,De,ve,Re,ne,Oe="Mimic Summon",Ve,me,Ue="View Stats",Ae,pe,Ge="Travel",He,je;return{c(){n=y("div"),e=y("h2"),G=C(O),j=v(),N=y("div"),t=y("div"),r=C("Player HP: "),x=C(c[4]),g=C("/"),B=C(I),m=v(),h=y("div"),R=C("Player MP: "),$=C(c[5]),V=C("/"),K=C(U),Q=v(),w=y("div"),ee=C("Enemy HP: "),te=C(c[7]),ie=C("/"),ue=C(ae),se=v(),P=y("div"),k=y("img"),W=v(),J=y("div"),ke=v(),_=y("img"),_e=v(),X=y("div"),l=y("div"),i=v(),u=y("button"),u.textContent=f,q=v(),T=y("button"),T.textContent=b,F=v(),A=y("div"),Ee=C(c[8]),Ne=v(),ce=y("div"),we=C("Experience: "),be=C(c[0]),Pe=v(),oe=y("div"),De=C("Drachmas: "),ve=C(c[1]),Re=v(),ne=y("button"),ne.textContent=Oe,Ve=v(),me=y("button"),me.textContent=Ue,Ae=v(),pe=y("button"),pe.textContent=Ge,this.h()},l(p){n=M(p,"DIV",{class:!0});var s=H(n);e=M(s,"H2",{});var qe=H(e);G=E(qe,O),qe.forEach(D),j=S(s),N=M(s,"DIV",{class:!0});var he=H(N);t=M(he,"DIV",{});var ye=H(t);r=E(ye,"Player HP: "),x=E(ye,c[4]),g=E(ye,"/"),B=E(ye,I),ye.forEach(D),m=S(he),h=M(he,"DIV",{});var Me=H(h);R=E(Me,"Player MP: "),$=E(Me,c[5]),V=E(Me,"/"),K=E(Me,U),Me.forEach(D),Q=S(he),w=M(he,"DIV",{});var Ie=H(w);ee=E(Ie,"Enemy HP: "),te=E(Ie,c[7]),ie=E(Ie,"/"),ue=E(Ie,ae),Ie.forEach(D),he.forEach(D),se=S(s),P=M(s,"DIV",{class:!0});var Z=H(P);k=M(Z,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),W=S(Z),J=M(Z,"DIV",{class:!0}),H(J).forEach(D),ke=S(Z),_=M(Z,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),_e=S(Z),X=M(Z,"DIV",{class:!0});var Fe=H(X);l=M(Fe,"DIV",{class:!0}),H(l).forEach(D),Fe.forEach(D),Z.forEach(D),i=S(s),u=M(s,"BUTTON",{"data-svelte-h":!0}),Te(u)!=="svelte-ig8gg4"&&(u.textContent=f),q=S(s),T=M(s,"BUTTON",{"data-svelte-h":!0}),Te(T)!=="svelte-172d9ub"&&(T.textContent=b),F=S(s),A=M(s,"DIV",{class:!0});var Ye=H(A);Ee=E(Ye,c[8]),Ye.forEach(D),Ne=S(s),ce=M(s,"DIV",{class:!0});var ze=H(ce);we=E(ze,"Experience: "),be=E(ze,c[0]),ze.forEach(D),Pe=S(s),oe=M(s,"DIV",{class:!0});var Be=H(oe);De=E(Be,"Drachmas: "),ve=E(Be,c[1]),Be.forEach(D),Re=S(s),ne=M(s,"BUTTON",{"data-svelte-h":!0}),Te(ne)!=="svelte-lzajz"&&(ne.textContent=Oe),Ve=S(s),me=M(s,"BUTTON",{"data-svelte-h":!0}),Te(me)!=="svelte-z72cka"&&(me.textContent=Ue),Ae=S(s),pe=M(s,"BUTTON",{"data-svelte-h":!0}),Te(pe)!=="svelte-1hg8zdr"&&(pe.textContent=Ge),s.forEach(D),this.h()},h(){d(N,"class","stats svelte-12x8keo"),Se(k.src,de=z+"/game/"+c[3].img)||d(k,"src",de),d(k,"width","128px"),d(k,"height","128px"),d(k,"alt",le=c[3].name),d(k,"class","svelte-12x8keo"),L(k,"attack",c[9]),L(k,"hurt",c[11]),L(k,"player-using-special",c[10]),d(J,"class",re=Je(c[10]?c[3].specialEffect:"")+" svelte-12x8keo"),d(_,"class","enemy-creature svelte-12x8keo"),Se(_.src,fe=z+"/game/"+c[6].img)||d(_,"src",fe),d(_,"width","128px"),d(_,"height","128px"),d(_,"alt",ge=c[6].name),L(_,"enemy-attack",c[11]),L(_,"enemy-hurt",c[9]),L(_,"enemy-spawning",c[12]),d(l,"class",o=c[12]?"enemy-spawn":""),d(X,"class","enemy-spawn-container svelte-12x8keo"),d(P,"class","creatures svelte-12x8keo"),d(A,"class","combat-alert svelte-12x8keo"),d(ce,"class","experience svelte-12x8keo"),d(oe,"class","drachmas svelte-12x8keo"),d(n,"class","game-container svelte-12x8keo")},m(p,s){lt(p,n,s),a(n,e),a(e,G),a(n,j),a(n,N),a(N,t),a(t,r),a(t,x),a(t,g),a(t,B),a(N,m),a(N,h),a(h,R),a(h,$),a(h,V),a(h,K),a(N,Q),a(N,w),a(w,ee),a(w,te),a(w,ie),a(w,ue),a(n,se),a(n,P),a(P,k),a(P,W),a(P,J),a(P,ke),a(P,_),a(P,_e),a(P,X),a(X,l),a(n,i),a(n,u),a(n,q),a(n,T),a(n,F),a(n,A),a(A,Ee),a(n,Ne),a(n,ce),a(ce,we),a(ce,be),a(n,Pe),a(n,oe),a(oe,De),a(oe,ve),a(n,Re),a(n,ne),a(n,Ve),a(n,me),a(n,Ae),a(n,pe),He||(je=[Ce(u,"click",c[17]),Ce(T,"click",c[18]),Ce(ne,"click",c[19]),Ce(me,"click",c[20]),Ce(pe,"click",c[21])],He=!0)},p(p,s){s[0]&4&&O!==(O=p[2].name+"")&&Y(G,O),s[0]&16&&Y(x,p[4]),s[0]&8&&I!==(I=p[3].hp+"")&&Y(B,I),s[0]&32&&Y($,p[5]),s[0]&8&&U!==(U=p[3].mp+"")&&Y(K,U),s[0]&128&&Y(te,p[7]),s[0]&64&&ae!==(ae=p[6].hp+"")&&Y(ue,ae),s[0]&8&&!Se(k.src,de=z+"/game/"+p[3].img)&&d(k,"src",de),s[0]&8&&le!==(le=p[3].name)&&d(k,"alt",le),s[0]&512&&L(k,"attack",p[9]),s[0]&2048&&L(k,"hurt",p[11]),s[0]&1024&&L(k,"player-using-special",p[10]),s[0]&1032&&re!==(re=Je(p[10]?p[3].specialEffect:"")+" svelte-12x8keo")&&d(J,"class",re),s[0]&64&&!Se(_.src,fe=z+"/game/"+p[6].img)&&d(_,"src",fe),s[0]&64&&ge!==(ge=p[6].name)&&d(_,"alt",ge),s[0]&2048&&L(_,"enemy-attack",p[11]),s[0]&512&&L(_,"enemy-hurt",p[9]),s[0]&4096&&L(_,"enemy-spawning",p[12]),s[0]&4096&&o!==(o=p[12]?"enemy-spawn":"")&&d(l,"class",o),s[0]&256&&Y(Ee,p[8]),s[0]&1&&Y(be,p[0]),s[0]&2&&Y(ve,p[1])},i:Ke,o:Ke,d(p){p&&D(n),He=!1,$e(je)}}}function ot(c,n,e){let O=0,G=0,j=Qe[0],N=Le.filter(l=>l.stageId===j.id),t=N[0],r=We[0],x=!1,g=t.hp+r.hpMod,I=t.mp+r.mpMod,B=Ze.filter(l=>l.stageId===j.id),m=B[Math.floor(Math.random()*B.length)],h=m.hp,R="",$=0,V=!1,U=!1,K=!1,Q=!1,w=null,ee=null,te=null,ie=null;const ae=()=>{if(I!==t.mp+r.mpMod&&I+t.mpRegen+r.mpRegenMod<=t.mp+r.mpMod){e(5,I=I+t.mpRegen+r.mpRegenMod);return}e(5,I=t.mp+r.mpMod)},ue=(l,o)=>{if(g-(m.attack-m.attack*l)*o<=0){e(8,R="Defeat!"),e(4,g=0);return}e(4,g=g-(m.attack-m.attack*l)*o)},se=(l,o,i)=>{try{const u=t.speed+r.speedMod;let f=(t.defense+r.defenseMod)/100,q=m.critical/100,T=1,b=!1;if(m.attackType==="Magic"&&(f=0),m.speed<u?b=Math.random()>=.5:b=Math.random()>=.8,$>1&&!b&&!l&&(b=!0),!b&&l&&e(8,R="Enemy was too slow!"),!b&&!l){e(5,I=t.mp+r.mpMod),$+=1,W(o,i);return}o===t.attackName&&ae(),b&&l&&e(8,R="Both abilities succeeded."),b&&!l&&e(8,R="Your summon was too slow!"),b&&(Math.random()<=q&&(T=1.5),m.attackType==="Poison"&&T===1&&(T=1.5),ue(f,T),e(11,K=!0),te=setTimeout(()=>e(11,K=!1),500))}catch(u){console.error(u)}},P=(l,o,i,u,f)=>{f==="Lifesteal"&&i&&(g+l*o*.2>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+l*o*.2)),se(i,u,f)},k=(l,o,i,u,f)=>{l&&(g+o*i>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+o*i)),se(l,u,f)},de=(l,o,i,u,f,q,T)=>{if(e(5,I=I-i),T!=="Heal"){if(h-(o-o*f)*u<=0&&l){e(7,h=0),e(8,R="Victory!"),e(0,O+=m.reward*2),e(1,G+=m.reward),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500),e(10,U=!0),ee=setTimeout(()=>e(10,U=!1),500);return}l&&(e(7,h=h-(o-o*f)*u),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500),e(10,U=!0),ee=setTimeout(()=>e(10,U=!1),500)),P(o,u,l,q,T);return}k(l,o,u,q,T)},le=()=>{(g<=0||h<=0)&&(e(4,g=t.hp+r.hpMod),e(5,I=t.mp+r.mpMod),e(12,Q=!0),ie=setTimeout(()=>e(12,Q=!1),500),e(6,m=B[Math.floor(Math.random()*B.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),e(7,h=m.hp),e(8,R=""))},W=(l,o)=>{try{const i=t.attack+r.attackMod,u=t.speed+r.speedMod,f=(t.critical+r.criticalMod)/100;let q=t.special+r.specialMod,T=t.specialCost,b=m.defense/100,F=!1,A=1;if(Q)return;if(le(),o==="Magic"&&(b=0),u<m.speed?F=Math.random()>=.5:F=Math.random()>=.8,Math.random()<=f&&(A=1.5),o==="Poison"&&A===1&&(A=1.5),l===t.attackName){if(h-(i-i*b)*A<=0&&F){e(7,h=0),e(8,R="Victory!"),e(0,O+=m.reward*2),e(1,G+=m.reward),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500);return}F&&(e(7,h=h-(i-i*b)*A),e(9,V=!0),w=setTimeout(()=>e(9,V=!1),500)),se(F,l,o);return}I>=T?de(F,q,T,A,b,l,o):e(8,R="Not enough MP!")}catch(i){console.error(i)}},J=()=>{try{const l=m;e(4,g=0),le(),e(3,t=Le.find(o=>o.id===l.id)),e(4,g=t.hp+r.hpMod),e(5,I=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(l){console.error(l)}},re=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+r.hpMod},{label:"Speed",value:t.speed+r.speedMod},{label:"Defense",value:t.defense+r.defenseMod},{label:"Critical",value:t.critical+r.criticalMod},{label:"MP",value:t.mp+r.mpMod},{label:"MP Regen",value:t.mpRegen+r.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+r.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+r.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(i=>`${i.label}: ${i.value}`).join(`
`);alert(o)}catch(l){console.error(l)}},ke=()=>{x&&(localStorage.setItem("drachmas",G),localStorage.setItem("playerExperience",O),localStorage.setItem("chosenRelicId",r.id))};et(()=>{try{const l=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),i=localStorage.getItem("chosenRelicId"),u=localStorage.getItem("curStageId");Xe.set(!0),l&&e(1,G=parseInt(l)),o&&e(0,O=parseInt(o)),i&&e(16,r=We.find(f=>f.id===parseInt(i))),u&&e(2,j=Qe.find(f=>f.id===parseInt(u))),N=Le.filter(f=>f.stageId===j.id),e(3,t=N[0]),e(4,g=t.hp+r.hpMod),e(5,I=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),B=Ze.filter(f=>f.stageId===j.id),e(6,m=B[Math.floor(Math.random()*B.length)]),e(7,h=m.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),x=!0}catch(l){console.error(l)}}),tt(()=>{Xe.set(!1),clearTimeout(w),clearTimeout(ee),clearTimeout(te),clearTimeout(ie)});const _=()=>W(t.attackName,t.attackType),fe=()=>W(t.specialName,t.specialType),ge=()=>J(),_e=()=>re(),X=()=>{rt(z+"/game/world")};return c.$$.update=()=>{c.$$.dirty[0]&65539&&ke()},[O,G,j,t,g,I,m,h,R,V,U,K,Q,W,J,re,r,_,fe,ge,_e,X]}class dt extends at{constructor(n){super(),st(this,n,ot,ct,xe,{},null,[-1,-1])}}export{dt as component};
