import{s as we,n as ge,q as ue,r as De,o as Ae,u as je,v as ke,b as ve,w as Me}from"../chunks/scheduler.CC--3cCC.js";import{S as Ne,i as Ve,e as I,s as V,c as R,a as B,y as ce,f as A,d as y,o as v,g as K,h as o,z as He,t as U,b as L,A as re,j as $,n as de,l as he,m as Oe,B as x,C as ye,u as Be,v as Ge,w as ze,x as Ue,q as Le}from"../chunks/index.DvvoYX54.js";import{i as be}from"../chunks/store.QPjdZXKK.js";import{e as Ee}from"../chunks/each.D6YF6ztN.js";const me=[{id:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"}],_e=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],fe=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function Ce(a,t,e){const m=a.slice();return m[4]=t[e],m}function Ie(a){let t;return{c(){t=U("Active")},l(e){t=L(e,"Active")},m(e,m){K(e,t,m)},d(e){e&&y(t)}}}function Re(a){let t,e="Buy",m,M;function l(){return a[3](a[4])}return{c(){t=I("button"),t.textContent=e,this.h()},l(s){t=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-yl076z"&&(t.textContent=e),this.h()},h(){v(t,"class","svelte-nnoa37")},m(s,c){K(s,t,c),m||(M=re(t,"click",l),m=!0)},p(s,c){a=s},d(s){s&&y(t),m=!1,M()}}}function Te(a){let t,e,m,M,l,s=a[4].name+"",c,r,i,p,n,w=a[4].description+"",D,T,k,G,j=a[4].price+"",H,O,q,N,S=a[4].id===a[0].id&&Ie(),d=a[4].id!==a[0].id&&Re(a);return{c(){t=I("div"),e=I("img"),M=V(),l=I("h3"),c=U(s),r=V(),i=I("p"),S&&S.c(),p=V(),n=I("p"),D=U(w),T=V(),k=I("p"),G=U("Price: "),H=U(j),O=U(" drachmas"),q=V(),d&&d.c(),N=V(),this.h()},l(h){t=R(h,"DIV",{class:!0});var u=B(t);e=R(u,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),M=A(u),l=R(u,"H3",{});var P=B(l);c=L(P,s),P.forEach(y),r=A(u),i=R(u,"P",{class:!0});var _=B(i);S&&S.l(_),_.forEach(y),p=A(u),n=R(u,"P",{});var Q=B(n);D=L(Q,w),Q.forEach(y),T=A(u),k=R(u,"P",{});var z=B(k);G=L(z,"Price: "),H=L(z,j),O=L(z," drachmas"),z.forEach(y),q=A(u),d&&d.l(u),N=A(u),u.forEach(y),this.h()},h(){ue(e.src,m=a[4].img)||v(e,"src",m),v(e,"width","46px"),v(e,"height","46px"),v(e,"alt",a[4].name),v(e,"class","svelte-nnoa37"),v(i,"class","active svelte-nnoa37"),v(t,"class","relic svelte-nnoa37")},m(h,u){K(h,t,u),o(t,e),o(t,M),o(t,l),o(l,c),o(t,r),o(t,i),S&&S.m(i,null),o(t,p),o(t,n),o(n,D),o(t,T),o(t,k),o(k,G),o(k,H),o(k,O),o(t,q),d&&d.m(t,null),o(t,N)},p(h,u){h[4].id===h[0].id?S||(S=Ie(),S.c(),S.m(i,null)):S&&(S.d(1),S=null),h[4].id!==h[0].id?d?d.p(h,u):(d=Re(h),d.c(),d.m(t,N)):d&&(d.d(1),d=null)},d(h){h&&y(t),S&&S.d(),d&&d.d()}}}function qe(a){let t,e,m="Relic Store",M,l,s=Ee(_e),c=[];for(let r=0;r<s.length;r+=1)c[r]=Te(Ce(a,s,r));return{c(){t=I("div"),e=I("h2"),e.textContent=m,M=V(),l=I("div");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){t=R(r,"DIV",{class:!0});var i=B(t);e=R(i,"H2",{"data-svelte-h":!0}),ce(e)!=="svelte-6gh0hs"&&(e.textContent=m),M=A(i),l=R(i,"DIV",{});var p=B(l);for(let n=0;n<c.length;n+=1)c[n].l(p);p.forEach(y),i.forEach(y),this.h()},h(){v(t,"class","store svelte-nnoa37")},m(r,i){K(r,t,i),o(t,e),o(t,M),o(t,l);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(l,null)},p(r,[i]){if(i&3){s=Ee(_e);let p;for(p=0;p<s.length;p+=1){const n=Ce(r,s,p);c[p]?c[p].p(n,i):(c[p]=Te(n),c[p].c(),c[p].m(l,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=s.length}},i:ge,o:ge,d(r){r&&y(t),He(c,r)}}}function Je(a,t,e){let{drachmas:m}=t,{chosenRelic:M}=t;const l=c=>{if(m>=c.price){e(2,m-=c.price),e(0,M=c),window.location.reload();return}alert("Not enough drachmas!")},s=c=>l(c);return a.$$set=c=>{"drachmas"in c&&e(2,m=c.drachmas),"chosenRelic"in c&&e(0,M=c.chosenRelic)},[M,l,m,s]}class Ye extends Ne{constructor(t){super(),Ve(this,t,Je,qe,we,{drachmas:2,chosenRelic:0})}}function Pe(a){let t,e,m,M,l,s,c,r,i,p,n,w,D,T,k,G,j,H,O,q,N,S,d,h,u,P,_,Q="Attack",z,Y,oe="Special Attack",ee,X,te,ie,pe;return{c(){t=I("div"),e=I("div"),m=U("Player HP: "),M=U(a[4]),l=V(),s=I("div"),c=U("Player MP: "),r=U(a[5]),i=V(),p=I("div"),n=U("Enemy HP: "),w=U(a[7]),D=V(),T=I("div"),k=I("img"),H=V(),O=I("div"),q=I("div"),S=V(),d=I("img"),P=V(),_=I("button"),_.textContent=Q,z=V(),Y=I("button"),Y.textContent=oe,ee=V(),X=I("div"),te=U(a[8]),this.h()},l(g){t=R(g,"DIV",{class:!0});var b=B(t);e=R(b,"DIV",{});var ne=B(e);m=L(ne,"Player HP: "),M=L(ne,a[4]),ne.forEach(y),l=A(b),s=R(b,"DIV",{});var f=B(s);c=L(f,"Player MP: "),r=L(f,a[5]),f.forEach(y),i=A(b),p=R(b,"DIV",{});var E=B(p);n=L(E,"Enemy HP: "),w=L(E,a[7]),E.forEach(y),b.forEach(y),D=A(g),T=R(g,"DIV",{class:!0});var C=B(T);k=R(C,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),H=A(C),O=R(C,"DIV",{class:!0});var J=B(O);q=R(J,"DIV",{class:!0}),B(q).forEach(y),J.forEach(y),S=A(C),d=R(C,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),C.forEach(y),P=A(g),_=R(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(_)!=="svelte-1lzhxhg"&&(_.textContent=Q),z=A(g),Y=R(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(Y)!=="svelte-11ep6kf"&&(Y.textContent=oe),ee=A(g),X=R(g,"DIV",{class:!0});var Z=B(X);te=L(Z,a[8]),Z.forEach(y),this.h()},h(){v(t,"class","stats svelte-14ufh4l"),ue(k.src,G=a[3].img)||v(k,"src",G),v(k,"width","128px"),v(k,"height","128px"),v(k,"alt",j=a[3].name),v(k,"class","svelte-14ufh4l"),x(k,"attack",a[9]),x(k,"hurt",a[11]),v(q,"class",N=ke(a[10]?a[3].specialEffect:"")+" svelte-14ufh4l"),v(O,"class","special-effect-container svelte-14ufh4l"),v(d,"class","enemy-creature svelte-14ufh4l"),ue(d.src,h=a[6].img)||v(d,"src",h),v(d,"width","128px"),v(d,"height","128px"),v(d,"alt",u=a[6].name),x(d,"enemy-attack",a[11]),x(d,"enemy-hurt",a[9]),v(T,"class","creatures svelte-14ufh4l"),v(_,"class","svelte-14ufh4l"),v(Y,"class","svelte-14ufh4l"),v(X,"class","combat-alert svelte-14ufh4l")},m(g,b){K(g,t,b),o(t,e),o(e,m),o(e,M),o(t,l),o(t,s),o(s,c),o(s,r),o(t,i),o(t,p),o(p,n),o(p,w),K(g,D,b),K(g,T,b),o(T,k),o(T,H),o(T,O),o(O,q),o(T,S),o(T,d),K(g,P,b),K(g,_,b),K(g,z,b),K(g,Y,b),K(g,ee,b),K(g,X,b),o(X,te),ie||(pe=[re(_,"click",a[16]),re(Y,"click",a[17])],ie=!0)},p(g,b){b[0]&16&&$(M,g[4]),b[0]&32&&$(r,g[5]),b[0]&128&&$(w,g[7]),b[0]&8&&!ue(k.src,G=g[3].img)&&v(k,"src",G),b[0]&8&&j!==(j=g[3].name)&&v(k,"alt",j),b[0]&512&&x(k,"attack",g[9]),b[0]&2048&&x(k,"hurt",g[11]),b[0]&1032&&N!==(N=ke(g[10]?g[3].specialEffect:"")+" svelte-14ufh4l")&&v(q,"class",N),b[0]&64&&!ue(d.src,h=g[6].img)&&v(d,"src",h),b[0]&64&&u!==(u=g[6].name)&&v(d,"alt",u),b[0]&2048&&x(d,"enemy-attack",g[11]),b[0]&512&&x(d,"enemy-hurt",g[9]),b[0]&256&&$(te,g[8])},d(g){g&&(y(t),y(D),y(T),y(P),y(_),y(z),y(Y),y(ee),y(X)),ie=!1,De(pe)}}}function Se(a){let t,e,m,M;function l(r){a[21](r)}function s(r){a[22](r)}let c={};return a[1]!==void 0&&(c.drachmas=a[1]),a[2]!==void 0&&(c.chosenRelic=a[2]),t=new Ye({props:c}),ve.push(()=>ye(t,"drachmas",l)),ve.push(()=>ye(t,"chosenRelic",s)),{c(){Be(t.$$.fragment)},l(r){Ge(t.$$.fragment,r)},m(r,i){ze(t,r,i),M=!0},p(r,i){const p={};!e&&i[0]&2&&(e=!0,p.drachmas=r[1],Me(()=>e=!1)),!m&&i[0]&4&&(m=!0,p.chosenRelic=r[2],Me(()=>m=!1)),t.$set(p)},i(r){M||(de(t.$$.fragment,r),M=!0)},o(r){he(t.$$.fragment,r),M=!1},d(r){Ue(t,r)}}}function Ze(a){let t,e,m,M,l,s,c,r,i,p,n,w="Swap Summon",D,T,k="View Stats",G,j,H=a[12]?"Close Relic Store":"Open Relic Store",O,q,N,S,d,h=!a[12]&&Pe(a),u=a[12]&&Se(a);return{c(){t=I("div"),h&&h.c(),e=V(),m=I("div"),M=U("Experience: "),l=U(a[0]),s=V(),c=I("div"),r=U("Drachmas: "),i=U(a[1]),p=V(),n=I("button"),n.textContent=w,D=V(),T=I("button"),T.textContent=k,G=V(),j=I("button"),O=U(H),q=V(),u&&u.c(),this.h()},l(P){t=R(P,"DIV",{class:!0});var _=B(t);h&&h.l(_),e=A(_),m=R(_,"DIV",{class:!0});var Q=B(m);M=L(Q,"Experience: "),l=L(Q,a[0]),Q.forEach(y),s=A(_),c=R(_,"DIV",{class:!0});var z=B(c);r=L(z,"Drachmas: "),i=L(z,a[1]),z.forEach(y),p=A(_),n=R(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(n)!=="svelte-1c1ym4l"&&(n.textContent=w),D=A(_),T=R(_,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(T)!=="svelte-z72cka"&&(T.textContent=k),G=A(_),j=R(_,"BUTTON",{class:!0});var Y=B(j);O=L(Y,H),Y.forEach(y),q=A(_),u&&u.l(_),_.forEach(y),this.h()},h(){v(m,"class","experience svelte-14ufh4l"),v(c,"class","drachmas svelte-14ufh4l"),v(n,"class","svelte-14ufh4l"),v(T,"class","svelte-14ufh4l"),v(j,"class","svelte-14ufh4l"),v(t,"class","game-container svelte-14ufh4l")},m(P,_){K(P,t,_),h&&h.m(t,null),o(t,e),o(t,m),o(m,M),o(m,l),o(t,s),o(t,c),o(c,r),o(c,i),o(t,p),o(t,n),o(t,D),o(t,T),o(t,G),o(t,j),o(j,O),o(t,q),u&&u.m(t,null),N=!0,S||(d=[re(n,"click",a[18]),re(T,"click",a[19]),re(j,"click",a[20])],S=!0)},p(P,_){P[12]?h&&(h.d(1),h=null):h?h.p(P,_):(h=Pe(P),h.c(),h.m(t,e)),(!N||_[0]&1)&&$(l,P[0]),(!N||_[0]&2)&&$(i,P[1]),(!N||_[0]&4096)&&H!==(H=P[12]?"Close Relic Store":"Open Relic Store")&&$(O,H),P[12]?u?(u.p(P,_),_[0]&4096&&de(u,1)):(u=Se(P),u.c(),de(u,1),u.m(t,null)):u&&(Le(),he(u,1,1,()=>{u=null}),Oe())},i(P){N||(de(u),N=!0)},o(P){he(u),N=!1},d(P){P&&y(t),h&&h.d(),u&&u.d(),S=!1,De(d)}}}function Fe(a,t,e){let m=0,M=0,l=me[0],s=_e[0],c=!1,r=l.hp+s.hpMod,i=l.mp+s.mpMod,p=i,n=fe[Math.floor(Math.random()*fe.length)],w=n.hp,D="",T=0,k=!1,G=!1,j=!1,H=null,O=null,q=null,N=!1;const S=()=>{if(i!==l.mp+s.mpMod&&i+l.mpRegen+s.mpRegenMod<=l.mp+s.mpMod){e(5,i=i+l.mpRegen+s.mpRegenMod);return}e(5,i=l.mp+s.mpMod)},d=(f,E)=>{if(r-(n.attack-n.attack*f)*E<=0){e(8,D="Defeat!"),e(4,r=0);return}e(4,r=r-(n.attack-n.attack*f)*E)},h=(f,E,C)=>{try{const J=l.speed+s.speedMod;let Z=(l.defense+s.defenseMod)/100,le=n.critical/100,W=1,F=!1;if(n.attackType==="Magic"&&(Z=0),n.speed<J?F=Math.random()>=.5:F=Math.random()>=.8,T>1&&!F&&!f&&(F=!0),!F&&f&&e(8,D="Enemy was too slow!"),!F&&!f){e(5,i=p),T+=1,z(E,C);return}E===l.attackName&&S(),F&&f&&e(8,D="Both abilities succeeded."),F&&!f&&e(8,D="Your summon was too slow!"),F&&(Math.random()<=le&&(W=1.5),n.attackType==="Poison"&&W===1&&(W=1.5),d(Z,W),e(11,j=!0),q=setTimeout(()=>e(11,j=!1),500))}catch(J){console.error(J)}},u=(f,E,C,J,Z)=>{Z==="Lifesteal"&&C&&(r+f*E*.2>l.hp+s.hpMod?e(4,r=l.hp+s.hpMod):e(4,r=r+f*E*.2)),h(C,J,Z)},P=(f,E,C,J,Z)=>{f&&(r+E*C>l.hp+s.hpMod?e(4,r=l.hp+s.hpMod):e(4,r=r+E*C)),h(f,J,Z)},_=(f,E,C,J,Z,le,W)=>{if(e(5,i=i-C),W!=="Heal"){if(w-(E-E*Z)*J<=0&&f){e(7,w=0),e(8,D="Victory!"),e(0,m+=n.reward*2),e(1,M+=n.reward),e(9,k=!0),H=setTimeout(()=>e(9,k=!1),500),e(10,G=!0),O=setTimeout(()=>e(10,G=!1),500);return}f&&(e(7,w=w-(E-E*Z)*J),e(9,k=!0),H=setTimeout(()=>e(9,k=!1),500),e(10,G=!0),O=setTimeout(()=>e(10,G=!1),500)),u(E,J,f,le,W);return}P(f,E,J,le,W)},Q=()=>{(r<=0||w<=0)&&(e(4,r=l.hp+s.hpMod),e(5,i=l.mp+s.mpMod),e(6,n=fe[Math.floor(Math.random()*fe.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),e(7,w=n.hp),e(8,D=""))},z=(f,E)=>{try{const C=l.attack+s.attackMod,J=l.speed+s.speedMod,Z=(l.critical+s.criticalMod)/100;let le=l.special+s.specialMod,W=l.specialCost,F=n.defense/100,se=!1,ae=1;if(Q(),E==="Magic"&&(F=0),J<n.speed?se=Math.random()>=.5:se=Math.random()>=.8,Math.random()<=Z&&(ae=1.5),E==="Poison"&&ae===1&&(ae=1.5),f===l.attackName){if(w-(C-C*F)*ae<=0&&se){e(7,w=0),e(8,D="Victory!"),e(0,m+=n.reward*2),e(1,M+=n.reward),e(9,k=!0),H=setTimeout(()=>e(9,k=!1),500);return}se&&(e(7,w=w-(C-C*F)*ae),e(9,k=!0),H=setTimeout(()=>e(9,k=!1),500)),h(se,f,E);return}i>=W?_(se,le,W,ae,F,f,E):e(8,D="Not enough MP!")}catch(C){console.error(C)}},Y=()=>{try{if(e(4,r=0),Q(),l===me[0]){e(3,l=me[1]),e(4,r=l.hp+s.hpMod),e(5,i=l.mp+s.mpMod),p=i,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_hurt.png"})`);return}e(3,l=me[0]),e(4,r=l.hp+s.hpMod),e(5,i=l.mp+s.mpMod),p=i,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_hurt.png"})`)}catch(f){console.error(f)}},oe=()=>{try{const E=[{label:"ID",value:l.id},{label:"Name",value:l.name},{label:"HP",value:l.hp+s.hpMod},{label:"Speed",value:l.speed+s.speedMod},{label:"Defense",value:l.defense+s.defenseMod},{label:"Critical",value:l.critical+s.criticalMod},{label:"MP",value:l.mp+s.mpMod},{label:"MP Regen",value:l.mpRegen+s.mpRegenMod},{label:`
Attack Name`,value:l.attackName},{label:"Attack",value:l.attack+s.attackMod},{label:"Attack Type",value:l.attackType},{label:`
Special Name`,value:l.specialName},{label:"Special",value:l.special+s.specialMod},{label:"Special Cost",value:l.specialCost},{label:"Special Type",value:l.specialType}].map(C=>`${C.label}: ${C.value}`).join(`
`);alert(E)}catch(f){console.error(f)}},ee=()=>{c&&(localStorage.setItem("drachmas",M),localStorage.setItem("playerExperience",m),localStorage.setItem("chosenRelic",JSON.stringify(s)))};Ae(()=>{try{const f=localStorage.getItem("drachmas"),E=localStorage.getItem("playerExperience"),C=localStorage.getItem("chosenRelic");be.set(!0),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+l.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),f&&e(1,M=parseInt(f)),E&&e(0,m=parseInt(E)),C&&e(2,s=JSON.parse(C)),c=!0}catch(f){console.error(f)}}),je(()=>{be.set(!1),clearTimeout(H),clearTimeout(O),clearTimeout(q)});const X=()=>z(l.attackName,l.attackType),te=()=>z(l.specialName,l.specialType),ie=()=>Y(),pe=()=>oe(),g=()=>e(12,N=!N);function b(f){M=f,e(1,M)}function ne(f){s=f,e(2,s)}return a.$$.update=()=>{a.$$.dirty[0]&7&&ee()},[m,M,s,l,r,i,n,w,D,k,G,j,N,z,Y,oe,X,te,ie,pe,g,b,ne]}class xe extends Ne{constructor(t){super(),Ve(this,t,Fe,Ze,we,{},null,[-1,-1])}}export{xe as component};
