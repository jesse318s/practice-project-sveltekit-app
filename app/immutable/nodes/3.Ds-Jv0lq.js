import{s as xe,d as Se,e as Je,n as Ke,r as $e,o as et,f as tt}from"../chunks/scheduler.BoReh3vH.js";import{S as at,i as st,e as y,t as b,s as E,c as M,a as H,b as C,d as z,f as v,y as Ce,o as u,z as O,g as lt,h as a,A as _e,j as Y}from"../chunks/index.BklZDJd0.js";import{s as Qe,r as We}from"../chunks/relics.9MHovSS4.js";import{i as Xe}from"../chunks/store.Cn0GNUQE.js";import{b as B,g as rt}from"../chunks/entry.BEY70Y3H.js";const Le=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],Ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function ct(r){let m,e,U=r[2].name+"",q,F,S,t,c,$,f,I=r[3].hp+"",L,p,g,R,ee,V,G=r[3].mp+"",Q,W,N,te,ae,ue,se=r[6].hp+"",de,le,w,h,fe,re,J,K,ce,ye,k,ge,he,Me,X,Z,l,o,n,_="Attack",d,P,D="Special",T,A,j,Ne,oe,we,Ee,Pe,ne,De,ve,ze,me,Oe="Mimic Summon",Re,pe,Ue="View Stats",Ve,ie,Ge="Travel",Ae,je;return{c(){m=y("div"),e=y("h2"),q=b(U),F=E(),S=y("div"),t=y("div"),c=b("Player HP: "),$=b(r[4]),f=b("/"),L=b(I),p=E(),g=y("div"),R=b("Player MP: "),ee=b(r[5]),V=b("/"),Q=b(G),W=E(),N=y("div"),te=b("Enemy HP: "),ae=b(r[7]),ue=b("/"),de=b(se),le=E(),w=y("div"),h=y("img"),J=E(),K=y("div"),ye=E(),k=y("img"),Me=E(),X=y("div"),Z=y("div"),o=E(),n=y("button"),n.textContent=_,d=E(),P=y("button"),P.textContent=D,T=E(),A=y("div"),j=b(r[8]),Ne=E(),oe=y("div"),we=b("Experience: "),Ee=b(r[0]),Pe=E(),ne=y("div"),De=b("Drachmas: "),ve=b(r[1]),ze=E(),me=y("button"),me.textContent=Oe,Re=E(),pe=y("button"),pe.textContent=Ue,Ve=E(),ie=y("button"),ie.textContent=Ge,this.h()},l(i){m=M(i,"DIV",{class:!0});var s=H(m);e=M(s,"H2",{});var qe=H(e);q=C(qe,U),qe.forEach(z),F=v(s),S=M(s,"DIV",{class:!0});var ke=H(S);t=M(ke,"DIV",{});var Ie=H(t);c=C(Ie,"Player HP: "),$=C(Ie,r[4]),f=C(Ie,"/"),L=C(Ie,I),Ie.forEach(z),p=v(ke),g=M(ke,"DIV",{});var Te=H(g);R=C(Te,"Player MP: "),ee=C(Te,r[5]),V=C(Te,"/"),Q=C(Te,G),Te.forEach(z),W=v(ke),N=M(ke,"DIV",{});var be=H(N);te=C(be,"Enemy HP: "),ae=C(be,r[7]),ue=C(be,"/"),de=C(be,se),be.forEach(z),ke.forEach(z),le=v(s),w=M(s,"DIV",{class:!0});var x=H(w);h=M(x,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),J=v(x),K=M(x,"DIV",{class:!0}),H(K).forEach(z),ye=v(x),k=M(x,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),Me=v(x),X=M(x,"DIV",{class:!0});var Fe=H(X);Z=M(Fe,"DIV",{class:!0}),H(Z).forEach(z),Fe.forEach(z),x.forEach(z),o=v(s),n=M(s,"BUTTON",{"data-svelte-h":!0}),Ce(n)!=="svelte-19y3ioo"&&(n.textContent=_),d=v(s),P=M(s,"BUTTON",{"data-svelte-h":!0}),Ce(P)!=="svelte-172d9ub"&&(P.textContent=D),T=v(s),A=M(s,"DIV",{class:!0});var Ye=H(A);j=C(Ye,r[8]),Ye.forEach(z),Ne=v(s),oe=M(s,"DIV",{class:!0});var He=H(oe);we=C(He,"Experience: "),Ee=C(He,r[0]),He.forEach(z),Pe=v(s),ne=M(s,"DIV",{class:!0});var Be=H(ne);De=C(Be,"Drachmas: "),ve=C(Be,r[1]),Be.forEach(z),ze=v(s),me=M(s,"BUTTON",{"data-svelte-h":!0}),Ce(me)!=="svelte-lzajz"&&(me.textContent=Oe),Re=v(s),pe=M(s,"BUTTON",{"data-svelte-h":!0}),Ce(pe)!=="svelte-z72cka"&&(pe.textContent=Ue),Ve=v(s),ie=M(s,"BUTTON",{"data-svelte-h":!0}),Ce(ie)!=="svelte-1hg8zdr"&&(ie.textContent=Ge),s.forEach(z),this.h()},h(){u(S,"class","stats svelte-dfb9zx"),Se(h.src,fe=B+"/game/"+r[3].img)||u(h,"src",fe),u(h,"width","128px"),u(h,"height","128px"),u(h,"alt",re=r[3].name),u(h,"class","svelte-dfb9zx"),O(h,"attack",r[9]),O(h,"hurt",r[11]),O(h,"player-using-special",r[10]),u(K,"class",ce=Je(r[10]?r[3].specialEffect:"")+" svelte-dfb9zx"),u(k,"class","enemy-creature svelte-dfb9zx"),Se(k.src,ge=B+"/game/"+r[6].img)||u(k,"src",ge),u(k,"width","128px"),u(k,"height","128px"),u(k,"alt",he=r[6].name),O(k,"enemy-attack",r[11]),O(k,"enemy-hurt",r[9]),O(k,"enemy-spawning",r[12]),u(Z,"class",l=r[12]?"enemy-spawn":""),u(X,"class","enemy-spawn-container svelte-dfb9zx"),u(w,"class","creatures svelte-dfb9zx"),u(A,"class","combat-alert svelte-dfb9zx"),u(oe,"class","experience svelte-dfb9zx"),u(ne,"class","drachmas svelte-dfb9zx"),u(m,"class","game-container svelte-dfb9zx")},m(i,s){lt(i,m,s),a(m,e),a(e,q),a(m,F),a(m,S),a(S,t),a(t,c),a(t,$),a(t,f),a(t,L),a(S,p),a(S,g),a(g,R),a(g,ee),a(g,V),a(g,Q),a(S,W),a(S,N),a(N,te),a(N,ae),a(N,ue),a(N,de),a(m,le),a(m,w),a(w,h),a(w,J),a(w,K),a(w,ye),a(w,k),a(w,Me),a(w,X),a(X,Z),a(m,o),a(m,n),a(m,d),a(m,P),a(m,T),a(m,A),a(A,j),a(m,Ne),a(m,oe),a(oe,we),a(oe,Ee),a(m,Pe),a(m,ne),a(ne,De),a(ne,ve),a(m,ze),a(m,me),a(m,Re),a(m,pe),a(m,Ve),a(m,ie),Ae||(je=[_e(n,"click",r[17]),_e(n,"contextmenu",r[18]),_e(P,"click",r[19]),_e(me,"click",r[20]),_e(pe,"click",r[21]),_e(ie,"click",r[22])],Ae=!0)},p(i,s){s[0]&4&&U!==(U=i[2].name+"")&&Y(q,U),s[0]&16&&Y($,i[4]),s[0]&8&&I!==(I=i[3].hp+"")&&Y(L,I),s[0]&32&&Y(ee,i[5]),s[0]&8&&G!==(G=i[3].mp+"")&&Y(Q,G),s[0]&128&&Y(ae,i[7]),s[0]&64&&se!==(se=i[6].hp+"")&&Y(de,se),s[0]&8&&!Se(h.src,fe=B+"/game/"+i[3].img)&&u(h,"src",fe),s[0]&8&&re!==(re=i[3].name)&&u(h,"alt",re),s[0]&512&&O(h,"attack",i[9]),s[0]&2048&&O(h,"hurt",i[11]),s[0]&1024&&O(h,"player-using-special",i[10]),s[0]&1032&&ce!==(ce=Je(i[10]?i[3].specialEffect:"")+" svelte-dfb9zx")&&u(K,"class",ce),s[0]&64&&!Se(k.src,ge=B+"/game/"+i[6].img)&&u(k,"src",ge),s[0]&64&&he!==(he=i[6].name)&&u(k,"alt",he),s[0]&2048&&O(k,"enemy-attack",i[11]),s[0]&512&&O(k,"enemy-hurt",i[9]),s[0]&4096&&O(k,"enemy-spawning",i[12]),s[0]&4096&&l!==(l=i[12]?"enemy-spawn":"")&&u(Z,"class",l),s[0]&256&&Y(j,i[8]),s[0]&1&&Y(Ee,i[0]),s[0]&2&&Y(ve,i[1])},i:Ke,o:Ke,d(i){i&&z(m),Ae=!1,$e(je)}}}function ot(r,m,e){let U=0,q=0,F=Qe[0],S=Le.filter(l=>l.stageId===F.id),t=S[0],c=We[0],$=!1,f=t.hp+c.hpMod,I=t.mp+c.mpMod,L=Ze.filter(l=>l.stageId===F.id),p=L[Math.floor(Math.random()*L.length)],g=p.hp,R="",ee=0,V=!1,G=!1,Q=!1,W=!1,N=null,te=null,ae=null,ue=null;const se=()=>{if(I!==t.mp+c.mpMod&&I+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(5,I=I+t.mpRegen+c.mpRegenMod);return}e(5,I=t.mp+c.mpMod)},de=(l,o)=>{if(f-(p.attack-p.attack*l)*o<=0){e(8,R="Defeat!"),e(4,f=0);return}e(4,f=f-(p.attack-p.attack*l)*o)},le=(l,o,n)=>{try{const _=t.speed+c.speedMod;let d=(t.defense+c.defenseMod)/100,P=p.critical/100,D=1,T=!1;if(p.attackType==="Magic"&&(d=0),p.speed<_?T=Math.random()>=.5:T=Math.random()>=.8,ee>1&&!T&&!l&&(T=!0),!T&&l&&e(8,R="Enemy was too slow!"),!T&&!l){e(5,I=t.mp+c.mpMod),ee+=1,J(o,n);return}o===t.attackName&&se(),T&&l&&e(8,R="Both abilities succeeded."),T&&!l&&e(8,R="Your summon was too slow!"),T&&(Math.random()<=P&&(D=1.5),p.attackType==="Poison"&&D===1&&(D=1.5),de(d,D),e(11,Q=!0),ae=setTimeout(()=>e(11,Q=!1),500))}catch(_){console.error(_)}},w=(l,o,n,_,d)=>{d==="Lifesteal"&&n&&(f+l*o*.2>t.hp+c.hpMod?e(4,f=t.hp+c.hpMod):e(4,f=f+l*o*.2)),le(n,_,d)},h=(l,o,n,_,d)=>{l&&(f+o*n>t.hp+c.hpMod?e(4,f=t.hp+c.hpMod):e(4,f=f+o*n)),le(l,_,d)},fe=(l,o,n,_,d,P,D)=>{if(e(5,I=I-n),D!=="Heal"){if(g-(o-o*d)*_<=0&&l){e(7,g=0),e(8,R="Victory!"),e(0,U+=p.reward*2),e(1,q+=p.reward),e(9,V=!0),N=setTimeout(()=>e(9,V=!1),500),e(10,G=!0),te=setTimeout(()=>e(10,G=!1),500);return}l&&(e(7,g=g-(o-o*d)*_),e(9,V=!0),N=setTimeout(()=>e(9,V=!1),500),e(10,G=!0),te=setTimeout(()=>e(10,G=!1),500)),w(o,_,l,P,D);return}h(l,o,_,P,D)},re=()=>{(f<=0||g<=0)&&(e(4,f=t.hp+c.hpMod),e(5,I=t.mp+c.mpMod),e(12,W=!0),ue=setTimeout(()=>e(12,W=!1),500),e(6,p=L[Math.floor(Math.random()*L.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+p.img.slice(0,-4)+"_attack.png"})`),e(7,g=p.hp),e(8,R=""))},J=(l,o)=>{try{const n=t.attack+c.attackMod,_=t.speed+c.speedMod,d=(t.critical+c.criticalMod)/100;let P=t.special+c.specialMod,D=t.specialCost,T=p.defense/100,A=!1,j=1;if(W)return;if(re(),o==="Magic"&&(T=0),_<p.speed?A=Math.random()>=.5:A=Math.random()>=.8,Math.random()<=d&&(j=1.5),o==="Poison"&&j===1&&(j=1.5),l===t.attackName){if(g-(n-n*T)*j<=0&&A){e(7,g=0),e(8,R="Victory!"),e(0,U+=p.reward*2),e(1,q+=p.reward),e(9,V=!0),N=setTimeout(()=>e(9,V=!1),500);return}A&&(e(7,g=g-(n-n*T)*j),e(9,V=!0),N=setTimeout(()=>e(9,V=!1),500)),le(A,l,o);return}I>=D?fe(A,P,D,j,T,l,o):e(8,R="Not enough MP!")}catch(n){console.error(n)}},K=()=>{try{const l=p;e(4,f=0),re(),e(3,t=Le.find(o=>o.id===l.id)),e(4,f=t.hp+c.hpMod),e(5,I=t.mp+c.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(l){console.error(l)}},ce=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+c.hpMod},{label:"Speed",value:t.speed+c.speedMod},{label:"Defense",value:t.defense+c.defenseMod},{label:"Critical",value:t.critical+c.criticalMod},{label:"MP",value:t.mp+c.mpMod},{label:"MP Regen",value:t.mpRegen+c.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+c.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+c.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(n=>`${n.label}: ${n.value}`).join(`
`);alert(o)}catch(l){console.error(l)}},ye=()=>{$&&(localStorage.setItem("drachmas",q),localStorage.setItem("playerExperience",U),localStorage.setItem("chosenRelicId",c.id))};et(()=>{try{const l=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),n=localStorage.getItem("chosenRelicId"),_=localStorage.getItem("curStageId");Xe.set(!0),l&&e(1,q=parseInt(l)),o&&e(0,U=parseInt(o)),n&&e(16,c=We.find(d=>d.id===parseInt(n))),_&&e(2,F=Qe.find(d=>d.id===parseInt(_))),S=Le.filter(d=>d.stageId===F.id),e(3,t=S[0]),e(4,f=t.hp+c.hpMod),e(5,I=t.mp+c.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),L=Ze.filter(d=>d.stageId===F.id),e(6,p=L[Math.floor(Math.random()*L.length)]),e(7,g=p.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+p.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+p.img.slice(0,-4)+"_attack.png"})`),$=!0}catch(l){console.error(l)}}),tt(()=>{Xe.set(!1),clearTimeout(N),clearTimeout(te),clearTimeout(ae),clearTimeout(ue)});const k=()=>J(t.attackName,t.attackType),ge=l=>{l.preventDefault(),J(t.specialName,t.specialType)},he=()=>J(t.specialName,t.specialType),Me=()=>K(),X=()=>ce(),Z=()=>{rt(B+"/game/world")};return r.$$.update=()=>{r.$$.dirty[0]&65539&&ye()},[U,q,F,t,f,I,p,g,R,V,G,Q,W,J,K,ce,c,k,ge,he,Me,X,Z]}class dt extends at{constructor(m){super(),st(this,m,ot,ct,xe,{},null,[-1,-1])}}export{dt as component};
