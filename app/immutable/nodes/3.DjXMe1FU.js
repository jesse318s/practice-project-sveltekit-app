import{s as Se,d as ie,e as Te,n as Pe,r as we,o as Ne,f as Re}from"../chunks/scheduler.BoReh3vH.js";import{S as qe,i as Ve,e as _,t as q,s as w,c as v,a as V,b as j,d as N,f as R,y as pe,o as i,z as Z,g as je,h as a,A as me,j as le}from"../chunks/index.DhL7nboW.js";import{i as De}from"../chunks/store.BxR7W1V8.js";const ue=[{id:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"}],Ae=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],de=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function He(o){let p,e,S,z,t,s,O,u,h,F,n,b,T,W,g,d,B,A,K,L,U,X,Q,y,x,$,ee,D,ce="Attack",te,H,ne="Special Attack",oe,J,ae,r,l,m,k,E,P,C,M,G,I,ve="Swap Summon",fe,Y,Ee="View Stats",he,be;return{c(){p=_("div"),e=_("div"),S=_("div"),z=q("Player HP: "),t=q(o[3]),s=w(),O=_("div"),u=q("Player MP: "),h=q(o[4]),F=w(),n=_("div"),b=q("Enemy HP: "),T=q(o[6]),W=w(),g=_("div"),d=_("img"),K=w(),L=_("div"),U=_("div"),Q=w(),y=_("img"),ee=w(),D=_("button"),D.textContent=ce,te=w(),H=_("button"),H.textContent=ne,oe=w(),J=_("div"),ae=q(o[7]),r=w(),l=_("div"),m=q("Experience: "),k=q(o[0]),E=w(),P=_("div"),C=q("Drachmas: "),M=q(o[1]),G=w(),I=_("button"),I.textContent=ve,fe=w(),Y=_("button"),Y.textContent=Ee,this.h()},l(f){p=v(f,"DIV",{class:!0});var c=V(p);e=v(c,"DIV",{class:!0});var se=V(e);S=v(se,"DIV",{});var ge=V(S);z=j(ge,"Player HP: "),t=j(ge,o[3]),ge.forEach(N),s=R(se),O=v(se,"DIV",{});var ke=V(O);u=j(ke,"Player MP: "),h=j(ke,o[4]),ke.forEach(N),F=R(se),n=v(se,"DIV",{});var Me=V(n);b=j(Me,"Enemy HP: "),T=j(Me,o[6]),Me.forEach(N),se.forEach(N),W=R(c),g=v(c,"DIV",{class:!0});var re=V(g);d=v(re,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),K=R(re),L=v(re,"DIV",{class:!0});var Ce=V(L);U=v(Ce,"DIV",{class:!0}),V(U).forEach(N),Ce.forEach(N),Q=R(re),y=v(re,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),re.forEach(N),ee=R(c),D=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(D)!=="svelte-ig8gg4"&&(D.textContent=ce),te=R(c),H=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(H)!=="svelte-11zl5of"&&(H.textContent=ne),oe=R(c),J=v(c,"DIV",{class:!0});var Ie=V(J);ae=j(Ie,o[7]),Ie.forEach(N),r=R(c),l=v(c,"DIV",{class:!0});var ye=V(l);m=j(ye,"Experience: "),k=j(ye,o[0]),ye.forEach(N),E=R(c),P=v(c,"DIV",{class:!0});var _e=V(P);C=j(_e,"Drachmas: "),M=j(_e,o[1]),_e.forEach(N),G=R(c),I=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(I)!=="svelte-1c1ym4l"&&(I.textContent=ve),fe=R(c),Y=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),pe(Y)!=="svelte-z72cka"&&(Y.textContent=Ee),c.forEach(N),this.h()},h(){i(e,"class","stats svelte-1eqo32i"),ie(d.src,B=o[2].img)||i(d,"src",B),i(d,"width","128px"),i(d,"height","128px"),i(d,"alt",A=o[2].name),i(d,"class","svelte-1eqo32i"),Z(d,"attack",o[8]),Z(d,"hurt",o[10]),i(U,"class",X=Te(o[9]?o[2].specialEffect:"")+" svelte-1eqo32i"),i(L,"class","special-effect-container svelte-1eqo32i"),i(y,"class","enemy-creature svelte-1eqo32i"),ie(y.src,x=o[5].img)||i(y,"src",x),i(y,"width","128px"),i(y,"height","128px"),i(y,"alt",$=o[5].name),Z(y,"enemy-attack",o[10]),Z(y,"enemy-hurt",o[8]),i(g,"class","creatures svelte-1eqo32i"),i(D,"class","svelte-1eqo32i"),i(H,"class","svelte-1eqo32i"),i(J,"class","combat-alert svelte-1eqo32i"),i(l,"class","experience svelte-1eqo32i"),i(P,"class","drachmas svelte-1eqo32i"),i(I,"class","svelte-1eqo32i"),i(Y,"class","svelte-1eqo32i"),i(p,"class","game-container svelte-1eqo32i")},m(f,c){je(f,p,c),a(p,e),a(e,S),a(S,z),a(S,t),a(e,s),a(e,O),a(O,u),a(O,h),a(e,F),a(e,n),a(n,b),a(n,T),a(p,W),a(p,g),a(g,d),a(g,K),a(g,L),a(L,U),a(g,Q),a(g,y),a(p,ee),a(p,D),a(p,te),a(p,H),a(p,oe),a(p,J),a(J,ae),a(p,r),a(p,l),a(l,m),a(l,k),a(p,E),a(p,P),a(P,C),a(P,M),a(p,G),a(p,I),a(p,fe),a(p,Y),he||(be=[me(D,"click",o[15]),me(H,"click",o[16]),me(I,"click",o[17]),me(Y,"click",o[18])],he=!0)},p(f,c){c[0]&8&&le(t,f[3]),c[0]&16&&le(h,f[4]),c[0]&64&&le(T,f[6]),c[0]&4&&!ie(d.src,B=f[2].img)&&i(d,"src",B),c[0]&4&&A!==(A=f[2].name)&&i(d,"alt",A),c[0]&256&&Z(d,"attack",f[8]),c[0]&1024&&Z(d,"hurt",f[10]),c[0]&516&&X!==(X=Te(f[9]?f[2].specialEffect:"")+" svelte-1eqo32i")&&i(U,"class",X),c[0]&32&&!ie(y.src,x=f[5].img)&&i(y,"src",x),c[0]&32&&$!==($=f[5].name)&&i(y,"alt",$),c[0]&1024&&Z(y,"enemy-attack",f[10]),c[0]&256&&Z(y,"enemy-hurt",f[8]),c[0]&128&&le(ae,f[7]),c[0]&1&&le(k,f[0]),c[0]&2&&le(M,f[1])},i:Pe,o:Pe,d(f){f&&N(p),he=!1,we(be)}}}function Ge(o,p,e){let S=0,z=0,t=ue[0],s=Ae[0],O=!1,u=t.hp+s.hpMod,h=t.mp+s.mpMod,F=h,n=de[Math.floor(Math.random()*de.length)],b=n.hp,T="",W=0,g=!1,d=!1,B=!1,A=null,K=null,L=null;const U=()=>{if(h!==t.mp+s.mpMod&&h+t.mpRegen+s.mpRegenMod<=t.mp+s.mpMod){e(4,h=h+t.mpRegen+s.mpRegenMod);return}e(4,h=t.mp+s.mpMod)},X=(r,l)=>{if(u-(n.attack-n.attack*r)*l<=0){e(7,T="Defeat!"),e(3,u=0);return}e(3,u=u-(n.attack-n.attack*r)*l)},Q=(r,l,m)=>{try{const k=t.speed+s.speedMod;let E=(t.defense+s.defenseMod)/100,P=n.critical/100,C=1,M=!1;if(n.attackType==="Magic"&&(E=0),n.speed<k?M=Math.random()>=.5:M=Math.random()>=.8,W>1&&!M&&!r&&(M=!0),!M&&r&&e(7,T="Enemy was too slow!"),!M&&!r){e(4,h=F),W+=1,D(l,m);return}l===t.attackName&&U(),M&&r&&e(7,T="Both abilities succeeded."),M&&!r&&e(7,T="Your summon was too slow!"),M&&(Math.random()<=P&&(C=1.5),n.attackType==="Poison"&&C===1&&(C=1.5),X(E,C),e(10,B=!0),L=setTimeout(()=>e(10,B=!1),500))}catch(k){console.error(k)}},y=(r,l,m,k,E)=>{E==="Lifesteal"&&m&&(u+r*l*.2>t.hp+s.hpMod?e(3,u=t.hp+s.hpMod):e(3,u=u+r*l*.2)),Q(m,k,E)},x=(r,l,m,k,E)=>{r&&(u+l*m>t.hp+s.hpMod?e(3,u=t.hp+s.hpMod):e(3,u=u+l*m)),Q(r,k,E)},$=(r,l,m,k,E,P,C)=>{if(e(4,h=h-m),C!=="Heal"){if(b-(l-l*E)*k<=0&&r){e(6,b=0),e(7,T="Victory!"),e(0,S+=n.reward*2),e(1,z+=n.reward),e(8,g=!0),A=setTimeout(()=>e(8,g=!1),500),e(9,d=!0),K=setTimeout(()=>e(9,d=!1),500);return}r&&(e(6,b=b-(l-l*E)*k),e(8,g=!0),A=setTimeout(()=>e(8,g=!1),500),e(9,d=!0),K=setTimeout(()=>e(9,d=!1),500)),y(l,k,r,P,C);return}x(r,l,k,P,C)},ee=()=>{(u<=0||b<=0)&&(e(3,u=t.hp+s.hpMod),e(4,h=t.mp+s.mpMod),e(5,n=de[Math.floor(Math.random()*de.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),e(6,b=n.hp),e(7,T=""))},D=(r,l)=>{try{const m=t.attack+s.attackMod,k=t.speed+s.speedMod,E=(t.critical+s.criticalMod)/100;let P=t.special+s.specialMod,C=t.specialCost,M=n.defense/100,G=!1,I=1;if(ee(),l==="Magic"&&(M=0),k<n.speed?G=Math.random()>=.5:G=Math.random()>=.8,Math.random()<=E&&(I=1.5),l==="Poison"&&I===1&&(I=1.5),r===t.attackName){if(b-(m-m*M)*I<=0&&G){e(6,b=0),e(7,T="Victory!"),e(0,S+=n.reward*2),e(1,z+=n.reward),e(8,g=!0),A=setTimeout(()=>e(8,g=!1),500);return}G&&(e(6,b=b-(m-m*M)*I),e(8,g=!0),A=setTimeout(()=>e(8,g=!1),500)),Q(G,r,l);return}h>=C?$(G,P,C,I,M,r,l):e(7,T="Not enough MP!")}catch(m){console.error(m)}},ce=()=>{try{if(e(3,u=0),ee(),t===ue[0]){e(2,t=ue[1]),e(3,u=t.hp+s.hpMod),e(4,h=t.mp+s.mpMod),F=h,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`);return}e(2,t=ue[0]),e(3,u=t.hp+s.hpMod),e(4,h=t.mp+s.mpMod),F=h,document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(r){console.error(r)}},te=()=>{try{const l=[{label:"ID",value:t.id},{label:"Name",value:t.name},{label:"HP",value:t.hp+s.hpMod},{label:"Speed",value:t.speed+s.speedMod},{label:"Defense",value:t.defense+s.defenseMod},{label:"Critical",value:t.critical+s.criticalMod},{label:"MP",value:t.mp+s.mpMod},{label:"MP Regen",value:t.mpRegen+s.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+s.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+s.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(m=>`${m.label}: ${m.value}`).join(`
`);alert(l)}catch(r){console.error(r)}},H=()=>{O&&(localStorage.setItem("drachmas",z),localStorage.setItem("playerExperience",S),localStorage.setItem("chosenRelic",JSON.stringify(s)))};Ne(()=>{try{const r=localStorage.getItem("drachmas"),l=localStorage.getItem("playerExperience"),m=localStorage.getItem("chosenRelic");De.set(!0),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),r&&e(1,z=parseInt(r)),l&&e(0,S=parseInt(l)),m&&e(14,s=JSON.parse(m)),O=!0}catch(r){console.error(r)}}),Re(()=>{De.set(!1),clearTimeout(A),clearTimeout(K),clearTimeout(L)});const ne=()=>D(t.attackName,t.attackType),oe=()=>D(t.specialName,t.specialType),J=()=>ce(),ae=()=>te();return o.$$.update=()=>{o.$$.dirty[0]&16387&&H()},[S,z,t,u,h,n,b,T,g,d,B,D,ce,te,s,ne,oe,J,ae]}class Be extends qe{constructor(p){super(),Ve(this,p,Ge,He,Se,{},null,[-1,-1])}}export{Be as component};
