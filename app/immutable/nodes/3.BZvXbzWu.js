import{s as Ee,d as pe,e as ge,n as ke,r as we,o as Ce,f as Te}from"../chunks/scheduler.BoReh3vH.js";import{S as De,i as Ie,e as C,t as j,s as G,c as T,a as b,b as A,d as v,f as z,y as _e,o as p,z as S,g as Pe,h as t,A as Me,j as $}from"../chunks/index.DhL7nboW.js";import{i as ye}from"../chunks/store.BxR7W1V8.js";const re=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function ve(l){let m,e,R,U,s,n,i,E,K,c,g,D,q,I,w,M,B,Y,L,O,Q,F,k,W,X,ee,P,ae="Attack",te,r,o="Special Attack",f,u,y,H,h,_,V,N,J,le,se,ce,fe;return{c(){m=C("div"),e=C("div"),R=C("div"),U=j("Player HP: "),s=j(l[2]),n=G(),i=C("div"),E=j("Player MP: "),K=j(l[3]),c=G(),g=C("div"),D=j("Enemy HP: "),q=j(l[5]),I=G(),w=C("div"),M=C("img"),Y=G(),L=C("div"),O=C("div"),F=G(),k=C("img"),ee=G(),P=C("button"),P.textContent=ae,te=G(),r=C("button"),r.textContent=o,f=G(),u=C("div"),y=j(l[6]),H=G(),h=C("div"),_=j("Experience: "),V=j(l[0]),N=G(),J=C("div"),le=j("Drachmas: "),se=j(l[1]),this.h()},l(d){m=T(d,"DIV",{class:!0});var a=b(m);e=T(a,"DIV",{class:!0});var Z=b(e);R=T(Z,"DIV",{});var oe=b(R);U=A(oe,"Player HP: "),s=A(oe,l[2]),oe.forEach(v),n=z(Z),i=T(Z,"DIV",{});var ne=b(i);E=A(ne,"Player MP: "),K=A(ne,l[3]),ne.forEach(v),c=z(Z),g=T(Z,"DIV",{});var me=b(g);D=A(me,"Enemy HP: "),q=A(me,l[5]),me.forEach(v),Z.forEach(v),I=z(a),w=T(a,"DIV",{class:!0});var x=b(w);M=T(x,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),Y=z(x),L=T(x,"DIV",{class:!0});var de=b(L);O=T(de,"DIV",{class:!0}),b(O).forEach(v),de.forEach(v),F=z(x),k=T(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(v),ee=z(a),P=T(a,"BUTTON",{"data-svelte-h":!0}),_e(P)!=="svelte-ig8gg4"&&(P.textContent=ae),te=z(a),r=T(a,"BUTTON",{"data-svelte-h":!0}),_e(r)!=="svelte-11zl5of"&&(r.textContent=o),f=z(a),u=T(a,"DIV",{class:!0});var he=b(u);y=A(he,l[6]),he.forEach(v),H=z(a),h=T(a,"DIV",{class:!0});var ie=b(h);_=A(ie,"Experience: "),V=A(ie,l[0]),ie.forEach(v),N=z(a),J=T(a,"DIV",{class:!0});var ue=b(J);le=A(ue,"Drachmas: "),se=A(ue,l[1]),ue.forEach(v),a.forEach(v),this.h()},h(){p(e,"class","stats svelte-gjklwc"),pe(M.src,B=l[10].img)||p(M,"src",B),p(M,"alt",l[10].name),p(M,"width","128px"),p(M,"height","128px"),p(M,"class","svelte-gjklwc"),S(M,"attack",l[7]),S(M,"hurt",l[9]),p(O,"class",Q=ge(l[8]?l[10].specialEffect:"")+" svelte-gjklwc"),p(L,"class","special-effect-container svelte-gjklwc"),p(k,"class","enemy-creature svelte-gjklwc"),pe(k.src,W=l[4].img)||p(k,"src",W),p(k,"alt",X=l[4].name),p(k,"width","128px"),p(k,"height","128px"),S(k,"enemy-attack",l[9]),S(k,"enemy-hurt",l[7]),p(w,"class","creatures svelte-gjklwc"),p(u,"class","combat-alert svelte-gjklwc"),p(h,"class","experience svelte-gjklwc"),p(J,"class","drachmas svelte-gjklwc"),p(m,"class","game-container svelte-gjklwc")},m(d,a){Pe(d,m,a),t(m,e),t(e,R),t(R,U),t(R,s),t(e,n),t(e,i),t(i,E),t(i,K),t(e,c),t(e,g),t(g,D),t(g,q),t(m,I),t(m,w),t(w,M),t(w,Y),t(w,L),t(L,O),t(w,F),t(w,k),t(m,ee),t(m,P),t(m,te),t(m,r),t(m,f),t(m,u),t(u,y),t(m,H),t(m,h),t(h,_),t(h,V),t(m,N),t(m,J),t(J,le),t(J,se),ce||(fe=[Me(P,"click",l[12]),Me(r,"click",l[13])],ce=!0)},p(d,[a]){a&4&&$(s,d[2]),a&8&&$(K,d[3]),a&32&&$(q,d[5]),a&128&&S(M,"attack",d[7]),a&512&&S(M,"hurt",d[9]),a&256&&Q!==(Q=ge(d[8]?d[10].specialEffect:"")+" svelte-gjklwc")&&p(O,"class",Q),a&16&&!pe(k.src,W=d[4].img)&&p(k,"src",W),a&16&&X!==(X=d[4].name)&&p(k,"alt",X),a&512&&S(k,"enemy-attack",d[9]),a&128&&S(k,"enemy-hurt",d[7]),a&64&&$(y,d[6]),a&1&&$(V,d[0]),a&2&&$(se,d[1])},i:ke,o:ke,d(d){d&&v(m),ce=!1,we(fe)}}}function Ve(l,m,e){let R=0,U=0,s={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},n={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},i=s.hp+n.hpMod,E=s.mp+n.mpMod,K=E,c=re[Math.floor(Math.random()*re.length)],g=c.hp,D="",q=0,I=!1,w=!1,M=!1,B=null,Y=null,L=null;const O=()=>{if(E!==s.mp+n.mpMod&&E+s.mpRegen+n.mpRegenMod<=s.mp+n.mpMod){e(3,E=E+s.mpRegen+n.mpRegenMod);return}e(3,E=s.mp+n.mpMod)},Q=(r,o)=>{if(i-(c.attack-c.attack*r)*o<=0){e(6,D="Defeat!"),e(2,i=0);return}e(2,i=i-(c.attack-c.attack*r)*o)},F=(r,o,f)=>{try{const u=s.speed+n.speedMod;let y=(s.defense+n.defenseMod)/100,H=c.critical/100,h=1,_=!1;if(c.attackType==="Magic"&&(y=0),c.speed<u?_=Math.random()>=.5:_=Math.random()>=.8,q>1&&!_&&!r&&(_=!0),!_&&r&&e(6,D="Enemy was too slow!"),!_&&!r){e(3,E=K),q+=1,P(o,f);return}o===s.attackName&&O(),_&&r&&e(6,D="Both abilities succeeded."),_&&!r&&e(6,D="Your summon was too slow!"),_&&(Math.random()<=H&&(h=1.5),c.attackType==="Poison"&&h===1&&(h=1.5),Q(y,h),e(9,M=!0),L=setTimeout(()=>e(9,M=!1),500))}catch(u){console.error(u)}},k=(r,o,f,u,y)=>{y==="Lifesteal"&&f&&(i+r*o*.2>s.hp+n.hpMod?e(2,i=s.hp+n.hpMod):e(2,i=i+r*o*.2)),F(f,u,y)},W=(r,o,f,u,y)=>{r&&(i+o*f>s.hp+n.hpMod?e(2,i=s.hp+n.hpMod):e(2,i=i+o*f)),F(r,u,y)},X=(r,o,f,u,y,H,h)=>{if(e(3,E=E-f),h!=="Heal"){if(g-(o-o*y)*u<=0&&r){e(5,g=0),e(6,D="Victory!"),e(0,R+=c.reward*2),e(1,U+=c.reward),e(7,I=!0),B=setTimeout(()=>e(7,I=!1),500),e(8,w=!0),Y=setTimeout(()=>e(8,w=!1),500);return}r&&(e(5,g=g-(o-o*y)*u),e(7,I=!0),B=setTimeout(()=>e(7,I=!1),500),e(8,w=!0),Y=setTimeout(()=>e(8,w=!1),500)),k(o,u,r,H,h);return}W(r,o,u,H,h)},ee=()=>{(i<=0||g<=0)&&(e(2,i=s.hp+n.hpMod),e(3,E=s.mp+n.mpMod),e(4,c=re[Math.floor(Math.random()*re.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${c.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${c.img.slice(0,-4)+"_attack.png"})`),e(5,g=c.hp),e(6,D=""))},P=(r,o)=>{try{const f=s.attack+n.attackMod,u=s.speed+n.speedMod,y=(s.critical+n.criticalMod)/100;let H=s.special+n.specialMod,h=s.specialCost,_=c.defense/100,V=!1,N=1;if(ee(),o==="Magic"&&(_=0),u<c.speed?V=Math.random()>=.5:V=Math.random()>=.8,Math.random()<=y&&(N=1.5),o==="Poison"&&N===1&&(N=1.5),r===s.attackName){if(g-(f-f*_)*N<=0&&V){e(5,g=0),e(6,D="Victory!"),e(0,R+=c.reward*2),e(1,U+=c.reward),e(7,I=!0),B=setTimeout(()=>e(7,I=!1),500);return}V&&(e(5,g=g-(f-f*_)*N),e(7,I=!0),B=setTimeout(()=>e(7,I=!1),500)),F(V,r,o);return}E>=h?X(V,H,h,N,_,r,o):e(6,D="Not enough MP!")}catch(f){console.error(f)}};return Ce(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${s.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${c.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${c.img.slice(0,-4)+"_attack.png"})`),ye.set(!0)}),Te(()=>{ye.set(!1),clearTimeout(B),clearTimeout(Y),clearTimeout(L)}),[R,U,i,E,c,g,D,I,w,M,s,P,()=>P(s.attackName,s.attackType),()=>P(s.specialName,s.specialType)]}class Re extends De{constructor(m){super(),Ie(this,m,Ve,ve,Ee,{})}}export{Re as component};
