import{s as ut,d as Ae,e as ct,n as ot,r as dt,o as ft,f as gt}from"../chunks/scheduler.BoReh3vH.js";import{S as ht,i as kt,e as d,t as T,s as C,c as f,a as M,b,d as v,f as D,y as De,o as i,z as P,g as _t,h as a,A as ve,j as J}from"../chunks/index.BklZDJd0.js";import{s as nt,r as it}from"../chunks/relics.Bej4_qsT.js";import{i as mt}from"../chunks/store.Cn0GNUQE.js";import{b as B,g as yt}from"../chunks/entry.DVlY9GWF.js";const We=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],pt=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function vt(o){let m,e,O=o[2].name+"",G,j,N,t,n,ae,k,I=o[3].hp+"",L,u,y,V,se,R,U=o[3].mp+"",Q,W,w,le,re,pe,ce=o[6].hp+"",ue,oe,X,q,F,A,g,de,fe,Me,ne,Ie,Z,ge,l,r,c,_,h,Y,S,E,H,z,Se,He,Ee,ze,K,Xe="Attack",Be,x,Ze="Special",Le,he,Ne,Oe,ie,Ue,we,Ge,me,je,Pe,qe,$,xe="Mimic Summon",Fe,ee,$e="View Stats",Ye,te,et="Travel",Je,tt;return{c(){m=d("div"),e=d("h2"),G=T(O),j=C(),N=d("div"),t=d("div"),n=T("Player HP: "),ae=T(o[4]),k=T("/"),L=T(I),u=C(),y=d("div"),V=T("Player MP: "),se=T(o[5]),R=T("/"),Q=T(U),W=C(),w=d("div"),le=T("Enemy HP: "),re=T(o[7]),pe=T("/"),ue=T(ce),oe=C(),X=d("div"),q=d("div"),F=d("div"),A=d("div"),g=d("img"),Me=C(),ne=d("div"),Ie=C(),Z=d("div"),l=C(),r=d("div"),c=d("img"),Y=C(),S=d("div"),E=C(),H=d("div"),z=d("div"),He=C(),Ee=d("div"),ze=C(),K=d("button"),K.textContent=Xe,Be=C(),x=d("button"),x.textContent=Ze,Le=C(),he=d("div"),Ne=T(o[8]),Oe=C(),ie=d("div"),Ue=T("Experience: "),we=T(o[0]),Ge=C(),me=d("div"),je=T("Drachmas: "),Pe=T(o[1]),qe=C(),$=d("button"),$.textContent=xe,Fe=C(),ee=d("button"),ee.textContent=$e,Ye=C(),te=d("button"),te.textContent=et,this.h()},l(p){m=f(p,"DIV",{class:!0});var s=M(m);e=f(s,"H2",{});var at=M(e);G=b(at,O),at.forEach(v),j=D(s),N=f(s,"DIV",{class:!0});var ke=M(N);t=f(ke,"DIV",{});var Te=M(t);n=b(Te,"Player HP: "),ae=b(Te,o[4]),k=b(Te,"/"),L=b(Te,I),Te.forEach(v),u=D(ke),y=f(ke,"DIV",{});var Ce=M(y);V=b(Ce,"Player MP: "),se=b(Ce,o[5]),R=b(Ce,"/"),Q=b(Ce,U),Ce.forEach(v),W=D(ke),w=f(ke,"DIV",{});var be=M(w);le=b(be,"Enemy HP: "),re=b(be,o[7]),pe=b(be,"/"),ue=b(be,ce),be.forEach(v),ke.forEach(v),oe=D(s),X=f(s,"DIV",{class:!0});var st=M(X);q=f(st,"DIV",{class:!0});var Ve=M(q);F=f(Ve,"DIV",{class:!0});var Re=M(F);A=f(Re,"DIV",{class:!0});var _e=M(A);g=f(_e,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Me=D(_e),ne=f(_e,"DIV",{class:!0}),M(ne).forEach(v),Ie=D(_e),Z=f(_e,"DIV",{class:!0}),M(Z).forEach(v),_e.forEach(v),l=D(Re),r=f(Re,"DIV",{class:!0});var ye=M(r);c=f(ye,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Y=D(ye),S=f(ye,"DIV",{class:!0}),M(S).forEach(v),E=D(ye),H=f(ye,"DIV",{class:!0});var lt=M(H);z=f(lt,"DIV",{class:!0}),M(z).forEach(v),lt.forEach(v),ye.forEach(v),Re.forEach(v),He=D(Ve),Ee=f(Ve,"DIV",{class:!0}),M(Ee).forEach(v),Ve.forEach(v),st.forEach(v),ze=D(s),K=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(K)!=="svelte-19y3ioo"&&(K.textContent=Xe),Be=D(s),x=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(x)!=="svelte-172d9ub"&&(x.textContent=Ze),Le=D(s),he=f(s,"DIV",{class:!0});var rt=M(he);Ne=b(rt,o[8]),rt.forEach(v),Oe=D(s),ie=f(s,"DIV",{class:!0});var Ke=M(ie);Ue=b(Ke,"Experience: "),we=b(Ke,o[0]),Ke.forEach(v),Ge=D(s),me=f(s,"DIV",{class:!0});var Qe=M(me);je=b(Qe,"Drachmas: "),Pe=b(Qe,o[1]),Qe.forEach(v),qe=D(s),$=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De($)!=="svelte-zspdcm"&&($.textContent=xe),Fe=D(s),ee=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-wou4mf"&&(ee.textContent=$e),Ye=D(s),te=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-1hg8zdr"&&(te.textContent=et),s.forEach(v),this.h()},h(){i(N,"class","stats svelte-1isd0ku"),Ae(g.src,de=B+"/game/"+o[3].img)||i(g,"src",de),i(g,"width","128px"),i(g,"height","128px"),i(g,"alt",fe=o[3].name),i(g,"class","svelte-1isd0ku"),P(g,"attack",o[9]),P(g,"hurt",o[11]),P(g,"aura",!o[10]),P(g,"player-using-special",o[10]),i(ne,"class","shadow svelte-1isd0ku"),i(Z,"class",ge=ct(o[10]?o[3].specialEffect:"")+" svelte-1isd0ku"),i(A,"class","creature player-creature svelte-1isd0ku"),Ae(c.src,_=B+"/game/"+o[6].img)||i(c,"src",_),i(c,"width","128px"),i(c,"height","128px"),i(c,"alt",h=o[6].name),i(c,"class","svelte-1isd0ku"),P(c,"enemy-attack",o[11]),P(c,"enemy-hurt",o[9]),P(c,"enemy-spawning",o[12]),i(S,"class","shadow svelte-1isd0ku"),i(z,"class",Se=o[12]?"enemy-spawn":""),i(H,"class","enemy-spawn-container svelte-1isd0ku"),i(r,"class","creature enemy-creature svelte-1isd0ku"),i(F,"class","creatures-container svelte-1isd0ku"),i(Ee,"class","floor svelte-1isd0ku"),i(q,"class","battlefield svelte-1isd0ku"),i(X,"class","battle-container svelte-1isd0ku"),i(K,"class","svelte-1isd0ku"),i(x,"class","svelte-1isd0ku"),i(he,"class","combat-alert svelte-1isd0ku"),i(ie,"class","experience svelte-1isd0ku"),i(me,"class","drachmas svelte-1isd0ku"),i($,"class","svelte-1isd0ku"),i(ee,"class","svelte-1isd0ku"),i(te,"class","svelte-1isd0ku"),i(m,"class","game-container svelte-1isd0ku")},m(p,s){_t(p,m,s),a(m,e),a(e,G),a(m,j),a(m,N),a(N,t),a(t,n),a(t,ae),a(t,k),a(t,L),a(N,u),a(N,y),a(y,V),a(y,se),a(y,R),a(y,Q),a(N,W),a(N,w),a(w,le),a(w,re),a(w,pe),a(w,ue),a(m,oe),a(m,X),a(X,q),a(q,F),a(F,A),a(A,g),a(A,Me),a(A,ne),a(A,Ie),a(A,Z),a(F,l),a(F,r),a(r,c),a(r,Y),a(r,S),a(r,E),a(r,H),a(H,z),a(q,He),a(q,Ee),a(m,ze),a(m,K),a(m,Be),a(m,x),a(m,Le),a(m,he),a(he,Ne),a(m,Oe),a(m,ie),a(ie,Ue),a(ie,we),a(m,Ge),a(m,me),a(me,je),a(me,Pe),a(m,qe),a(m,$),a(m,Fe),a(m,ee),a(m,Ye),a(m,te),Je||(tt=[ve(K,"click",o[17]),ve(K,"contextmenu",o[18]),ve(x,"click",o[19]),ve($,"click",o[14]),ve(ee,"click",o[15]),ve(te,"click",o[20])],Je=!0)},p(p,s){s[0]&4&&O!==(O=p[2].name+"")&&J(G,O),s[0]&16&&J(ae,p[4]),s[0]&8&&I!==(I=p[3].hp+"")&&J(L,I),s[0]&32&&J(se,p[5]),s[0]&8&&U!==(U=p[3].mp+"")&&J(Q,U),s[0]&128&&J(re,p[7]),s[0]&64&&ce!==(ce=p[6].hp+"")&&J(ue,ce),s[0]&8&&!Ae(g.src,de=B+"/game/"+p[3].img)&&i(g,"src",de),s[0]&8&&fe!==(fe=p[3].name)&&i(g,"alt",fe),s[0]&512&&P(g,"attack",p[9]),s[0]&2048&&P(g,"hurt",p[11]),s[0]&1024&&P(g,"aura",!p[10]),s[0]&1024&&P(g,"player-using-special",p[10]),s[0]&1032&&ge!==(ge=ct(p[10]?p[3].specialEffect:"")+" svelte-1isd0ku")&&i(Z,"class",ge),s[0]&64&&!Ae(c.src,_=B+"/game/"+p[6].img)&&i(c,"src",_),s[0]&64&&h!==(h=p[6].name)&&i(c,"alt",h),s[0]&2048&&P(c,"enemy-attack",p[11]),s[0]&512&&P(c,"enemy-hurt",p[9]),s[0]&4096&&P(c,"enemy-spawning",p[12]),s[0]&4096&&Se!==(Se=p[12]?"enemy-spawn":"")&&i(z,"class",Se),s[0]&256&&J(Ne,p[8]),s[0]&1&&J(we,p[0]),s[0]&2&&J(Pe,p[1])},i:ot,o:ot,d(p){p&&v(m),Je=!1,dt(tt)}}}function Mt(o,m,e){let O=0,G=0,j=nt[0],N=We.filter(l=>l.stageId===j.id),t=N[0],n=it[0],ae=!1,k=t.hp+n.hpMod,I=t.mp+n.mpMod,L=pt.filter(l=>l.stageId===j.id),u=L[Math.floor(Math.random()*L.length)],y=u.hp,V="",se=0,R=!1,U=!1,Q=!1,W=!1,w=null,le=null,re=null,pe=null;const ce=()=>{if(I!==t.mp+n.mpMod&&I+t.mpRegen+n.mpRegenMod<=t.mp+n.mpMod){e(5,I=I+t.mpRegen+n.mpRegenMod);return}e(5,I=t.mp+n.mpMod)},ue=(l,r)=>{if(k-(u.attack-u.attack*l)*r<=0){e(8,V="Defeat!"),e(4,k=0);return}e(4,k=k-(u.attack-u.attack*l)*r)},oe=(l,r,c)=>{try{const _=t.speed+n.speedMod;let h=(t.defense+n.defenseMod)/100,Y=u.critical/100,S=1,E=!1;if(u.attackType==="Magic"&&(h=0),u.speed<_?E=Math.random()>=.5:E=Math.random()>=.8,se>1&&!E&&!l&&(E=!0),!E&&l&&e(8,V="Enemy was too slow!"),!E&&!l){e(5,I=t.mp+n.mpMod),se+=1,g(r,c);return}r===t.attackName&&ce(),E&&l&&e(8,V="Both abilities succeeded."),E&&!l&&e(8,V="Your summon was too slow!"),E&&(Math.random()<=Y&&(S=1.5),u.attackType==="Poison"&&S===1&&(S=1.5),ue(h,S),e(11,Q=!0),re=setTimeout(()=>e(11,Q=!1),500))}catch(_){console.error(_)}},X=(l,r,c,_,h)=>{h==="Lifesteal"&&c&&(k+l*r*.2>t.hp+n.hpMod?e(4,k=t.hp+n.hpMod):e(4,k=k+l*r*.2)),oe(c,_,h)},q=(l,r,c,_,h)=>{l&&(k+r*c>t.hp+n.hpMod?e(4,k=t.hp+n.hpMod):e(4,k=k+r*c)),oe(l,_,h)},F=(l,r,c,_,h,Y,S)=>{if(e(5,I=I-c),S!=="Heal"){if(y-(r-r*h)*_<=0&&l){e(7,y=0),e(8,V="Victory!"),e(0,O+=u.reward*2),e(1,G+=u.reward),e(9,R=!0),w=setTimeout(()=>e(9,R=!1),500),e(10,U=!0),le=setTimeout(()=>e(10,U=!1),500);return}l&&(e(7,y=y-(r-r*h)*_),e(9,R=!0),w=setTimeout(()=>e(9,R=!1),500),e(10,U=!0),le=setTimeout(()=>e(10,U=!1),500)),X(r,_,l,Y,S);return}q(l,r,_,Y,S)},A=()=>{(k<=0||y<=0)&&(e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),e(12,W=!0),pe=setTimeout(()=>e(12,W=!1),500),e(6,u=L[Math.floor(Math.random()*L.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+u.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+u.img.slice(0,-4)+"_attack.png"})`),e(7,y=u.hp),e(8,V=""))},g=(l,r)=>{try{const c=t.attack+n.attackMod,_=t.speed+n.speedMod,h=(t.critical+n.criticalMod)/100;let Y=t.special+n.specialMod,S=t.specialCost,E=u.defense/100,H=!1,z=1;if(W)return;if(A(),r==="Magic"&&(E=0),_<u.speed?H=Math.random()>=.5:H=Math.random()>=.8,Math.random()<=h&&(z=1.5),r==="Poison"&&z===1&&(z=1.5),l===t.attackName){if(y-(c-c*E)*z<=0&&H){e(7,y=0),e(8,V="Victory!"),e(0,O+=u.reward*2),e(1,G+=u.reward),e(9,R=!0),w=setTimeout(()=>e(9,R=!1),500);return}H&&(e(7,y=y-(c-c*E)*z),e(9,R=!0),w=setTimeout(()=>e(9,R=!1),500)),oe(H,l,r);return}I>=S?F(H,Y,S,z,E,l,r):e(8,V="Not enough MP!")}catch(c){console.error(c)}},de=()=>{try{const l=u;e(4,k=0),A(),e(3,t=We.find(r=>r.id===l.id)),e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(l){console.error(l)}},fe=()=>{try{const r=[{label:"Name",value:t.name},{label:"HP",value:t.hp+n.hpMod},{label:"Speed",value:t.speed+n.speedMod},{label:"Defense",value:t.defense+n.defenseMod},{label:"Critical",value:t.critical+n.criticalMod},{label:"MP",value:t.mp+n.mpMod},{label:"MP Regen",value:t.mpRegen+n.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+n.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+n.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(c=>`${c.label}: ${c.value}`).join(`
`);alert(r)}catch(l){console.error(l)}},Me=()=>{ae&&(localStorage.setItem("drachmas",G),localStorage.setItem("playerExperience",O),localStorage.setItem("chosenRelicId",n.id))};ft(()=>{try{const l=localStorage.getItem("drachmas"),r=localStorage.getItem("playerExperience"),c=localStorage.getItem("chosenRelicId"),_=localStorage.getItem("curStageId");mt.set(!0),l&&e(1,G=parseInt(l)),r&&e(0,O=parseInt(r)),c&&e(16,n=it.find(h=>h.id===parseInt(c))),_&&e(2,j=nt.find(h=>h.id===parseInt(_))),N=We.filter(h=>h.stageId===j.id),e(3,t=N[0]),e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${B+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${B+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),L=pt.filter(h=>h.stageId===j.id),e(6,u=L[Math.floor(Math.random()*L.length)]),e(7,y=u.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${B+"/game/"+u.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${B+"/game/"+u.img.slice(0,-4)+"_attack.png"})`),ae=!0}catch(l){console.error(l)}}),gt(()=>{mt.set(!1),clearTimeout(w),clearTimeout(le),clearTimeout(re),clearTimeout(pe)});const ne=()=>g(t.attackName,t.attackType),Ie=l=>{l.preventDefault(),g(t.specialName,t.specialType)},Z=()=>g(t.specialName,t.specialType),ge=()=>{yt(B+"/game/world")};return o.$$.update=()=>{o.$$.dirty[0]&65539&&Me()},[O,G,j,t,k,I,u,y,V,R,U,Q,W,g,de,fe,n,ne,Ie,Z,ge]}class Dt extends ht{constructor(m){super(),kt(this,m,Mt,vt,ut,{},null,[-1,-1])}}export{Dt as component};
