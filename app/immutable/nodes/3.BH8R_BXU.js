import{s as xe,d as Se,e as Je,n as Ke,r as $e,o as et,f as tt}from"../chunks/scheduler.BoReh3vH.js";import{S as at,i as st,e as M,t as b,s as v,c as I,a as V,b as C,d as D,f as S,y as be,o as d,z as B,g as lt,h as a,A as ke,j as q}from"../chunks/index.BklZDJd0.js";import{s as Qe,r as We}from"../chunks/relics.9MHovSS4.js";import{i as Xe}from"../chunks/store.Cn0GNUQE.js";import{b as A,g as rt}from"../chunks/entry.BAviPusu.js";const Le=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],Ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function ct(r){let n,e,L=r[2].name+"",U,G,N,t,c,Z,f,T=r[3].hp+"",H,m,h,R,x,z,O=r[3].mp+"",K,Q,w,$,ee,me,te=r[6].hp+"",pe,ae,P,y,ie,se,F,W,ue,ye,_,de,fe,_e,s,o,u,k,p,Y="Attack",E,g,J="Special",j,ge,Ce,Ne,le,we,Ee,Pe,re,De,ve,Re,ce,Oe="Mimic Summon",ze,oe,Ue="View Stats",Ve,ne,Ge="Travel",Ae,je;return{c(){n=M("div"),e=M("h2"),U=b(L),G=v(),N=M("div"),t=M("div"),c=b("Player HP: "),Z=b(r[4]),f=b("/"),H=b(T),m=v(),h=M("div"),R=b("Player MP: "),x=b(r[5]),z=b("/"),K=b(O),Q=v(),w=M("div"),$=b("Enemy HP: "),ee=b(r[7]),me=b("/"),pe=b(te),ae=v(),P=M("div"),y=M("img"),F=v(),W=M("div"),ye=v(),_=M("img"),_e=v(),s=M("div"),o=M("div"),k=v(),p=M("button"),p.textContent=Y,E=v(),g=M("button"),g.textContent=J,j=v(),ge=M("div"),Ce=b(r[8]),Ne=v(),le=M("div"),we=b("Experience: "),Ee=b(r[0]),Pe=v(),re=M("div"),De=b("Drachmas: "),ve=b(r[1]),Re=v(),ce=M("button"),ce.textContent=Oe,ze=v(),oe=M("button"),oe.textContent=Ue,Ve=v(),ne=M("button"),ne.textContent=Ge,this.h()},l(i){n=I(i,"DIV",{class:!0});var l=V(n);e=I(l,"H2",{});var qe=V(e);U=C(qe,L),qe.forEach(D),G=S(l),N=I(l,"DIV",{class:!0});var he=V(N);t=I(he,"DIV",{});var Me=V(t);c=C(Me,"Player HP: "),Z=C(Me,r[4]),f=C(Me,"/"),H=C(Me,T),Me.forEach(D),m=S(he),h=I(he,"DIV",{});var Ie=V(h);R=C(Ie,"Player MP: "),x=C(Ie,r[5]),z=C(Ie,"/"),K=C(Ie,O),Ie.forEach(D),Q=S(he),w=I(he,"DIV",{});var Te=V(w);$=C(Te,"Enemy HP: "),ee=C(Te,r[7]),me=C(Te,"/"),pe=C(Te,te),Te.forEach(D),he.forEach(D),ae=S(l),P=I(l,"DIV",{class:!0});var X=V(P);y=I(X,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),F=S(X),W=I(X,"DIV",{class:!0}),V(W).forEach(D),ye=S(X),_=I(X,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),_e=S(X),s=I(X,"DIV",{class:!0});var Fe=V(s);o=I(Fe,"DIV",{class:!0}),V(o).forEach(D),Fe.forEach(D),X.forEach(D),k=S(l),p=I(l,"BUTTON",{"data-svelte-h":!0}),be(p)!=="svelte-19y3ioo"&&(p.textContent=Y),E=S(l),g=I(l,"BUTTON",{"data-svelte-h":!0}),be(g)!=="svelte-172d9ub"&&(g.textContent=J),j=S(l),ge=I(l,"DIV",{class:!0});var Ye=V(ge);Ce=C(Ye,r[8]),Ye.forEach(D),Ne=S(l),le=I(l,"DIV",{class:!0});var He=V(le);we=C(He,"Experience: "),Ee=C(He,r[0]),He.forEach(D),Pe=S(l),re=I(l,"DIV",{class:!0});var Be=V(re);De=C(Be,"Drachmas: "),ve=C(Be,r[1]),Be.forEach(D),Re=S(l),ce=I(l,"BUTTON",{"data-svelte-h":!0}),be(ce)!=="svelte-zspdcm"&&(ce.textContent=Oe),ze=S(l),oe=I(l,"BUTTON",{"data-svelte-h":!0}),be(oe)!=="svelte-wou4mf"&&(oe.textContent=Ue),Ve=S(l),ne=I(l,"BUTTON",{"data-svelte-h":!0}),be(ne)!=="svelte-1hg8zdr"&&(ne.textContent=Ge),l.forEach(D),this.h()},h(){d(N,"class","stats svelte-dfb9zx"),Se(y.src,ie=A+"/game/"+r[3].img)||d(y,"src",ie),d(y,"width","128px"),d(y,"height","128px"),d(y,"alt",se=r[3].name),d(y,"class","svelte-dfb9zx"),B(y,"attack",r[9]),B(y,"hurt",r[11]),B(y,"player-using-special",r[10]),d(W,"class",ue=Je(r[10]?r[3].specialEffect:"")+" svelte-dfb9zx"),d(_,"class","enemy-creature svelte-dfb9zx"),Se(_.src,de=A+"/game/"+r[6].img)||d(_,"src",de),d(_,"width","128px"),d(_,"height","128px"),d(_,"alt",fe=r[6].name),B(_,"enemy-attack",r[11]),B(_,"enemy-hurt",r[9]),B(_,"enemy-spawning",r[12]),d(o,"class",u=r[12]?"enemy-spawn":""),d(s,"class","enemy-spawn-container svelte-dfb9zx"),d(P,"class","creatures svelte-dfb9zx"),d(ge,"class","combat-alert svelte-dfb9zx"),d(le,"class","experience svelte-dfb9zx"),d(re,"class","drachmas svelte-dfb9zx"),d(n,"class","game-container svelte-dfb9zx")},m(i,l){lt(i,n,l),a(n,e),a(e,U),a(n,G),a(n,N),a(N,t),a(t,c),a(t,Z),a(t,f),a(t,H),a(N,m),a(N,h),a(h,R),a(h,x),a(h,z),a(h,K),a(N,Q),a(N,w),a(w,$),a(w,ee),a(w,me),a(w,pe),a(n,ae),a(n,P),a(P,y),a(P,F),a(P,W),a(P,ye),a(P,_),a(P,_e),a(P,s),a(s,o),a(n,k),a(n,p),a(n,E),a(n,g),a(n,j),a(n,ge),a(ge,Ce),a(n,Ne),a(n,le),a(le,we),a(le,Ee),a(n,Pe),a(n,re),a(re,De),a(re,ve),a(n,Re),a(n,ce),a(n,ze),a(n,oe),a(n,Ve),a(n,ne),Ae||(je=[ke(p,"click",r[17]),ke(p,"contextmenu",r[18]),ke(g,"click",r[19]),ke(ce,"click",r[14]),ke(oe,"click",r[15]),ke(ne,"click",r[20])],Ae=!0)},p(i,l){l[0]&4&&L!==(L=i[2].name+"")&&q(U,L),l[0]&16&&q(Z,i[4]),l[0]&8&&T!==(T=i[3].hp+"")&&q(H,T),l[0]&32&&q(x,i[5]),l[0]&8&&O!==(O=i[3].mp+"")&&q(K,O),l[0]&128&&q(ee,i[7]),l[0]&64&&te!==(te=i[6].hp+"")&&q(pe,te),l[0]&8&&!Se(y.src,ie=A+"/game/"+i[3].img)&&d(y,"src",ie),l[0]&8&&se!==(se=i[3].name)&&d(y,"alt",se),l[0]&512&&B(y,"attack",i[9]),l[0]&2048&&B(y,"hurt",i[11]),l[0]&1024&&B(y,"player-using-special",i[10]),l[0]&1032&&ue!==(ue=Je(i[10]?i[3].specialEffect:"")+" svelte-dfb9zx")&&d(W,"class",ue),l[0]&64&&!Se(_.src,de=A+"/game/"+i[6].img)&&d(_,"src",de),l[0]&64&&fe!==(fe=i[6].name)&&d(_,"alt",fe),l[0]&2048&&B(_,"enemy-attack",i[11]),l[0]&512&&B(_,"enemy-hurt",i[9]),l[0]&4096&&B(_,"enemy-spawning",i[12]),l[0]&4096&&u!==(u=i[12]?"enemy-spawn":"")&&d(o,"class",u),l[0]&256&&q(Ce,i[8]),l[0]&1&&q(Ee,i[0]),l[0]&2&&q(ve,i[1])},i:Ke,o:Ke,d(i){i&&D(n),Ae=!1,$e(je)}}}function ot(r,n,e){let L=0,U=0,G=Qe[0],N=Le.filter(s=>s.stageId===G.id),t=N[0],c=We[0],Z=!1,f=t.hp+c.hpMod,T=t.mp+c.mpMod,H=Ze.filter(s=>s.stageId===G.id),m=H[Math.floor(Math.random()*H.length)],h=m.hp,R="",x=0,z=!1,O=!1,K=!1,Q=!1,w=null,$=null,ee=null,me=null;const te=()=>{if(T!==t.mp+c.mpMod&&T+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(5,T=T+t.mpRegen+c.mpRegenMod);return}e(5,T=t.mp+c.mpMod)},pe=(s,o)=>{if(f-(m.attack-m.attack*s)*o<=0){e(8,R="Defeat!"),e(4,f=0);return}e(4,f=f-(m.attack-m.attack*s)*o)},ae=(s,o,u)=>{try{const k=t.speed+c.speedMod;let p=(t.defense+c.defenseMod)/100,Y=m.critical/100,E=1,g=!1;if(m.attackType==="Magic"&&(p=0),m.speed<k?g=Math.random()>=.5:g=Math.random()>=.8,x>1&&!g&&!s&&(g=!0),!g&&s&&e(8,R="Enemy was too slow!"),!g&&!s){e(5,T=t.mp+c.mpMod),x+=1,F(o,u);return}o===t.attackName&&te(),g&&s&&e(8,R="Both abilities succeeded."),g&&!s&&e(8,R="Your summon was too slow!"),g&&(Math.random()<=Y&&(E=1.5),m.attackType==="Poison"&&E===1&&(E=1.5),pe(p,E),e(11,K=!0),ee=setTimeout(()=>e(11,K=!1),500))}catch(k){console.error(k)}},P=(s,o,u,k,p)=>{p==="Lifesteal"&&u&&(f+s*o*.2>t.hp+c.hpMod?e(4,f=t.hp+c.hpMod):e(4,f=f+s*o*.2)),ae(u,k,p)},y=(s,o,u,k,p)=>{s&&(f+o*u>t.hp+c.hpMod?e(4,f=t.hp+c.hpMod):e(4,f=f+o*u)),ae(s,k,p)},ie=(s,o,u,k,p,Y,E)=>{if(e(5,T=T-u),E!=="Heal"){if(h-(o-o*p)*k<=0&&s){e(7,h=0),e(8,R="Victory!"),e(0,L+=m.reward*2),e(1,U+=m.reward),e(9,z=!0),w=setTimeout(()=>e(9,z=!1),500),e(10,O=!0),$=setTimeout(()=>e(10,O=!1),500);return}s&&(e(7,h=h-(o-o*p)*k),e(9,z=!0),w=setTimeout(()=>e(9,z=!1),500),e(10,O=!0),$=setTimeout(()=>e(10,O=!1),500)),P(o,k,s,Y,E);return}y(s,o,k,Y,E)},se=()=>{(f<=0||h<=0)&&(e(4,f=t.hp+c.hpMod),e(5,T=t.mp+c.mpMod),e(12,Q=!0),me=setTimeout(()=>e(12,Q=!1),500),e(6,m=H[Math.floor(Math.random()*H.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${A+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${A+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),e(7,h=m.hp),e(8,R=""))},F=(s,o)=>{try{const u=t.attack+c.attackMod,k=t.speed+c.speedMod,p=(t.critical+c.criticalMod)/100;let Y=t.special+c.specialMod,E=t.specialCost,g=m.defense/100,J=!1,j=1;if(Q)return;if(se(),o==="Magic"&&(g=0),k<m.speed?J=Math.random()>=.5:J=Math.random()>=.8,Math.random()<=p&&(j=1.5),o==="Poison"&&j===1&&(j=1.5),s===t.attackName){if(h-(u-u*g)*j<=0&&J){e(7,h=0),e(8,R="Victory!"),e(0,L+=m.reward*2),e(1,U+=m.reward),e(9,z=!0),w=setTimeout(()=>e(9,z=!1),500);return}J&&(e(7,h=h-(u-u*g)*j),e(9,z=!0),w=setTimeout(()=>e(9,z=!1),500)),ae(J,s,o);return}T>=E?ie(J,Y,E,j,g,s,o):e(8,R="Not enough MP!")}catch(u){console.error(u)}},W=()=>{try{const s=m;e(4,f=0),se(),e(3,t=Le.find(o=>o.id===s.id)),e(4,f=t.hp+c.hpMod),e(5,T=t.mp+c.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${A+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${A+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(s){console.error(s)}},ue=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+c.hpMod},{label:"Speed",value:t.speed+c.speedMod},{label:"Defense",value:t.defense+c.defenseMod},{label:"Critical",value:t.critical+c.criticalMod},{label:"MP",value:t.mp+c.mpMod},{label:"MP Regen",value:t.mpRegen+c.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+c.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+c.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(u=>`${u.label}: ${u.value}`).join(`
`);alert(o)}catch(s){console.error(s)}},ye=()=>{Z&&(localStorage.setItem("drachmas",U),localStorage.setItem("playerExperience",L),localStorage.setItem("chosenRelicId",c.id))};et(()=>{try{const s=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),u=localStorage.getItem("chosenRelicId"),k=localStorage.getItem("curStageId");Xe.set(!0),s&&e(1,U=parseInt(s)),o&&e(0,L=parseInt(o)),u&&e(16,c=We.find(p=>p.id===parseInt(u))),k&&e(2,G=Qe.find(p=>p.id===parseInt(k))),N=Le.filter(p=>p.stageId===G.id),e(3,t=N[0]),e(4,f=t.hp+c.hpMod),e(5,T=t.mp+c.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${A+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${A+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),H=Ze.filter(p=>p.stageId===G.id),e(6,m=H[Math.floor(Math.random()*H.length)]),e(7,h=m.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${A+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${A+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),Z=!0}catch(s){console.error(s)}}),tt(()=>{Xe.set(!1),clearTimeout(w),clearTimeout($),clearTimeout(ee),clearTimeout(me)});const _=()=>F(t.attackName,t.attackType),de=s=>{s.preventDefault(),F(t.specialName,t.specialType)},fe=()=>F(t.specialName,t.specialType),_e=()=>{rt(A+"/game/world")};return r.$$.update=()=>{r.$$.dirty[0]&65539&&ye()},[L,U,G,t,f,T,m,h,R,z,O,K,Q,F,W,ue,c,_,de,fe,_e]}class dt extends at{constructor(n){super(),st(this,n,ot,ct,xe,{},null,[-1,-1])}}export{dt as component};
