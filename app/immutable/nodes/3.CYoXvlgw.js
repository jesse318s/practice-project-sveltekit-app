import{s as xe,d as Se,e as Je,n as Ke,r as $e,o as et,f as tt}from"../chunks/scheduler.BoReh3vH.js";import{S as at,i as st,e as k,t as T,s as v,c as _,a as H,b as C,d as D,f as S,y as Te,o as d,z as Z,g as lt,h as a,A as Ce,j as F}from"../chunks/index.BklZDJd0.js";import{s as Qe,r as We}from"../chunks/relics.9MHovSS4.js";import{i as Xe}from"../chunks/store.Cn0GNUQE.js";import{b as z,g as rt}from"../chunks/entry.ga-Ws6DT.js";const Le=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],Ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function ct(c){let n,e,L=c[2].name+"",U,G,N,t,r,x,g,y=c[3].hp+"",B,m,h,R,$,V,O=c[3].mp+"",J,K,P,ee,te,ie,ae=c[6].hp+"",ue,se,w,E,de,le,Q,Y,re,ke,I,fe,ge,_e,W,s,o,i,u,f="Attack",j,M,b="Special",q,A,Ee,Ne,ce,Pe,be,we,oe,De,ve,Re,ne,Oe="Mimic Summon",Ve,me,Ue="View Stats",Ae,pe,Ge="Travel",He,je;return{c(){n=k("div"),e=k("h2"),U=T(L),G=v(),N=k("div"),t=k("div"),r=T("Player HP: "),x=T(c[4]),g=T("/"),B=T(y),m=v(),h=k("div"),R=T("Player MP: "),$=T(c[5]),V=T("/"),J=T(O),K=v(),P=k("div"),ee=T("Enemy HP: "),te=T(c[7]),ie=T("/"),ue=T(ae),se=v(),w=k("div"),E=k("img"),Q=v(),Y=k("div"),ke=v(),I=k("img"),_e=v(),W=k("div"),s=k("div"),i=v(),u=k("button"),u.textContent=f,j=v(),M=k("button"),M.textContent=b,q=v(),A=k("div"),Ee=T(c[8]),Ne=v(),ce=k("div"),Pe=T("Experience: "),be=T(c[0]),we=v(),oe=k("div"),De=T("Drachmas: "),ve=T(c[1]),Re=v(),ne=k("button"),ne.textContent=Oe,Ve=v(),me=k("button"),me.textContent=Ue,Ae=v(),pe=k("button"),pe.textContent=Ge,this.h()},l(p){n=_(p,"DIV",{class:!0});var l=H(n);e=_(l,"H2",{});var qe=H(e);U=C(qe,L),qe.forEach(D),G=S(l),N=_(l,"DIV",{class:!0});var he=H(N);t=_(he,"DIV",{});var ye=H(t);r=C(ye,"Player HP: "),x=C(ye,c[4]),g=C(ye,"/"),B=C(ye,y),ye.forEach(D),m=S(he),h=_(he,"DIV",{});var Me=H(h);R=C(Me,"Player MP: "),$=C(Me,c[5]),V=C(Me,"/"),J=C(Me,O),Me.forEach(D),K=S(he),P=_(he,"DIV",{});var Ie=H(P);ee=C(Ie,"Enemy HP: "),te=C(Ie,c[7]),ie=C(Ie,"/"),ue=C(Ie,ae),Ie.forEach(D),he.forEach(D),se=S(l),w=_(l,"DIV",{class:!0});var X=H(w);E=_(X,"IMG",{src:!0,width:!0,height:!0,alt:!0}),Q=S(X),Y=_(X,"DIV",{class:!0}),H(Y).forEach(D),ke=S(X),I=_(X,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),_e=S(X),W=_(X,"DIV",{class:!0});var Fe=H(W);s=_(Fe,"DIV",{class:!0}),H(s).forEach(D),Fe.forEach(D),X.forEach(D),i=S(l),u=_(l,"BUTTON",{"data-svelte-h":!0}),Te(u)!=="svelte-ig8gg4"&&(u.textContent=f),j=S(l),M=_(l,"BUTTON",{"data-svelte-h":!0}),Te(M)!=="svelte-172d9ub"&&(M.textContent=b),q=S(l),A=_(l,"DIV",{class:!0});var Ye=H(A);Ee=C(Ye,c[8]),Ye.forEach(D),Ne=S(l),ce=_(l,"DIV",{class:!0});var ze=H(ce);Pe=C(ze,"Experience: "),be=C(ze,c[0]),ze.forEach(D),we=S(l),oe=_(l,"DIV",{class:!0});var Be=H(oe);De=C(Be,"Drachmas: "),ve=C(Be,c[1]),Be.forEach(D),Re=S(l),ne=_(l,"BUTTON",{"data-svelte-h":!0}),Te(ne)!=="svelte-lzajz"&&(ne.textContent=Oe),Ve=S(l),me=_(l,"BUTTON",{"data-svelte-h":!0}),Te(me)!=="svelte-z72cka"&&(me.textContent=Ue),Ae=S(l),pe=_(l,"BUTTON",{"data-svelte-h":!0}),Te(pe)!=="svelte-1hg8zdr"&&(pe.textContent=Ge),l.forEach(D),this.h()},h(){d(N,"class","stats svelte-ufaxhl"),Se(E.src,de=z+"/game/"+c[3].img)||d(E,"src",de),d(E,"width","128px"),d(E,"height","128px"),d(E,"alt",le=c[3].name),Z(E,"attack",c[9]),Z(E,"hurt",c[11]),d(Y,"class",re=Je(c[10]?c[3].specialEffect:"")+" svelte-ufaxhl"),d(I,"class","enemy-creature svelte-ufaxhl"),Se(I.src,fe=z+"/game/"+c[6].img)||d(I,"src",fe),d(I,"width","128px"),d(I,"height","128px"),d(I,"alt",ge=c[6].name),Z(I,"enemy-attack",c[11]),Z(I,"enemy-hurt",c[9]),d(s,"class",o=c[12]?"enemy-spawn":""),d(W,"class","enemy-spawn-container svelte-ufaxhl"),d(w,"class","creatures svelte-ufaxhl"),d(A,"class","combat-alert svelte-ufaxhl"),d(ce,"class","experience svelte-ufaxhl"),d(oe,"class","drachmas svelte-ufaxhl"),d(n,"class","game-container svelte-ufaxhl")},m(p,l){lt(p,n,l),a(n,e),a(e,U),a(n,G),a(n,N),a(N,t),a(t,r),a(t,x),a(t,g),a(t,B),a(N,m),a(N,h),a(h,R),a(h,$),a(h,V),a(h,J),a(N,K),a(N,P),a(P,ee),a(P,te),a(P,ie),a(P,ue),a(n,se),a(n,w),a(w,E),a(w,Q),a(w,Y),a(w,ke),a(w,I),a(w,_e),a(w,W),a(W,s),a(n,i),a(n,u),a(n,j),a(n,M),a(n,q),a(n,A),a(A,Ee),a(n,Ne),a(n,ce),a(ce,Pe),a(ce,be),a(n,we),a(n,oe),a(oe,De),a(oe,ve),a(n,Re),a(n,ne),a(n,Ve),a(n,me),a(n,Ae),a(n,pe),He||(je=[Ce(u,"click",c[17]),Ce(M,"click",c[18]),Ce(ne,"click",c[19]),Ce(me,"click",c[20]),Ce(pe,"click",c[21])],He=!0)},p(p,l){l[0]&4&&L!==(L=p[2].name+"")&&F(U,L),l[0]&16&&F(x,p[4]),l[0]&8&&y!==(y=p[3].hp+"")&&F(B,y),l[0]&32&&F($,p[5]),l[0]&8&&O!==(O=p[3].mp+"")&&F(J,O),l[0]&128&&F(te,p[7]),l[0]&64&&ae!==(ae=p[6].hp+"")&&F(ue,ae),l[0]&8&&!Se(E.src,de=z+"/game/"+p[3].img)&&d(E,"src",de),l[0]&8&&le!==(le=p[3].name)&&d(E,"alt",le),l[0]&512&&Z(E,"attack",p[9]),l[0]&2048&&Z(E,"hurt",p[11]),l[0]&1032&&re!==(re=Je(p[10]?p[3].specialEffect:"")+" svelte-ufaxhl")&&d(Y,"class",re),l[0]&64&&!Se(I.src,fe=z+"/game/"+p[6].img)&&d(I,"src",fe),l[0]&64&&ge!==(ge=p[6].name)&&d(I,"alt",ge),l[0]&2048&&Z(I,"enemy-attack",p[11]),l[0]&512&&Z(I,"enemy-hurt",p[9]),l[0]&4096&&o!==(o=p[12]?"enemy-spawn":"")&&d(s,"class",o),l[0]&256&&F(Ee,p[8]),l[0]&1&&F(be,p[0]),l[0]&2&&F(ve,p[1])},i:Ke,o:Ke,d(p){p&&D(n),He=!1,$e(je)}}}function ot(c,n,e){let L=0,U=0,G=Qe[0],N=Le.filter(s=>s.stageId===G.id),t=N[0],r=We[0],x=!1,g=t.hp+r.hpMod,y=t.mp+r.mpMod,B=Ze.filter(s=>s.stageId===G.id),m=B[Math.floor(Math.random()*B.length)],h=m.hp,R="",$=0,V=!1,O=!1,J=!1,K=!1,P=null,ee=null,te=null,ie=null;const ae=()=>{if(y!==t.mp+r.mpMod&&y+t.mpRegen+r.mpRegenMod<=t.mp+r.mpMod){e(5,y=y+t.mpRegen+r.mpRegenMod);return}e(5,y=t.mp+r.mpMod)},ue=(s,o)=>{if(g-(m.attack-m.attack*s)*o<=0){e(8,R="Defeat!"),e(4,g=0);return}e(4,g=g-(m.attack-m.attack*s)*o)},se=(s,o,i)=>{try{const u=t.speed+r.speedMod;let f=(t.defense+r.defenseMod)/100,j=m.critical/100,M=1,b=!1;if(m.attackType==="Magic"&&(f=0),m.speed<u?b=Math.random()>=.5:b=Math.random()>=.8,$>1&&!b&&!s&&(b=!0),!b&&s&&e(8,R="Enemy was too slow!"),!b&&!s){e(5,y=t.mp+r.mpMod),$+=1,Q(o,i);return}o===t.attackName&&ae(),b&&s&&e(8,R="Both abilities succeeded."),b&&!s&&e(8,R="Your summon was too slow!"),b&&(Math.random()<=j&&(M=1.5),m.attackType==="Poison"&&M===1&&(M=1.5),ue(f,M),e(11,J=!0),te=setTimeout(()=>e(11,J=!1),500))}catch(u){console.error(u)}},w=(s,o,i,u,f)=>{f==="Lifesteal"&&i&&(g+s*o*.2>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+s*o*.2)),se(i,u,f)},E=(s,o,i,u,f)=>{s&&(g+o*i>t.hp+r.hpMod?e(4,g=t.hp+r.hpMod):e(4,g=g+o*i)),se(s,u,f)},de=(s,o,i,u,f,j,M)=>{if(e(5,y=y-i),M!=="Heal"){if(h-(o-o*f)*u<=0&&s){e(7,h=0),e(8,R="Victory!"),e(0,L+=m.reward*2),e(1,U+=m.reward),e(9,V=!0),P=setTimeout(()=>e(9,V=!1),500),e(10,O=!0),ee=setTimeout(()=>e(10,O=!1),500);return}s&&(e(7,h=h-(o-o*f)*u),e(9,V=!0),P=setTimeout(()=>e(9,V=!1),500),e(10,O=!0),ee=setTimeout(()=>e(10,O=!1),500)),w(o,u,s,j,M);return}E(s,o,u,j,M)},le=()=>{(g<=0||h<=0)&&(e(4,g=t.hp+r.hpMod),e(5,y=t.mp+r.mpMod),e(12,K=!0),ie=setTimeout(()=>e(12,K=!1),500),e(6,m=B[Math.floor(Math.random()*B.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),e(7,h=m.hp),e(8,R=""))},Q=(s,o)=>{try{const i=t.attack+r.attackMod,u=t.speed+r.speedMod,f=(t.critical+r.criticalMod)/100;let j=t.special+r.specialMod,M=t.specialCost,b=m.defense/100,q=!1,A=1;if(K)return;if(le(),o==="Magic"&&(b=0),u<m.speed?q=Math.random()>=.5:q=Math.random()>=.8,Math.random()<=f&&(A=1.5),o==="Poison"&&A===1&&(A=1.5),s===t.attackName){if(h-(i-i*b)*A<=0&&q){e(7,h=0),e(8,R="Victory!"),e(0,L+=m.reward*2),e(1,U+=m.reward),e(9,V=!0),P=setTimeout(()=>e(9,V=!1),500);return}q&&(e(7,h=h-(i-i*b)*A),e(9,V=!0),P=setTimeout(()=>e(9,V=!1),500)),se(q,s,o);return}y>=M?de(q,j,M,A,b,s,o):e(8,R="Not enough MP!")}catch(i){console.error(i)}},Y=()=>{try{const s=m;e(4,g=0),le(),e(3,t=Le.find(o=>o.id===s.id)),e(4,g=t.hp+r.hpMod),e(5,y=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(s){console.error(s)}},re=()=>{try{const o=[{label:"Name",value:t.name},{label:"HP",value:t.hp+r.hpMod},{label:"Speed",value:t.speed+r.speedMod},{label:"Defense",value:t.defense+r.defenseMod},{label:"Critical",value:t.critical+r.criticalMod},{label:"MP",value:t.mp+r.mpMod},{label:"MP Regen",value:t.mpRegen+r.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+r.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+r.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(i=>`${i.label}: ${i.value}`).join(`
`);alert(o)}catch(s){console.error(s)}},ke=()=>{x&&(localStorage.setItem("drachmas",U),localStorage.setItem("playerExperience",L),localStorage.setItem("chosenRelicId",r.id))};et(()=>{try{const s=localStorage.getItem("drachmas"),o=localStorage.getItem("playerExperience"),i=localStorage.getItem("chosenRelicId"),u=localStorage.getItem("curStageId");Xe.set(!0),s&&e(1,U=parseInt(s)),o&&e(0,L=parseInt(o)),i&&e(16,r=We.find(f=>f.id===parseInt(i))),u&&e(2,G=Qe.find(f=>f.id===parseInt(u))),N=Le.filter(f=>f.stageId===G.id),e(3,t=N[0]),e(4,g=t.hp+r.hpMod),e(5,y=t.mp+r.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${z+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${z+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),B=Ze.filter(f=>f.stageId===G.id),e(6,m=B[Math.floor(Math.random()*B.length)]),e(7,h=m.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${z+"/game/"+m.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${z+"/game/"+m.img.slice(0,-4)+"_attack.png"})`),x=!0}catch(s){console.error(s)}}),tt(()=>{Xe.set(!1),clearTimeout(P),clearTimeout(ee),clearTimeout(te),clearTimeout(ie)});const I=()=>Q(t.attackName,t.attackType),fe=()=>Q(t.specialName,t.specialType),ge=()=>Y(),_e=()=>re(),W=()=>{rt(z+"/game/world")};return c.$$.update=()=>{c.$$.dirty[0]&65539&&ke()},[L,U,G,t,g,y,m,h,R,V,O,J,K,Q,Y,re,r,I,fe,ge,_e,W]}class dt extends at{constructor(n){super(),st(this,n,ot,ct,xe,{},null,[-1,-1])}}export{dt as component};
