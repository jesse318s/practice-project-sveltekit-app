import{s as Be,d as he,e as Re,n as Ve,r as Le,o as Oe,f as Ue}from"../chunks/scheduler.BoReh3vH.js";import{S as Ge,i as Fe,e as y,t as w,s as S,c as M,a as q,b as R,d as D,f as N,y as ue,o as m,z as x,g as Ye,h as s,A as de,j as ae}from"../chunks/index.BklZDJd0.js";import{s as je,r as Ae}from"../chunks/relics.CGlwEWe2.js";import{i as He}from"../chunks/store.Cn0GNUQE.js";import{g as Je}from"../chunks/entry.01wdnKDm.js";const Ee=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"}],ze=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50},{id:7,stageId:3,name:"Skeleton",img:"skeleton_creature_bow.png",reward:12,hp:100,attack:40,attackType:"Normal",speed:70,defense:20,critical:50}];function Ke(o){let p,e,V=o[2].name+"",z,B,E,t,l,$,f,k,j,n,T,C,se,b,F,P,g,J,ee,pe,K,L,re,ne,I,te,Y,le,A,fe="Attack",ie,O,ge="Special",me,Q,a,c,i,h,u,U,_,v,H,G,W,be="Mimic Summon",ke,X,Pe="View Stats",_e,Z,Se="Travel",ye,Ne;return{c(){p=y("div"),e=y("h2"),z=w(V),B=S(),E=y("div"),t=y("div"),l=w("Player HP: "),$=w(o[4]),f=S(),k=y("div"),j=w("Player MP: "),n=w(o[5]),T=S(),C=y("div"),se=w("Enemy HP: "),b=w(o[7]),F=S(),P=y("div"),g=y("img"),pe=S(),K=y("div"),L=y("div"),ne=S(),I=y("img"),le=S(),A=y("button"),A.textContent=fe,ie=S(),O=y("button"),O.textContent=ge,me=S(),Q=y("div"),a=w(o[8]),c=S(),i=y("div"),h=w("Experience: "),u=w(o[0]),U=S(),_=y("div"),v=w("Drachmas: "),H=w(o[1]),G=S(),W=y("button"),W.textContent=be,ke=S(),X=y("button"),X.textContent=Pe,_e=S(),Z=y("button"),Z.textContent=Se,this.h()},l(d){p=M(d,"DIV",{class:!0});var r=q(p);e=M(r,"H2",{});var De=q(e);z=R(De,V),De.forEach(D),B=N(r),E=M(r,"DIV",{class:!0});var ce=q(E);t=M(ce,"DIV",{});var Me=q(t);l=R(Me,"Player HP: "),$=R(Me,o[4]),Me.forEach(D),f=N(ce),k=M(ce,"DIV",{});var Ie=q(k);j=R(Ie,"Player MP: "),n=R(Ie,o[5]),Ie.forEach(D),T=N(ce),C=M(ce,"DIV",{});var ve=q(C);se=R(ve,"Enemy HP: "),b=R(ve,o[7]),ve.forEach(D),ce.forEach(D),F=N(r),P=M(r,"DIV",{class:!0});var oe=q(P);g=M(oe,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),pe=N(oe),K=M(oe,"DIV",{class:!0});var we=q(K);L=M(we,"DIV",{class:!0}),q(L).forEach(D),we.forEach(D),ne=N(oe),I=M(oe,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),oe.forEach(D),le=N(r),A=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(A)!=="svelte-ig8gg4"&&(A.textContent=fe),ie=N(r),O=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(O)!=="svelte-172d9ub"&&(O.textContent=ge),me=N(r),Q=M(r,"DIV",{class:!0});var qe=q(Q);a=R(qe,o[8]),qe.forEach(D),c=N(r),i=M(r,"DIV",{class:!0});var Te=q(i);h=R(Te,"Experience: "),u=R(Te,o[0]),Te.forEach(D),U=N(r),_=M(r,"DIV",{class:!0});var Ce=q(_);v=R(Ce,"Drachmas: "),H=R(Ce,o[1]),Ce.forEach(D),G=N(r),W=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(W)!=="svelte-lzajz"&&(W.textContent=be),ke=N(r),X=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(X)!=="svelte-z72cka"&&(X.textContent=Pe),_e=N(r),Z=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(Z)!=="svelte-16av4zt"&&(Z.textContent=Se),r.forEach(D),this.h()},h(){m(E,"class","stats svelte-1qmif5p"),he(g.src,J=o[3].img)||m(g,"src",J),m(g,"width","128px"),m(g,"height","128px"),m(g,"alt",ee=o[3].name),m(g,"class","svelte-1qmif5p"),x(g,"attack",o[9]),x(g,"hurt",o[11]),m(L,"class",re=Re(o[10]?o[3].specialEffect:"")+" svelte-1qmif5p"),m(K,"class","special-effect-container svelte-1qmif5p"),m(I,"class","enemy-creature svelte-1qmif5p"),he(I.src,te=o[6].img)||m(I,"src",te),m(I,"width","128px"),m(I,"height","128px"),m(I,"alt",Y=o[6].name),x(I,"enemy-attack",o[11]),x(I,"enemy-hurt",o[9]),m(P,"class","creatures svelte-1qmif5p"),m(A,"class","svelte-1qmif5p"),m(O,"class","svelte-1qmif5p"),m(Q,"class","combat-alert svelte-1qmif5p"),m(i,"class","experience svelte-1qmif5p"),m(_,"class","drachmas svelte-1qmif5p"),m(W,"class","svelte-1qmif5p"),m(X,"class","svelte-1qmif5p"),m(Z,"class","svelte-1qmif5p"),m(p,"class","game-container svelte-1qmif5p")},m(d,r){Ye(d,p,r),s(p,e),s(e,z),s(p,B),s(p,E),s(E,t),s(t,l),s(t,$),s(E,f),s(E,k),s(k,j),s(k,n),s(E,T),s(E,C),s(C,se),s(C,b),s(p,F),s(p,P),s(P,g),s(P,pe),s(P,K),s(K,L),s(P,ne),s(P,I),s(p,le),s(p,A),s(p,ie),s(p,O),s(p,me),s(p,Q),s(Q,a),s(p,c),s(p,i),s(i,h),s(i,u),s(p,U),s(p,_),s(_,v),s(_,H),s(p,G),s(p,W),s(p,ke),s(p,X),s(p,_e),s(p,Z),ye||(Ne=[de(A,"click",o[16]),de(O,"click",o[17]),de(W,"click",o[18]),de(X,"click",o[19]),de(Z,"click",o[20])],ye=!0)},p(d,r){r[0]&4&&V!==(V=d[2].name+"")&&ae(z,V),r[0]&16&&ae($,d[4]),r[0]&32&&ae(n,d[5]),r[0]&128&&ae(b,d[7]),r[0]&8&&!he(g.src,J=d[3].img)&&m(g,"src",J),r[0]&8&&ee!==(ee=d[3].name)&&m(g,"alt",ee),r[0]&512&&x(g,"attack",d[9]),r[0]&2048&&x(g,"hurt",d[11]),r[0]&1032&&re!==(re=Re(d[10]?d[3].specialEffect:"")+" svelte-1qmif5p")&&m(L,"class",re),r[0]&64&&!he(I.src,te=d[6].img)&&m(I,"src",te),r[0]&64&&Y!==(Y=d[6].name)&&m(I,"alt",Y),r[0]&2048&&x(I,"enemy-attack",d[11]),r[0]&512&&x(I,"enemy-hurt",d[9]),r[0]&256&&ae(a,d[8]),r[0]&1&&ae(u,d[0]),r[0]&2&&ae(H,d[1])},i:Ve,o:Ve,d(d){d&&D(p),ye=!1,Le(Ne)}}}function Qe(o,p,e){let V=0,z=0,B=je[0],E=Ee.filter(a=>a.stageId===B.id),t=E[0],l=Ae[0],$=!1,f=t.hp+l.hpMod,k=t.mp+l.mpMod,j=ze.filter(a=>a.stageId===B.id),n=j[Math.floor(Math.random()*j.length)],T=n.hp,C="",se=0,b=!1,F=!1,P=!1,g=null,J=null,ee=null;const pe=()=>{if(k!==t.mp+l.mpMod&&k+t.mpRegen+l.mpRegenMod<=t.mp+l.mpMod){e(5,k=k+t.mpRegen+l.mpRegenMod);return}e(5,k=t.mp+l.mpMod)},K=(a,c)=>{if(f-(n.attack-n.attack*a)*c<=0){e(8,C="Defeat!"),e(4,f=0);return}e(4,f=f-(n.attack-n.attack*a)*c)},L=(a,c,i)=>{try{const h=t.speed+l.speedMod;let u=(t.defense+l.defenseMod)/100,U=n.critical/100,_=1,v=!1;if(n.attackType==="Magic"&&(u=0),n.speed<h?v=Math.random()>=.5:v=Math.random()>=.8,se>1&&!v&&!a&&(v=!0),!v&&a&&e(8,C="Enemy was too slow!"),!v&&!a){e(5,k=t.mp+l.mpMod),se+=1,Y(c,i);return}c===t.attackName&&pe(),v&&a&&e(8,C="Both abilities succeeded."),v&&!a&&e(8,C="Your summon was too slow!"),v&&(Math.random()<=U&&(_=1.5),n.attackType==="Poison"&&_===1&&(_=1.5),K(u,_),e(11,P=!0),ee=setTimeout(()=>e(11,P=!1),500))}catch(h){console.error(h)}},re=(a,c,i,h,u)=>{u==="Lifesteal"&&i&&(f+a*c*.2>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+a*c*.2)),L(i,h,u)},ne=(a,c,i,h,u)=>{a&&(f+c*i>t.hp+l.hpMod?e(4,f=t.hp+l.hpMod):e(4,f=f+c*i)),L(a,h,u)},I=(a,c,i,h,u,U,_)=>{if(e(5,k=k-i),_!=="Heal"){if(T-(c-c*u)*h<=0&&a){e(7,T=0),e(8,C="Victory!"),e(0,V+=n.reward*2),e(1,z+=n.reward),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500),e(10,F=!0),J=setTimeout(()=>e(10,F=!1),500);return}a&&(e(7,T=T-(c-c*u)*h),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500),e(10,F=!0),J=setTimeout(()=>e(10,F=!1),500)),re(c,h,a,U,_);return}ne(a,c,h,U,_)},te=()=>{(f<=0||T<=0)&&(e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),e(6,n=j[Math.floor(Math.random()*j.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),e(7,T=n.hp),e(8,C=""))},Y=(a,c)=>{try{const i=t.attack+l.attackMod,h=t.speed+l.speedMod,u=(t.critical+l.criticalMod)/100;let U=t.special+l.specialMod,_=t.specialCost,v=n.defense/100,H=!1,G=1;if(te(),c==="Magic"&&(v=0),h<n.speed?H=Math.random()>=.5:H=Math.random()>=.8,Math.random()<=u&&(G=1.5),c==="Poison"&&G===1&&(G=1.5),a===t.attackName){if(T-(i-i*v)*G<=0&&H){e(7,T=0),e(8,C="Victory!"),e(0,V+=n.reward*2),e(1,z+=n.reward),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500);return}H&&(e(7,T=T-(i-i*v)*G),e(9,b=!0),g=setTimeout(()=>e(9,b=!1),500)),L(H,a,c);return}k>=_?I(H,U,_,G,v,a,c):e(8,C="Not enough MP!")}catch(i){console.error(i)}},le=()=>{try{const a=n;e(4,f=0),te(),e(3,t=Ee.find(c=>c.id===a.id)),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(a){console.error(a)}},A=()=>{try{const c=[{label:"Name",value:t.name},{label:"HP",value:t.hp+l.hpMod},{label:"Speed",value:t.speed+l.speedMod},{label:"Defense",value:t.defense+l.defenseMod},{label:"Critical",value:t.critical+l.criticalMod},{label:"MP",value:t.mp+l.mpMod},{label:"MP Regen",value:t.mpRegen+l.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+l.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+l.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(i=>`${i.label}: ${i.value}`).join(`
`);alert(c)}catch(a){console.error(a)}},fe=()=>{$&&(localStorage.setItem("drachmas",z),localStorage.setItem("playerExperience",V),localStorage.setItem("chosenRelicId",l.id))};Oe(()=>{try{const a=localStorage.getItem("drachmas"),c=localStorage.getItem("playerExperience"),i=localStorage.getItem("chosenRelicId"),h=localStorage.getItem("curStageId");He.set(!0),a&&e(1,z=parseInt(a)),c&&e(0,V=parseInt(c)),i&&e(15,l=Ae.find(u=>u.id===parseInt(i))),h&&e(2,B=je.find(u=>u.id===parseInt(h))),E=Ee.filter(u=>u.stageId===B.id),e(3,t=E[0]),e(4,f=t.hp+l.hpMod),e(5,k=t.mp+l.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+t.img.slice(0,-4)+"_hurt.png"})`),j=ze.filter(u=>u.stageId===B.id),e(6,n=j[Math.floor(Math.random()*j.length)]),e(7,T=n.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${"/practice-project-sveltekit-app/"+n.img.slice(0,-4)+"_attack.png"})`),$=!0}catch(a){console.error(a)}}),Ue(()=>{He.set(!1),clearTimeout(g),clearTimeout(J),clearTimeout(ee)});const ie=()=>Y(t.attackName,t.attackType),O=()=>Y(t.specialName,t.specialType),ge=()=>le(),me=()=>A(),Q=()=>{Je("/practice-project-sveltekit-app/game/world")};return o.$$.update=()=>{o.$$.dirty[0]&32771&&fe()},[V,z,B,t,f,k,n,T,C,b,F,P,Y,le,A,l,ie,O,ge,me,Q]}class et extends Ge{constructor(p){super(),Fe(this,p,Qe,Ke,Be,{},null,[-1,-1])}}export{et as component};
