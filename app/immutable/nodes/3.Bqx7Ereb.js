import{s as ke,a as de,b as ue,n as he,r as Ee,o as Ce,d as ye}from"../chunks/scheduler.C5a7OfxR.js";import{S as De,i as Ie,e as D,t as z,s as N,c as I,a as P,b as R,d as V,f as B,k as ge,l as m,m as S,g as ve,h as s,n as _e,j as W}from"../chunks/index.D0FX01Aq.js";import{i as Me}from"../chunks/store.CWnBpkn4.js";function we(o){let f,e,H,U,t,c,i,k,F,p,d,b,q,T,E,g,x,X,A,L,J,Z,y,j,$,O,r="Attack",l,n,_="Special Attack",C,v,M,u,w,G,ee,se,Y,ae,te,re,ie;return{c(){f=D("div"),e=D("div"),H=D("div"),U=z("Player HP: "),t=z(o[2]),c=N(),i=D("div"),k=z("Player MP: "),F=z(o[3]),p=N(),d=D("div"),b=z("Enemy HP: "),q=z(o[4]),T=N(),E=D("div"),g=D("img"),X=N(),A=D("div"),L=D("div"),Z=N(),y=D("img"),$=N(),O=D("button"),O.textContent=r,l=N(),n=D("button"),n.textContent=_,C=N(),v=D("div"),M=z(o[5]),u=N(),w=D("div"),G=z("Experience: "),ee=z(o[0]),se=N(),Y=D("div"),ae=z("Drachmas: "),te=z(o[1]),this.h()},l(h){f=I(h,"DIV",{class:!0});var a=P(f);e=I(a,"DIV",{class:!0});var K=P(e);H=I(K,"DIV",{});var le=P(H);U=R(le,"Player HP: "),t=R(le,o[2]),le.forEach(V),c=B(K),i=I(K,"DIV",{});var oe=P(i);k=R(oe,"Player MP: "),F=R(oe,o[3]),oe.forEach(V),p=B(K),d=I(K,"DIV",{});var ce=P(d);b=R(ce,"Enemy HP: "),q=R(ce,o[4]),ce.forEach(V),K.forEach(V),T=B(a),E=I(a,"DIV",{class:!0});var Q=P(E);g=I(Q,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),X=B(Q),A=I(Q,"DIV",{class:!0});var pe=P(A);L=I(pe,"DIV",{class:!0}),P(L).forEach(V),pe.forEach(V),Z=B(Q),y=I(Q,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),Q.forEach(V),$=B(a),O=I(a,"BUTTON",{"data-svelte-h":!0}),ge(O)!=="svelte-ig8gg4"&&(O.textContent=r),l=B(a),n=I(a,"BUTTON",{"data-svelte-h":!0}),ge(n)!=="svelte-11zl5of"&&(n.textContent=_),C=B(a),v=I(a,"DIV",{class:!0});var me=P(v);M=R(me,o[5]),me.forEach(V),u=B(a),w=I(a,"DIV",{class:!0});var ne=P(w);G=R(ne,"Experience: "),ee=R(ne,o[0]),ne.forEach(V),se=B(a),Y=I(a,"DIV",{class:!0});var fe=P(Y);ae=R(fe,"Drachmas: "),te=R(fe,o[1]),fe.forEach(V),a.forEach(V),this.h()},h(){m(e,"class","stats svelte-1cz6eee"),de(g.src,x=o[9].img)||m(g,"src",x),m(g,"alt",o[9].name),m(g,"width","128px"),m(g,"height","128px"),m(g,"class","svelte-1cz6eee"),S(g,"attack",o[6]),S(g,"damage",o[8]),m(L,"class",J=ue(o[7]?o[9].specialEffect:"")+" svelte-1cz6eee"),m(A,"class","special-effect-container svelte-1cz6eee"),m(y,"class","enemy-creature svelte-1cz6eee"),de(y.src,j=o[10].img)||m(y,"src",j),m(y,"alt",o[10].name),m(y,"width","128px"),m(y,"height","128px"),S(y,"enemy-attack",o[8]),S(y,"enemy-damage",o[6]),m(E,"class","creatures svelte-1cz6eee"),m(v,"class","combat-alert svelte-1cz6eee"),m(w,"class","experience svelte-1cz6eee"),m(Y,"class","drachmas svelte-1cz6eee"),m(f,"class","game-container svelte-1cz6eee")},m(h,a){ve(h,f,a),s(f,e),s(e,H),s(H,U),s(H,t),s(e,c),s(e,i),s(i,k),s(i,F),s(e,p),s(e,d),s(d,b),s(d,q),s(f,T),s(f,E),s(E,g),s(E,X),s(E,A),s(A,L),s(E,Z),s(E,y),s(f,$),s(f,O),s(f,l),s(f,n),s(f,C),s(f,v),s(v,M),s(f,u),s(f,w),s(w,G),s(w,ee),s(f,se),s(f,Y),s(Y,ae),s(Y,te),re||(ie=[_e(O,"click",o[12]),_e(n,"click",o[13])],re=!0)},p(h,[a]){a&4&&W(t,h[2]),a&8&&W(F,h[3]),a&16&&W(q,h[4]),a&64&&S(g,"attack",h[6]),a&256&&S(g,"damage",h[8]),a&128&&J!==(J=ue(h[7]?h[9].specialEffect:"")+" svelte-1cz6eee")&&m(L,"class",J),a&256&&S(y,"enemy-attack",h[8]),a&64&&S(y,"enemy-damage",h[6]),a&32&&W(M,h[5]),a&1&&W(ee,h[0]),a&2&&W(te,h[1])},i:he,o:he,d(h){h&&V(f),re=!1,Ee(ie)}}}function be(o,f,e){let H=0,U=0,t={id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},c={id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},i=t.hp+c.hpMod,k=t.mp+c.mpMod,F=k,p={id:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},d=p.hp,b="",q=0,T=!1,E=!1,g=!1;const x=()=>{if(k!==t.mp+c.mpMod&&k+t.mpRegen+c.mpRegenMod<=t.mp+c.mpMod){e(3,k=k+t.mpRegen+c.mpRegenMod);return}e(3,k=t.mp+c.mpMod)},X=(r,l)=>{if(i-(p.attack-p.attack*r)*l<=0){e(5,b="Defeat!"),e(2,i=0);return}e(2,i=i-(p.attack-p.attack*r)*l)},A=(r,l,n)=>{try{const _=t.speed+c.speedMod;let C=(t.defense+c.defenseMod)/100,v=p.critical/100,M=1,u=!1;if(p.attackType==="Magic"&&(C=0),p.speed<_?u=Math.random()>=.5:u=Math.random()>=.8,q>1&&!u&&!r&&(u=!0),!u&&r&&e(5,b="Enemy was too slow!"),!u&&!r){e(3,k=F),q+=1,j(l,n);return}l===t.attackName&&x(),u&&r&&e(5,b="Both abilities succeeded."),u&&!r&&e(5,b="Your summon was too slow!"),u&&(Math.random()<=v&&(M=1.5),p.attackType==="Poison"&&M===1&&(M=1.5),X(C,M),e(8,g=!0),setTimeout(()=>e(8,g=!1),500))}catch(_){console.error(_)}},L=(r,l,n,_,C)=>{C==="Lifesteal"&&n&&(i+r*l*.2>t.hp+c.hpMod?e(2,i=t.hp+c.hpMod):e(2,i=i+r*l*.2)),A(n,_,C)},J=(r,l,n,_,C)=>{r&&(i+l*n>t.hp+c.hpMod?e(2,i=t.hp+c.hpMod):e(2,i=i+l*n)),A(r,_,C)},Z=(r,l,n,_,C,v,M)=>{if(e(3,k=k-n),M!=="Heal"){if(d-(l-l*C)*_<=0&&r){e(4,d=0),e(5,b="Victory!"),e(0,H+=p.reward*2),e(1,U+=p.reward),e(6,T=!0),setTimeout(()=>e(6,T=!1),500),e(7,E=!0),setTimeout(()=>e(7,E=!1),500);return}r&&(e(4,d=d-(l-l*C)*_),e(6,T=!0),setTimeout(()=>e(6,T=!1),500),e(7,E=!0),setTimeout(()=>e(7,E=!1),500)),L(l,_,r,v,M);return}J(r,l,_,v,M)},y=()=>{(i<=0||d<=0)&&(e(2,i=t.hp+c.hpMod),e(3,k=t.mp+c.mpMod),e(4,d=p.hp),e(5,b=""))},j=(r,l)=>{try{const n=t.attack+c.attackMod,_=t.speed+c.speedMod,C=(t.critical+c.criticalMod)/100;let v=t.special+c.specialMod,M=t.specialCost,u=p.defense/100,w=!1,G=1;if(y(),r===t.specialName2&&(v=t.special2+c.specialMod,M=t.specialCost2),l==="Magic"&&(u=0),_<p.speed?w=Math.random()>=.5:w=Math.random()>=.8,Math.random()<=C&&(G=1.5),l==="Poison"&&G===1&&(G=1.5),r===t.attackName){if(d-(n-n*u)*G<=0&&w){e(4,d=0),e(5,b="Victory!"),e(0,H+=p.reward*2),e(1,U+=p.reward),e(6,T=!0),setTimeout(()=>e(6,T=!1),500);return}w&&(e(4,d=d-(n-n*u)*G),e(6,T=!0),setTimeout(()=>e(6,T=!1),500)),A(w,r,l);return}k>=M?Z(w,v,M,G,u,r,l):e(5,b="Not enough MP!")}catch(n){console.error(n)}};return Ce(()=>{Me.set(!0)}),ye(()=>{Me.set(!1)}),[H,U,i,k,d,b,T,E,g,t,p,j,()=>j(t.attackName,t.attackType),()=>j(t.specialName,t.specialType)]}class Pe extends De{constructor(f){super(),Ie(this,f,be,we,ke,{})}}export{Pe as component};
