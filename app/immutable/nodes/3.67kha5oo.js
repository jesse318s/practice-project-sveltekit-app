import{s as dt,d as Re,e as Ae,n as ot,r as ut,o as ft,f as gt}from"../chunks/scheduler.BoReh3vH.js";import{S as ht,i as kt,e as u,t as T,s as C,c as f,a as M,b,d as v,f as D,y as De,o as m,z as B,g as _t,h as a,A as ve,j as J}from"../chunks/index.BklZDJd0.js";import{s as nt,r as mt}from"../chunks/relics.9MHovSS4.js";import{i as pt}from"../chunks/store.Cn0GNUQE.js";import{b as H,g as yt}from"../chunks/entry.BfyHJh2F.js";const Xe=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special-effect-2"},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",hp:110,attack:30,attackName:"Gaze",attackType:"Magic",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Petrify",specialType:"Magic",specialEffect:"special-effect-3"},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",hp:60,attack:50,attackName:"Exhale",attackType:"Magic",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Fireball",specialType:"Magic",specialEffect:"special-effect-4"},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",hp:125,attack:50,attackName:"Strike",attackType:"Normal",speed:30,defense:30,critical:10,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Scorch",specialType:"Magic",specialEffect:"special-effect-4"},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",hp:100,attack:50,attackName:"Stab",attackType:"Normal",speed:40,defense:20,critical:50,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Ruin",specialType:"Magic",specialEffect:"special-effect-2"}],it=[{id:1,stageId:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,stageId:1,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15},{id:3,stageId:2,name:"Medusa",img:"medusa_creature.png",reward:5,hp:110,attack:30,attackType:"Magic",speed:30,defense:15,critical:15},{id:4,stageId:2,name:"Baby Dragon",img:"small_dragon_creature.png",reward:5,hp:60,attack:50,attackType:"Magic",speed:60,defense:20,critical:25},{id:5,stageId:3,name:"Skeleton",img:"skeleton_creature.png",reward:12,hp:125,attack:50,attackType:"Normal",speed:30,defense:30,critical:10},{id:6,stageId:3,name:"Skeleton",img:"skeleton_creature_spear.png",reward:12,hp:100,attack:50,attackType:"Normal",speed:40,defense:20,critical:50}];function vt(o){let p,e,L=o[2].name+"",U,G,N,t,n,ae,k,I=o[3].hp+"",z,i,y,j,le,P,O=o[3].mp+"",Q,W,w,se,re,ie,ce=o[6].hp+"",de,oe,X,q,F,V,h,ue,fe,Me,ne,Ie,Z,ge,s,r,c,_,g,Y,S,E,R,A,Se,He,Ee,ze,K,Ze="Attack",Be,x,xe="Special",Le,he,Ne,Oe,me,Ue,we,Ge,pe,qe,je,Fe,$,$e="Mimic Summon",Ye,ee,et="View Stats",Je,te,tt="Travel",Ke,at;return{c(){p=u("div"),e=u("h2"),U=T(L),G=C(),N=u("div"),t=u("div"),n=T("Player HP: "),ae=T(o[4]),k=T("/"),z=T(I),i=C(),y=u("div"),j=T("Player MP: "),le=T(o[5]),P=T("/"),Q=T(O),W=C(),w=u("div"),se=T("Enemy HP: "),re=T(o[7]),ie=T("/"),de=T(ce),oe=C(),X=u("div"),q=u("div"),F=u("div"),V=u("div"),h=u("img"),Me=C(),ne=u("div"),Ie=C(),Z=u("div"),s=C(),r=u("div"),c=u("img"),Y=C(),S=u("div"),E=C(),R=u("div"),A=u("div"),He=C(),Ee=u("div"),ze=C(),K=u("button"),K.textContent=Ze,Be=C(),x=u("button"),x.textContent=xe,Le=C(),he=u("div"),Ne=T(o[8]),Oe=C(),me=u("div"),Ue=T("Experience: "),we=T(o[0]),Ge=C(),pe=u("div"),qe=T("Drachmas: "),je=T(o[1]),Fe=C(),$=u("button"),$.textContent=$e,Ye=C(),ee=u("button"),ee.textContent=et,Je=C(),te=u("button"),te.textContent=tt,this.h()},l(d){p=f(d,"DIV",{class:!0});var l=M(p);e=f(l,"H2",{});var lt=M(e);U=b(lt,L),lt.forEach(v),G=D(l),N=f(l,"DIV",{class:!0});var ke=M(N);t=f(ke,"DIV",{});var Te=M(t);n=b(Te,"Player HP: "),ae=b(Te,o[4]),k=b(Te,"/"),z=b(Te,I),Te.forEach(v),i=D(ke),y=f(ke,"DIV",{});var Ce=M(y);j=b(Ce,"Player MP: "),le=b(Ce,o[5]),P=b(Ce,"/"),Q=b(Ce,O),Ce.forEach(v),W=D(ke),w=f(ke,"DIV",{});var be=M(w);se=b(be,"Enemy HP: "),re=b(be,o[7]),ie=b(be,"/"),de=b(be,ce),be.forEach(v),ke.forEach(v),oe=D(l),X=f(l,"DIV",{class:!0});var st=M(X);q=f(st,"DIV",{class:!0});var Pe=M(q);F=f(Pe,"DIV",{class:!0});var Ve=M(F);V=f(Ve,"DIV",{class:!0});var _e=M(V);h=f(_e,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Me=D(_e),ne=f(_e,"DIV",{class:!0}),M(ne).forEach(v),Ie=D(_e),Z=f(_e,"DIV",{class:!0}),M(Z).forEach(v),_e.forEach(v),s=D(Ve),r=f(Ve,"DIV",{class:!0});var ye=M(r);c=f(ye,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),Y=D(ye),S=f(ye,"DIV",{class:!0}),M(S).forEach(v),E=D(ye),R=f(ye,"DIV",{class:!0});var rt=M(R);A=f(rt,"DIV",{class:!0}),M(A).forEach(v),rt.forEach(v),ye.forEach(v),Ve.forEach(v),He=D(Pe),Ee=f(Pe,"DIV",{class:!0}),M(Ee).forEach(v),Pe.forEach(v),st.forEach(v),ze=D(l),K=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),De(K)!=="svelte-19y3ioo"&&(K.textContent=Ze),Be=D(l),x=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),De(x)!=="svelte-172d9ub"&&(x.textContent=xe),Le=D(l),he=f(l,"DIV",{class:!0});var ct=M(he);Ne=b(ct,o[8]),ct.forEach(v),Oe=D(l),me=f(l,"DIV",{class:!0});var Qe=M(me);Ue=b(Qe,"Experience: "),we=b(Qe,o[0]),Qe.forEach(v),Ge=D(l),pe=f(l,"DIV",{class:!0});var We=M(pe);qe=b(We,"Drachmas: "),je=b(We,o[1]),We.forEach(v),Fe=D(l),$=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),De($)!=="svelte-zspdcm"&&($.textContent=$e),Ye=D(l),ee=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),De(ee)!=="svelte-wou4mf"&&(ee.textContent=et),Je=D(l),te=f(l,"BUTTON",{class:!0,"data-svelte-h":!0}),De(te)!=="svelte-1hg8zdr"&&(te.textContent=tt),l.forEach(v),this.h()},h(){m(N,"class","stats svelte-1l2lkjd"),Re(h.src,ue=H+"/game/"+o[3].img)||m(h,"src",ue),m(h,"width","128px"),m(h,"height","128px"),m(h,"alt",fe=o[3].name),m(h,"class","svelte-1l2lkjd"),B(h,"attack",o[9]),B(h,"hurt",o[11]),B(h,"player-using-special",o[10]),m(ne,"class","shadow svelte-1l2lkjd"),m(Z,"class",ge=Ae(o[10]?o[3].specialEffect:"")+" svelte-1l2lkjd"),m(V,"class","creature player-creature svelte-1l2lkjd"),Re(c.src,_=H+"/game/"+o[6].img)||m(c,"src",_),m(c,"width","128px"),m(c,"height","128px"),m(c,"alt",g=o[6].name),m(c,"class","svelte-1l2lkjd"),B(c,"enemy-attack",o[11]),B(c,"enemy-hurt",o[9]),B(c,"enemy-spawning",o[12]),m(S,"class","shadow svelte-1l2lkjd"),m(A,"class",Se=Ae(o[12]?"enemy-spawn":"")+" svelte-1l2lkjd"),m(R,"class","enemy-spawn-container svelte-1l2lkjd"),m(r,"class","creature enemy-creature svelte-1l2lkjd"),m(F,"class","creatures-container svelte-1l2lkjd"),m(Ee,"class","battle-floor svelte-1l2lkjd"),m(q,"class","battlefield svelte-1l2lkjd"),m(X,"class","battle-stage svelte-1l2lkjd"),m(K,"class","svelte-1l2lkjd"),m(x,"class","svelte-1l2lkjd"),m(he,"class","combat-alert svelte-1l2lkjd"),m(me,"class","experience svelte-1l2lkjd"),m(pe,"class","drachmas svelte-1l2lkjd"),m($,"class","svelte-1l2lkjd"),m(ee,"class","svelte-1l2lkjd"),m(te,"class","svelte-1l2lkjd"),m(p,"class","game-container svelte-1l2lkjd")},m(d,l){_t(d,p,l),a(p,e),a(e,U),a(p,G),a(p,N),a(N,t),a(t,n),a(t,ae),a(t,k),a(t,z),a(N,i),a(N,y),a(y,j),a(y,le),a(y,P),a(y,Q),a(N,W),a(N,w),a(w,se),a(w,re),a(w,ie),a(w,de),a(p,oe),a(p,X),a(X,q),a(q,F),a(F,V),a(V,h),a(V,Me),a(V,ne),a(V,Ie),a(V,Z),a(F,s),a(F,r),a(r,c),a(r,Y),a(r,S),a(r,E),a(r,R),a(R,A),a(q,He),a(q,Ee),a(p,ze),a(p,K),a(p,Be),a(p,x),a(p,Le),a(p,he),a(he,Ne),a(p,Oe),a(p,me),a(me,Ue),a(me,we),a(p,Ge),a(p,pe),a(pe,qe),a(pe,je),a(p,Fe),a(p,$),a(p,Ye),a(p,ee),a(p,Je),a(p,te),Ke||(at=[ve(K,"click",o[17]),ve(K,"contextmenu",o[18]),ve(x,"click",o[19]),ve($,"click",o[14]),ve(ee,"click",o[15]),ve(te,"click",o[20])],Ke=!0)},p(d,l){l[0]&4&&L!==(L=d[2].name+"")&&J(U,L),l[0]&16&&J(ae,d[4]),l[0]&8&&I!==(I=d[3].hp+"")&&J(z,I),l[0]&32&&J(le,d[5]),l[0]&8&&O!==(O=d[3].mp+"")&&J(Q,O),l[0]&128&&J(re,d[7]),l[0]&64&&ce!==(ce=d[6].hp+"")&&J(de,ce),l[0]&8&&!Re(h.src,ue=H+"/game/"+d[3].img)&&m(h,"src",ue),l[0]&8&&fe!==(fe=d[3].name)&&m(h,"alt",fe),l[0]&512&&B(h,"attack",d[9]),l[0]&2048&&B(h,"hurt",d[11]),l[0]&1024&&B(h,"player-using-special",d[10]),l[0]&1032&&ge!==(ge=Ae(d[10]?d[3].specialEffect:"")+" svelte-1l2lkjd")&&m(Z,"class",ge),l[0]&64&&!Re(c.src,_=H+"/game/"+d[6].img)&&m(c,"src",_),l[0]&64&&g!==(g=d[6].name)&&m(c,"alt",g),l[0]&2048&&B(c,"enemy-attack",d[11]),l[0]&512&&B(c,"enemy-hurt",d[9]),l[0]&4096&&B(c,"enemy-spawning",d[12]),l[0]&4096&&Se!==(Se=Ae(d[12]?"enemy-spawn":"")+" svelte-1l2lkjd")&&m(A,"class",Se),l[0]&256&&J(Ne,d[8]),l[0]&1&&J(we,d[0]),l[0]&2&&J(je,d[1])},i:ot,o:ot,d(d){d&&v(p),Ke=!1,ut(at)}}}function Mt(o,p,e){let L=0,U=0,G=nt[0],N=Xe.filter(s=>s.stageId===G.id),t=N[0],n=mt[0],ae=!1,k=t.hp+n.hpMod,I=t.mp+n.mpMod,z=it.filter(s=>s.stageId===G.id),i=z[Math.floor(Math.random()*z.length)],y=i.hp,j="",le=0,P=!1,O=!1,Q=!1,W=!1,w=null,se=null,re=null,ie=null;const ce=()=>{if(I!==t.mp+n.mpMod&&I+t.mpRegen+n.mpRegenMod<=t.mp+n.mpMod){e(5,I=I+t.mpRegen+n.mpRegenMod);return}e(5,I=t.mp+n.mpMod)},de=(s,r)=>{if(k-(i.attack-i.attack*s)*r<=0){e(8,j="Defeat!"),e(4,k=0);return}e(4,k=k-(i.attack-i.attack*s)*r)},oe=(s,r,c)=>{try{const _=t.speed+n.speedMod;let g=(t.defense+n.defenseMod)/100,Y=i.critical/100,S=1,E=!1;if(i.attackType==="Magic"&&(g=0),i.speed<_?E=Math.random()>=.5:E=Math.random()>=.8,le>1&&!E&&!s&&(E=!0),!E&&s&&e(8,j="Enemy was too slow!"),!E&&!s){e(5,I=t.mp+n.mpMod),le+=1,h(r,c);return}r===t.attackName&&ce(),E&&s&&e(8,j="Both abilities succeeded."),E&&!s&&e(8,j="Your summon was too slow!"),E&&(Math.random()<=Y&&(S=1.5),i.attackType==="Poison"&&S===1&&(S=1.5),de(g,S),e(11,Q=!0),re=setTimeout(()=>e(11,Q=!1),500))}catch(_){console.error(_)}},X=(s,r,c,_,g)=>{g==="Lifesteal"&&c&&(k+s*r*.2>t.hp+n.hpMod?e(4,k=t.hp+n.hpMod):e(4,k=k+s*r*.2)),oe(c,_,g)},q=(s,r,c,_,g)=>{s&&(k+r*c>t.hp+n.hpMod?e(4,k=t.hp+n.hpMod):e(4,k=k+r*c)),oe(s,_,g)},F=(s,r,c,_,g,Y,S)=>{if(e(5,I=I-c),S!=="Heal"){if(y-(r-r*g)*_<=0&&s){e(7,y=0),e(8,j="Victory!"),e(0,L+=i.reward*2),e(1,U+=i.reward),e(9,P=!0),w=setTimeout(()=>e(9,P=!1),500),e(10,O=!0),se=setTimeout(()=>e(10,O=!1),500);return}s&&(e(7,y=y-(r-r*g)*_),e(9,P=!0),w=setTimeout(()=>e(9,P=!1),500),e(10,O=!0),se=setTimeout(()=>e(10,O=!1),500)),X(r,_,s,Y,S);return}q(s,r,_,Y,S)},V=()=>{(k<=0||y<=0)&&(e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),e(12,W=!0),ie=setTimeout(()=>e(12,W=!1),500),e(6,i=z[Math.floor(Math.random()*z.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${H+"/game/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${H+"/game/"+i.img.slice(0,-4)+"_attack.png"})`),e(7,y=i.hp),e(8,j=""))},h=(s,r)=>{try{const c=t.attack+n.attackMod,_=t.speed+n.speedMod,g=(t.critical+n.criticalMod)/100;let Y=t.special+n.specialMod,S=t.specialCost,E=i.defense/100,R=!1,A=1;if(W)return;if(V(),r==="Magic"&&(E=0),_<i.speed?R=Math.random()>=.5:R=Math.random()>=.8,Math.random()<=g&&(A=1.5),r==="Poison"&&A===1&&(A=1.5),s===t.attackName){if(y-(c-c*E)*A<=0&&R){e(7,y=0),e(8,j="Victory!"),e(0,L+=i.reward*2),e(1,U+=i.reward),e(9,P=!0),w=setTimeout(()=>e(9,P=!1),500);return}R&&(e(7,y=y-(c-c*E)*A),e(9,P=!0),w=setTimeout(()=>e(9,P=!1),500)),oe(R,s,r);return}I>=S?F(R,Y,S,A,E,s,r):e(8,j="Not enough MP!")}catch(c){console.error(c)}},ue=()=>{try{const s=i;e(4,k=0),V(),e(3,t=Xe.find(r=>r.id===s.id)),e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${H+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${H+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`)}catch(s){console.error(s)}},fe=()=>{try{const r=[{label:"Name",value:t.name},{label:"HP",value:t.hp+n.hpMod},{label:"Speed",value:t.speed+n.speedMod},{label:"Defense",value:t.defense+n.defenseMod},{label:"Critical",value:t.critical+n.criticalMod},{label:"MP",value:t.mp+n.mpMod},{label:"MP Regen",value:t.mpRegen+n.mpRegenMod},{label:`
Attack Name`,value:t.attackName},{label:"Attack",value:t.attack+n.attackMod},{label:"Attack Type",value:t.attackType},{label:`
Special Name`,value:t.specialName},{label:"Special",value:t.special+n.specialMod},{label:"Special Cost",value:t.specialCost},{label:"Special Type",value:t.specialType}].map(c=>`${c.label}: ${c.value}`).join(`
`);alert(r)}catch(s){console.error(s)}},Me=()=>{ae&&(localStorage.setItem("drachmas",U),localStorage.setItem("playerExperience",L),localStorage.setItem("chosenRelicId",n.id))};ft(()=>{try{const s=localStorage.getItem("drachmas"),r=localStorage.getItem("playerExperience"),c=localStorage.getItem("chosenRelicId"),_=localStorage.getItem("curStageId");pt.set(!0),s&&e(1,U=parseInt(s)),r&&e(0,L=parseInt(r)),c&&e(16,n=mt.find(g=>g.id===parseInt(c))),_&&e(2,G=nt.find(g=>g.id===parseInt(_))),N=Xe.filter(g=>g.stageId===G.id),e(3,t=N[0]),e(4,k=t.hp+n.hpMod),e(5,I=t.mp+n.mpMod),document.documentElement.style.setProperty("--player-creature-img-attack",`url(${H+"/game/"+t.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${H+"/game/"+t.img.slice(0,-4)+"_hurt.png"})`),z=it.filter(g=>g.stageId===G.id),e(6,i=z[Math.floor(Math.random()*z.length)]),e(7,y=i.hp),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${H+"/game/"+i.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${H+"/game/"+i.img.slice(0,-4)+"_attack.png"})`),ae=!0}catch(s){console.error(s)}}),gt(()=>{pt.set(!1),clearTimeout(w),clearTimeout(se),clearTimeout(re),clearTimeout(ie)});const ne=()=>h(t.attackName,t.attackType),Ie=s=>{s.preventDefault(),h(t.specialName,t.specialType)},Z=()=>h(t.specialName,t.specialType),ge=()=>{yt(H+"/game/world")};return o.$$.update=()=>{o.$$.dirty[0]&65539&&Me()},[L,U,G,t,k,I,i,y,j,P,O,Q,W,h,ue,fe,n,ne,Ie,Z,ge]}class Dt extends ht{constructor(p){super(),kt(this,p,Mt,vt,dt,{},null,[-1,-1])}}export{Dt as component};
