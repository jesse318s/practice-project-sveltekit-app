import{s as Ee,d as ue,e as ge,n as Me,r as Ce,o as Te,f as Ie}from"../chunks/scheduler.BoReh3vH.js";import{S as ve,i as ze,e as T,t as b,s as H,c as I,a as q,b as R,d as P,f as G,y as ke,o as i,z as O,g as De,h as t,A as _e,j as $}from"../chunks/index.DhL7nboW.js";import{i as ye}from"../chunks/store.BxR7W1V8.js";const Pe=[{id:1,name:"Demon",img:"demon_creature.png",price:50,hp:60,attack:50,attackName:"Slash",attackType:"Normal",speed:60,defense:20,critical:25,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Harvest",specialType:"Lifesteal",specialEffect:"special-effect-1"},{id:2,name:"Lizard",img:"lizard_creature.png",price:50,hp:110,attack:30,attackName:"Impale",attackType:"Normal",speed:30,defense:15,critical:15,mp:100,mpRegen:25,special:75,specialCost:100,specialName:"Inject",specialType:"Poison",specialEffect:"special_effect_2"}],we=[{id:1,name:"Gust of Hermes",img:"relic1.png",description:"Grants the user's summon +5 speed while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:5,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:0},{id:2,name:"Spark of Zeus",img:"relic2.png",description:"Grants the user's summon +15 attack while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:15,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:0,specialMod:0,price:150},{id:3,name:"Cup of Dionysus",img:"relic3.png",description:"Grants the user's summon +25 MP regen while relic is being used. (Infinite duration, and only one relic can be active at a time)",hpMod:0,attackMod:0,speedMod:0,defenseMod:0,criticalMod:0,mpMod:0,mpRegenMod:25,specialMod:0,price:300}],ae=[{id:1,name:"Demon",img:"demon_creature.png",reward:3,hp:60,attack:50,attackType:"Normal",speed:60,defense:20,critical:25},{id:2,name:"Lizard",img:"lizard_creature.png",reward:3,hp:110,attack:30,attackType:"Normal",speed:30,defense:15,critical:15}];function be(l){let m,e,V,U,s,n,p,E,J,c,g,v,j,z,C,_,S,Y,L,B,K,Z,M,Q,W,ee,D,re="Attack",te,a,o="Special Attack",d,u,y,N,h,k,w,A,F,le,se,ce,de;return{c(){m=T("div"),e=T("div"),V=T("div"),U=b("Player HP: "),s=b(l[2]),n=H(),p=T("div"),E=b("Player MP: "),J=b(l[3]),c=H(),g=T("div"),v=b("Enemy HP: "),j=b(l[5]),z=H(),C=T("div"),_=T("img"),Y=H(),L=T("div"),B=T("div"),Z=H(),M=T("img"),ee=H(),D=T("button"),D.textContent=re,te=H(),a=T("button"),a.textContent=o,d=H(),u=T("div"),y=b(l[6]),N=H(),h=T("div"),k=b("Experience: "),w=b(l[0]),A=H(),F=T("div"),le=b("Drachmas: "),se=b(l[1]),this.h()},l(f){m=I(f,"DIV",{class:!0});var r=q(m);e=I(r,"DIV",{class:!0});var X=q(e);V=I(X,"DIV",{});var oe=q(V);U=R(oe,"Player HP: "),s=R(oe,l[2]),oe.forEach(P),n=G(X),p=I(X,"DIV",{});var ne=q(p);E=R(ne,"Player MP: "),J=R(ne,l[3]),ne.forEach(P),c=G(X),g=I(X,"DIV",{});var ie=q(g);v=R(ie,"Enemy HP: "),j=R(ie,l[5]),ie.forEach(P),X.forEach(P),z=G(r),C=I(r,"DIV",{class:!0});var x=q(C);_=I(x,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),Y=G(x),L=I(x,"DIV",{class:!0});var fe=q(L);B=I(fe,"DIV",{class:!0}),q(B).forEach(P),fe.forEach(P),Z=G(x),M=I(x,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),x.forEach(P),ee=G(r),D=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(D)!=="svelte-ig8gg4"&&(D.textContent=re),te=G(r),a=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(a)!=="svelte-11zl5of"&&(a.textContent=o),d=G(r),u=I(r,"DIV",{class:!0});var he=q(u);y=R(he,l[6]),he.forEach(P),N=G(r),h=I(r,"DIV",{class:!0});var me=q(h);k=R(me,"Experience: "),w=R(me,l[0]),me.forEach(P),A=G(r),F=I(r,"DIV",{class:!0});var pe=q(F);le=R(pe,"Drachmas: "),se=R(pe,l[1]),pe.forEach(P),r.forEach(P),this.h()},h(){i(e,"class","stats svelte-qz431e"),ue(_.src,S=l[10].img)||i(_,"src",S),i(_,"alt",l[10].name),i(_,"width","128px"),i(_,"height","128px"),i(_,"class","svelte-qz431e"),O(_,"attack",l[7]),O(_,"hurt",l[9]),i(B,"class",K=ge(l[8]?l[10].specialEffect:"")+" svelte-qz431e"),i(L,"class","special-effect-container svelte-qz431e"),i(M,"class","enemy-creature svelte-qz431e"),ue(M.src,Q=l[4].img)||i(M,"src",Q),i(M,"alt",W=l[4].name),i(M,"width","128px"),i(M,"height","128px"),O(M,"enemy-attack",l[9]),O(M,"enemy-hurt",l[7]),i(C,"class","creatures svelte-qz431e"),i(D,"class","svelte-qz431e"),i(a,"class","svelte-qz431e"),i(u,"class","combat-alert svelte-qz431e"),i(h,"class","experience svelte-qz431e"),i(F,"class","drachmas svelte-qz431e"),i(m,"class","game-container svelte-qz431e")},m(f,r){De(f,m,r),t(m,e),t(e,V),t(V,U),t(V,s),t(e,n),t(e,p),t(p,E),t(p,J),t(e,c),t(e,g),t(g,v),t(g,j),t(m,z),t(m,C),t(C,_),t(C,Y),t(C,L),t(L,B),t(C,Z),t(C,M),t(m,ee),t(m,D),t(m,te),t(m,a),t(m,d),t(m,u),t(u,y),t(m,N),t(m,h),t(h,k),t(h,w),t(m,A),t(m,F),t(F,le),t(F,se),ce||(de=[_e(D,"click",l[12]),_e(a,"click",l[13])],ce=!0)},p(f,[r]){r&4&&$(s,f[2]),r&8&&$(J,f[3]),r&32&&$(j,f[5]),r&128&&O(_,"attack",f[7]),r&512&&O(_,"hurt",f[9]),r&256&&K!==(K=ge(f[8]?f[10].specialEffect:"")+" svelte-qz431e")&&i(B,"class",K),r&16&&!ue(M.src,Q=f[4].img)&&i(M,"src",Q),r&16&&W!==(W=f[4].name)&&i(M,"alt",W),r&512&&O(M,"enemy-attack",f[9]),r&128&&O(M,"enemy-hurt",f[7]),r&64&&$(y,f[6]),r&1&&$(w,f[0]),r&2&&$(se,f[1])},i:Me,o:Me,d(f){f&&P(m),ce=!1,Ce(de)}}}function qe(l,m,e){let V=0,U=0,s=Pe[0],n=we[0],p=s.hp+n.hpMod,E=s.mp+n.mpMod,J=E,c=ae[Math.floor(Math.random()*ae.length)],g=c.hp,v="",j=0,z=!1,C=!1,_=!1,S=null,Y=null,L=null;const B=()=>{if(E!==s.mp+n.mpMod&&E+s.mpRegen+n.mpRegenMod<=s.mp+n.mpMod){e(3,E=E+s.mpRegen+n.mpRegenMod);return}e(3,E=s.mp+n.mpMod)},K=(a,o)=>{if(p-(c.attack-c.attack*a)*o<=0){e(6,v="Defeat!"),e(2,p=0);return}e(2,p=p-(c.attack-c.attack*a)*o)},Z=(a,o,d)=>{try{const u=s.speed+n.speedMod;let y=(s.defense+n.defenseMod)/100,N=c.critical/100,h=1,k=!1;if(c.attackType==="Magic"&&(y=0),c.speed<u?k=Math.random()>=.5:k=Math.random()>=.8,j>1&&!k&&!a&&(k=!0),!k&&a&&e(6,v="Enemy was too slow!"),!k&&!a){e(3,E=J),j+=1,D(o,d);return}o===s.attackName&&B(),k&&a&&e(6,v="Both abilities succeeded."),k&&!a&&e(6,v="Your summon was too slow!"),k&&(Math.random()<=N&&(h=1.5),c.attackType==="Poison"&&h===1&&(h=1.5),K(y,h),e(9,_=!0),L=setTimeout(()=>e(9,_=!1),500))}catch(u){console.error(u)}},M=(a,o,d,u,y)=>{y==="Lifesteal"&&d&&(p+a*o*.2>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+a*o*.2)),Z(d,u,y)},Q=(a,o,d,u,y)=>{a&&(p+o*d>s.hp+n.hpMod?e(2,p=s.hp+n.hpMod):e(2,p=p+o*d)),Z(a,u,y)},W=(a,o,d,u,y,N,h)=>{if(e(3,E=E-d),h!=="Heal"){if(g-(o-o*y)*u<=0&&a){e(5,g=0),e(6,v="Victory!"),e(0,V+=c.reward*2),e(1,U+=c.reward),e(7,z=!0),S=setTimeout(()=>e(7,z=!1),500),e(8,C=!0),Y=setTimeout(()=>e(8,C=!1),500);return}a&&(e(5,g=g-(o-o*y)*u),e(7,z=!0),S=setTimeout(()=>e(7,z=!1),500),e(8,C=!0),Y=setTimeout(()=>e(8,C=!1),500)),M(o,u,a,N,h);return}Q(a,o,u,N,h)},ee=()=>{(p<=0||g<=0)&&(e(2,p=s.hp+n.hpMod),e(3,E=s.mp+n.mpMod),e(4,c=ae[Math.floor(Math.random()*ae.length)]),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${c.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${c.img.slice(0,-4)+"_attack.png"})`),e(5,g=c.hp),e(6,v=""))},D=(a,o)=>{try{const d=s.attack+n.attackMod,u=s.speed+n.speedMod,y=(s.critical+n.criticalMod)/100;let N=s.special+n.specialMod,h=s.specialCost,k=c.defense/100,w=!1,A=1;if(ee(),o==="Magic"&&(k=0),u<c.speed?w=Math.random()>=.5:w=Math.random()>=.8,Math.random()<=y&&(A=1.5),o==="Poison"&&A===1&&(A=1.5),a===s.attackName){if(g-(d-d*k)*A<=0&&w){e(5,g=0),e(6,v="Victory!"),e(0,V+=c.reward*2),e(1,U+=c.reward),e(7,z=!0),S=setTimeout(()=>e(7,z=!1),500);return}w&&(e(5,g=g-(d-d*k)*A),e(7,z=!0),S=setTimeout(()=>e(7,z=!1),500)),Z(w,a,o);return}E>=h?W(w,N,h,A,k,a,o):e(6,v="Not enough MP!")}catch(d){console.error(d)}};return Te(()=>{document.documentElement.style.setProperty("--player-creature-img-attack",`url(${s.img.slice(0,-4)+"_attack.png"})`),document.documentElement.style.setProperty("--player-creature-img-hurt",`url(${s.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-hurt",`url(${c.img.slice(0,-4)+"_hurt.png"})`),document.documentElement.style.setProperty("--enemy-creature-img-attack",`url(${c.img.slice(0,-4)+"_attack.png"})`),ye.set(!0)}),Ie(()=>{ye.set(!1),clearTimeout(S),clearTimeout(Y),clearTimeout(L)}),[V,U,p,E,c,g,v,z,C,_,s,D,()=>D(s.attackName,s.attackType),()=>D(s.specialName,s.specialType)]}class Ae extends ve{constructor(m){super(),ze(this,m,qe,be,Ee,{})}}export{Ae as component};
